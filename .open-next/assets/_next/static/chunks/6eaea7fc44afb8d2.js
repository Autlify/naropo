(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,784774,e=>{"use strict";var a=e.i(843476),t=e.i(271645),l=e.i(975157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",e),...t})}));r.displayName="Table";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let s=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...t}));s.displayName="TableBody";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));n.displayName="TableFooter";let o=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));o.displayName="TableRow";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let c=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableCell";let m=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...t}));m.displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>s,"TableCaption",()=>m,"TableCell",()=>c,"TableFooter",()=>n,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>o])},624687,e=>{"use strict";var a=e.i(843476),t=e.i(271645),l=e.i(975157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));r.displayName="Textarea",e.s(["Textarea",()=>r])},927639,e=>{"use strict";var a=e.i(681307);let t=a.z.object({name:a.z.string().min(1),pathName:a.z.string().optional()}),l=a.z.object({name:a.z.string().min(1)}),r=a.z.object({name:a.z.string().min(1),description:a.z.string(),subDomainName:a.z.string().optional(),favicon:a.z.string().optional()}),i=a.z.object({name:a.z.string().min(1)}),s=/^\d+(\.\d{1,2})?$/,n=a.z.object({name:a.z.string().min(1),description:a.z.string().optional(),value:a.z.string().refine(e=>s.test(e),{message:"Value must be a valid price."})}),o=a.z.object({name:a.z.string().min(1,"Required"),email:a.z.string().email()});e.s(["ContactUserFormSchema",0,o,"CreateFunnelFormSchema",0,r,"CreatePipelineFormSchema",0,l,"FunnelPageSchema",0,t,"LaneFormSchema",0,i,"TicketFormSchema",0,n])},778917,e=>{"use strict";let a=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>a],778917)},699832,e=>{"use strict";var a=e.i(95187);let t=(0,a.createServerReference)("704ec26aac1ae7f8cb08a0bd240a8a07e832cd2722",a.callServer,void 0,a.findSourceMapURL,"upsertFunnel");e.s(["upsertFunnel",()=>t])},846062,e=>{"use strict";var a=e.i(843476),t=e.i(271645),l=e.i(903133),r=e.i(515288),i=e.i(653145),s=e.i(793479),n=e.i(624687),o=e.i(519455),d=e.i(888173),c=e.i(927639),m=e.i(2170),u=e.i(699832),b=e.i(422233),f=e.i(922140),x=e.i(86896),h=e.i(618566),p=e.i(994814),g=e.i(795320);e.s(["default",0,({defaultData:e,subAccountId:j})=>{let{setClose:v}=(0,x.useModal)(),F=(0,h.useRouter)(),N=(0,i.useForm)({mode:"onChange",resolver:(0,p.zodResolver)(c.CreateFunnelFormSchema),defaultValues:{name:e?.name||"",description:e?.description||"",favicon:e?.favicon||"",subDomainName:e?.subDomainName||""}});(0,t.useEffect)(()=>{e&&N.reset({description:e.description||"",favicon:e.favicon||"",name:e.name||"",subDomainName:e.subDomainName||""})},[e]);let T=N.formState.isLoading,C=async a=>{if(!j)return;let t=await (0,u.upsertFunnel)(j,{...a,liveProducts:e?.liveProducts||"[]"},e?.id||(0,b.v4)());await (0,m.saveActivityLogsNotification)({agencyId:void 0,description:`Update funnel | ${t.name}`,subaccountId:j}),t?(0,f.toast)({title:"Success",description:"Saved funnel details"}):(0,f.toast)({variant:"destructive",title:"Oppse!",description:"Could not save funnel details"}),v(),F.refresh()};return(0,a.jsxs)(r.Card,{className:"flex-1",children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{children:"Funnel Details"})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)(l.Form,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(C),className:"flex flex-col gap-4",children:[(0,a.jsx)(l.FormField,{disabled:T,control:N.control,name:"name",render:({field:e})=>(0,a.jsxs)(l.FormItem,{children:[(0,a.jsx)(l.FormLabel,{children:"Funnel Name"}),(0,a.jsx)(l.FormControl,{children:(0,a.jsx)(s.Input,{placeholder:"Name",...e})})]})}),(0,a.jsx)(l.FormField,{disabled:T,control:N.control,name:"description",render:({field:e})=>(0,a.jsxs)(l.FormItem,{children:[(0,a.jsx)(l.FormLabel,{children:"Funnel Description"}),(0,a.jsx)(l.FormControl,{children:(0,a.jsx)(n.Textarea,{placeholder:"Tell us a little bit more about this funnel.",...e})})]})}),(0,a.jsx)(l.FormField,{disabled:T,control:N.control,name:"subDomainName",render:({field:e})=>(0,a.jsxs)(l.FormItem,{children:[(0,a.jsx)(l.FormLabel,{children:"Sub domain"}),(0,a.jsx)(l.FormControl,{children:(0,a.jsx)(s.Input,{placeholder:"Sub domain for funnel",...e})})]})}),(0,a.jsx)(l.FormField,{disabled:T,control:N.control,name:"favicon",render:({field:e})=>(0,a.jsxs)(l.FormItem,{children:[(0,a.jsx)(l.FormLabel,{children:"Favicon"}),(0,a.jsx)(l.FormControl,{children:(0,a.jsx)(g.default,{apiEndpoint:"subaccountLogo",value:e.value,onChange:e.onChange})}),(0,a.jsx)(l.FormMessage,{})]})}),(0,a.jsx)(o.Button,{className:"w-20 mt-4",disabled:T,type:"submit",children:N.formState.isSubmitting?(0,a.jsx)(d.default,{}):"Save"})]})})})]})}])},539194,e=>{"use strict";var a=e.i(843476),t=e.i(152990),l=e.i(682830),r=e.i(555436),i=e.i(784774),s=e.i(86896),n=e.i(793479),o=e.i(519455),d=e.i(824609);function c({columns:e,data:c,filterValue:m,modalChildren:u,actionButtonText:b}){let{isOpen:f,setOpen:x,setClose:h}=(0,s.useModal)(),p=(0,t.useReactTable)({data:c,columns:e,getCoreRowModel:(0,l.getCoreRowModel)(),getFilteredRowModel:(0,l.getFilteredRowModel)()});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center py-4 gap-2",children:[(0,a.jsx)(r.Search,{}),(0,a.jsx)(n.Input,{placeholder:"Search funnel name...",value:p.getColumn(m)?.getFilterValue()??"",onChange:e=>p.getColumn(m)?.setFilterValue(e.target.value),className:"h-12"})]}),(0,a.jsx)(o.Button,{className:"flex gap-2",onClick:()=>{u&&x((0,a.jsx)(d.default,{title:"Create A Funnel",subheading:"Funnels are a like websites, but better! Try creating one!",children:u}))},children:b})]}),(0,a.jsx)("div",{className:" border bg-background rounded-lg",children:(0,a.jsxs)(i.Table,{className:"",children:[(0,a.jsx)(i.TableHeader,{children:p.getHeaderGroups().map(e=>(0,a.jsx)(i.TableRow,{children:e.headers.map(e=>(0,a.jsx)(i.TableHead,{children:e.isPlaceholder?null:(0,t.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(i.TableBody,{children:p.getRowModel().rows.length?p.getRowModel().rows.map(e=>(0,a.jsx)(i.TableRow,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(i.TableCell,{children:(0,t.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:e.length,className:"h-24 text-center",children:"No Results."})})})]})})]})}e.s(["default",()=>c])},651369,e=>{"use strict";var a=e.i(843476),t=e.i(487486),l=e.i(778917),r=e.i(522016);let i=[{accessorKey:"name",header:"Name",cell:({row:e})=>(0,a.jsxs)(r.default,{className:"flex gap-2 items-center",href:`/subaccount/${e.original.subAccountId}/funnels/${e.original.id}`,children:[e.getValue("name"),(0,a.jsx)(l.ExternalLink,{size:15})]})},{accessorKey:"updatedAt",header:"Last Updated",cell:({row:e})=>{let t=` ${e.original.updatedAt.toDateString()} ${e.original.updatedAt.toLocaleTimeString()} `;return(0,a.jsx)("span",{className:"text-muted-foreground",children:t})}},{accessorKey:"published",header:"Status",cell:({row:e})=>e.original.published?(0,a.jsxs)(t.Badge,{variant:"default",children:["Live - ",e.original.subDomainName]}):(0,a.jsx)(t.Badge,{variant:"secondary",children:"Draft"})}];e.s(["columns",0,i])}]);