(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,128880,901159,e=>{"use strict";var t=e.i(435684);function r(e){let r=(0,t.toDate)(e),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function n(e,r){let n=(0,t.toDate)(e),s=(0,t.toDate)(r);return 12*(n.getFullYear()-s.getFullYear())+(n.getMonth()-s.getMonth())}e.s(["endOfMonth",()=>r],128880),e.s(["differenceInCalendarMonths",()=>n],901159)},809637,e=>{"use strict";var t=e.i(96226),r=e.i(435684);function n(e,t){let n=(0,r.toDate)(e),s=(0,r.toDate)(t),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}var s=e.i(8470),a=e.i(901159),i=e.i(128880),o=e.i(363367),l=e.i(511048),c=e.i(74327);function d(e,d){return function(e,t,d){var u,m,h;let x,p,f,g=(0,l.getDefaultOptions)(),j=d?.locale??g.locale??o.defaultLocale,b=n(e,t);if(isNaN(b))throw RangeError("Invalid time value");let v=Object.assign({},d,{addSuffix:d?.addSuffix,comparison:b});b>0?(x=(0,r.toDate)(t),p=(0,r.toDate)(e)):(x=(0,r.toDate)(e),p=(0,r.toDate)(t));let y=(u=p,m=x,(h=void 0,e=>{let t=(h?Math[h]:Math.trunc)(e);return 0===t?0:t})(((0,r.toDate)(u)-(0,r.toDate)(m))/1e3)),w=Math.round((y-((0,c.getTimezoneOffsetInMilliseconds)(p)-(0,c.getTimezoneOffsetInMilliseconds)(x))/1e3)/60);if(w<2)if(d?.includeSeconds)if(y<5)return j.formatDistance("lessThanXSeconds",5,v);else if(y<10)return j.formatDistance("lessThanXSeconds",10,v);else if(y<20)return j.formatDistance("lessThanXSeconds",20,v);else if(y<40)return j.formatDistance("halfAMinute",0,v);else if(y<60)return j.formatDistance("lessThanXMinutes",1,v);else return j.formatDistance("xMinutes",1,v);else if(0===w)return j.formatDistance("lessThanXMinutes",1,v);else return j.formatDistance("xMinutes",w,v);if(w<45)return j.formatDistance("xMinutes",w,v);if(w<90)return j.formatDistance("aboutXHours",1,v);if(w<s.minutesInDay){let e=Math.round(w/60);return j.formatDistance("aboutXHours",e,v)}if(w<2520)return j.formatDistance("xDays",1,v);else if(w<s.minutesInMonth){let e=Math.round(w/s.minutesInDay);return j.formatDistance("xDays",e,v)}else if(w<2*s.minutesInMonth)return f=Math.round(w/s.minutesInMonth),j.formatDistance("aboutXMonths",f,v);if((f=function(e,t){let s,o=(0,r.toDate)(e),l=(0,r.toDate)(t),c=n(o,l),d=Math.abs((0,a.differenceInCalendarMonths)(o,l));if(d<1)s=0;else{var u;let t,a;1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-c*d);let m=n(o,l)===-c;u=(0,r.toDate)(e),+(t=(0,r.toDate)(u),(a=(0,r.toDate)(t)).setHours(23,59,59,999),a)==+(0,i.endOfMonth)(t)&&1===d&&1===n(e,l)&&(m=!1),s=c*(d-Number(m))}return 0===s?0:s}(p,x))<12){let e=Math.round(w/s.minutesInMonth);return j.formatDistance("xMonths",e,v)}{let e=f%12,t=Math.trunc(f/12);return e<3?j.formatDistance("aboutXYears",t,v):e<9?j.formatDistance("overXYears",t,v):j.formatDistance("almostXYears",t+1,v)}}(e,(0,t.constructFrom)(e,Date.now()),d)}e.s(["formatDistanceToNow",()=>d],809637)},342671,966649,e=>{"use strict";var t=e.i(95187);let r=(0,t.createServerReference)("6090bcd21259ee87777f75e1ef84a8b891a09f5d13",t.callServer,void 0,t.findSourceMapURL,"approveJournalEntry");e.s(["approveJournalEntry",()=>r],342671);let n=(0,t.createServerReference)("603bb93f0adfe5d5f4b85d60ba0ec3d0e7eb8d671d",t.callServer,void 0,t.findSourceMapURL,"rejectJournalEntry");e.s(["rejectJournalEntry",()=>n],966649)},420130,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(152990),s=e.i(682830),a=e.i(784774),i=e.i(519455),o=e.i(487486),l=e.i(515288),c=e.i(980376),d=e.i(624687),u=e.i(110204),m=e.i(772436),h=e.i(759684),x=e.i(868499),p=e.i(595468),f=e.i(373884),g=e.i(286536),j=e.i(503116),b=e.i(178583);let v=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var y=e.i(531278),w=e.i(972520),N=e.i(846696),C=e.i(618566),S=e.i(945919),F=e.i(809637),T=e.i(342671),D=e.i(966649);let M=({entries:e,agencyId:M})=>{let k=(0,C.useRouter)(),[A,I]=(0,r.useTransition)(),[P,R]=(0,r.useState)(null),[E,L]=(0,r.useState)(!1),[O,z]=(0,r.useState)(""),[_,Y]=(0,r.useState)(null),H=e=>{Y(e.id),I(async()=>{let t=await (0,T.approveJournalEntry)(e.id);t.success?(N.toast.success(`Entry ${e.entryNumber} approved and posted`),R(null),k.refresh()):N.toast.error(t.error??"Failed to approve"),Y(null)})},U=e=>e.reduce((e,t)=>e+(t.debitAmount||0),0),B=[{accessorKey:"entryNumber",header:"Entry",cell:({row:e})=>(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"font-mono font-medium",children:["JE-",e.original.entryNumber]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.original.Period.name})]})},{accessorKey:"description",header:"Description",cell:({row:e})=>(0,t.jsx)("div",{className:"max-w-xs truncate",children:e.original.description})},{id:"amount",header:"Amount",cell:({row:e})=>(0,t.jsxs)("div",{className:"font-mono font-medium tabular-nums",children:["$",U(e.original.Lines).toLocaleString(void 0,{minimumFractionDigits:2})]})},{id:"submitter",header:"Submitted By",cell:({row:e})=>(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,t.jsx)(v,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.original.submitter?.name||"Unknown"]}),e.original.submittedAt&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,t.jsx)(j.Clock,{className:"h-3 w-3"}),(0,F.formatDistanceToNow)(new Date(e.original.submittedAt),{addSuffix:!0})]})]})},{id:"actions",cell:({row:e})=>{let r=e.original,n=_===r.id;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>R(r),disabled:n,children:(0,t.jsx)(g.Eye,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"text-green-600 hover:bg-green-50 hover:text-green-700 dark:hover:bg-green-950",onClick:()=>H(r),disabled:A,children:n?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(p.CheckCircle2,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-950",onClick:()=>{R(r),L(!0)},disabled:A,children:(0,t.jsx)(f.XCircle,{className:"h-4 w-4"})})]})}}],V=(0,n.useReactTable)({data:e,columns:B,getCoreRowModel:(0,s.getCoreRowModel)()});return 0===e.length?(0,t.jsx)(l.Card,{className:"border-dashed",children:(0,t.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,t.jsx)(p.CheckCircle2,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"All caught up!"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No pending approvals at this time."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Card,{className:"border-border/50",children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(b.FileText,{className:"h-5 w-5"}),"Journal Entries"]}),(0,t.jsxs)(l.CardDescription,{children:[e.length," pending approval",1!==e.length?"s":""]})]}),(0,t.jsx)(o.Badge,{variant:"secondary",className:"text-lg px-3",children:e.length})]})}),(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:V.getHeaderGroups().map(e=>(0,t.jsx)(a.TableRow,{className:"hover:bg-transparent",children:e.headers.map(e=>(0,t.jsx)(a.TableHead,{className:"bg-muted/50",children:e.isPlaceholder?null:(0,n.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(a.TableBody,{children:V.getRowModel().rows.map(e=>(0,t.jsx)(a.TableRow,{className:"cursor-pointer transition-colors",onClick:()=>R(e.original),children:e.getVisibleCells().map(e=>(0,t.jsx)(a.TableCell,{onClick:e=>e.stopPropagation(),children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})]}),(0,t.jsx)(c.Sheet,{open:!!P&&!E,onOpenChange:e=>!e&&R(null),children:(0,t.jsx)(c.SheetContent,{className:"w-full sm:max-w-xl overflow-y-auto",children:P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.SheetHeader,{children:[(0,t.jsxs)(c.SheetTitle,{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.Badge,{variant:"outline",className:"font-mono",children:["JE-",P.entryNumber]}),(0,t.jsx)(w.ArrowRight,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(o.Badge,{className:"bg-amber-500/10 text-amber-600 border-amber-500/20",children:"Pending Approval"})]}),(0,t.jsx)(c.SheetDescription,{className:"text-left",children:P.description})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Period"}),(0,t.jsx)("div",{children:P.Period.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Entry Date"}),(0,t.jsx)("div",{children:(0,S.format)(new Date(P.entryDate),"MMM d, yyyy")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Type"}),(0,t.jsx)("div",{children:P.entryType.replace(/_/g," ")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Submitted By"}),(0,t.jsx)("div",{children:P.submitter?.name||P.submitter?.email})]})]}),(0,t.jsx)(m.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-3",children:"Line Items"}),(0,t.jsx)(h.ScrollArea,{className:"h-64 rounded border",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:(0,t.jsxs)(a.TableRow,{className:"bg-muted/50",children:[(0,t.jsx)(a.TableHead,{children:"Account"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"Debit"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"Credit"})]})}),(0,t.jsxs)(a.TableBody,{children:[P.Lines.map(e=>(0,t.jsxs)(a.TableRow,{children:[(0,t.jsxs)(a.TableCell,{children:[(0,t.jsx)("div",{className:"font-mono text-sm",children:e.Account?.code}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.Account?.name})]}),(0,t.jsx)(a.TableCell,{className:"text-right font-mono tabular-nums",children:e.debitAmount>0?`$${e.debitAmount.toLocaleString()}`:"—"}),(0,t.jsx)(a.TableCell,{className:"text-right font-mono tabular-nums",children:e.creditAmount>0?`$${e.creditAmount.toLocaleString()}`:"—"})]},e?.id)),(0,t.jsxs)(a.TableRow,{className:"bg-muted/30 font-medium",children:[(0,t.jsx)(a.TableCell,{children:"Total"}),(0,t.jsxs)(a.TableCell,{className:"text-right font-mono",children:["$",U(P.Lines).toLocaleString()]}),(0,t.jsxs)(a.TableCell,{className:"text-right font-mono",children:["$",P.Lines.reduce((e,t)=>e+(t.creditAmount||0),0).toLocaleString()]})]})]})]})})]})]}),(0,t.jsxs)(c.SheetFooter,{className:"mt-6 gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",className:"flex-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-950",onClick:()=>L(!0),disabled:A,children:[(0,t.jsx)(f.XCircle,{className:"mr-2 h-4 w-4"}),"Reject"]}),(0,t.jsxs)(i.Button,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>H(P),disabled:A,children:[_===P.id?(0,t.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(p.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Approve & Post"]})]})]})})}),(0,t.jsx)(x.AlertDialog,{open:E,onOpenChange:L,children:(0,t.jsxs)(x.AlertDialogContent,{children:[(0,t.jsxs)(x.AlertDialogHeader,{children:[(0,t.jsx)(x.AlertDialogTitle,{children:"Reject Journal Entry"}),(0,t.jsx)(x.AlertDialogDescription,{children:P&&`Rejecting entry JE-${P.entryNumber}. This action will return the entry to draft status.`})]}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)(u.Label,{htmlFor:"reason",children:"Rejection Reason"}),(0,t.jsx)(d.Textarea,{id:"reason",placeholder:"Please provide a reason for rejection...",value:O,onChange:e=>z(e.target.value),className:"mt-2",rows:3})]}),(0,t.jsxs)(x.AlertDialogFooter,{children:[(0,t.jsx)(x.AlertDialogCancel,{onClick:()=>z(""),children:"Cancel"}),(0,t.jsxs)(x.AlertDialogAction,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{P&&O.trim()&&(Y(P.id),I(async()=>{let e=await (0,D.rejectJournalEntry)(P.id,O);e.success?(N.toast.success(`Entry ${P.entryNumber} rejected`),R(null),L(!1),z(""),k.refresh()):N.toast.error(e.error??"Failed to reject"),Y(null)}))},disabled:!O.trim()||A,children:[A?(0,t.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Reject Entry"]})]})]})})]})};e.s(["ApprovalQueue",()=>M],420130)},899602,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>t],899602)},570857,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(152990),s=e.i(682830),a=e.i(784774),i=e.i(793479),o=e.i(519455),l=e.i(487486),c=e.i(967489),d=e.i(980376),u=e.i(515288),m=e.i(759684),h=e.i(772436),x=e.i(899602),p=e.i(555436),f=e.i(286536),g=e.i(373375),j=e.i(463059),b=e.i(16715),v=e.i(87316),y=e.i(531278),w=e.i(809637),N=e.i(945919),C=e.i(95187);let S=(0,C.createServerReference)("40a98229cb3511534b217e290203e86f927b0f9f2e",C.callServer,void 0,C.findSourceMapURL,"searchAuditTrail");var F=e.i(975157);let T={CREATE:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",UPDATE:"bg-blue-500/10 text-blue-500 border-blue-500/20",DELETE:"bg-red-500/10 text-red-500 border-red-500/20",SUBMIT:"bg-purple-500/10 text-purple-500 border-purple-500/20",APPROVE:"bg-green-500/10 text-green-500 border-green-500/20",REJECT:"bg-orange-500/10 text-orange-500 border-orange-500/20",POST:"bg-cyan-500/10 text-cyan-500 border-cyan-500/20",REVERSE:"bg-amber-500/10 text-amber-500 border-amber-500/20",VOID:"bg-rose-500/10 text-rose-500 border-rose-500/20",CLOSE:"bg-slate-500/10 text-slate-500 border-slate-500/20",LOCK:"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",CONSOLIDATE:"bg-indigo-500/10 text-indigo-500 border-indigo-500/20",ELIMINATE:"bg-fuchsia-500/10 text-fuchsia-500 border-fuchsia-500/20"},D=["CREATE","UPDATE","DELETE","SUBMIT","APPROVE","REJECT","POST","REVERSE","VOID","CLOSE","LOCK","CONSOLIDATE","ELIMINATE"],M=({agencyId:e,entityTypes:C,initialData:M})=>{let[k,A]=(0,r.useTransition)(),[I,P]=(0,r.useState)(M?.items??[]),[R,E]=(0,r.useState)(M?.total??0),[L,O]=(0,r.useState)([]),[z,_]=(0,r.useState)(null),[Y,H]=(0,r.useState)(""),[U,B]=(0,r.useState)(""),[V,q]=(0,r.useState)(""),[$,W]=(0,r.useState)(1),G=(0,r.useCallback)(()=>{A(async()=>{let t=await S({agencyId:e,search:Y||void 0,entityType:U||void 0,action:V||void 0,page:$,pageSize:25});t.success&&t.data&&(P(t.data.items),E(t.data.total))})},[e,Y,U,V,$]),Q=()=>{W(1),G()},K=[{accessorKey:"timestamp",header:({column:e})=>(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"-ml-3",children:[(0,t.jsx)(v.Calendar,{className:"mr-2 h-4 w-4"}),"Time",(0,t.jsx)(x.ArrowUpDown,{className:"ml-2 h-3 w-3"})]}),cell:({row:e})=>{let r=new Date(e.getValue("timestamp"));return(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:(0,N.format)(r,"MMM d, yyyy")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,N.format)(r,"HH:mm:ss")})]})}},{accessorKey:"action",header:"Action",cell:({row:e})=>{let r=e.getValue("action");return(0,t.jsx)(l.Badge,{variant:"outline",className:(0,F.cn)("font-medium",T[r]),children:r})}},{accessorKey:"entityType",header:"Entity",cell:({row:e})=>(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"font-medium",children:e.getValue("entityType")}),(0,t.jsxs)("div",{className:"font-mono text-xs text-muted-foreground truncate max-w-32",children:[e.original.entityId.slice(0,8),"..."]})]})},{accessorKey:"userName",header:"User",cell:({row:e})=>(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"font-medium",children:e.original.userName||"Unknown"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate max-w-40",children:e.original.userEmail})]})},{accessorKey:"reason",header:"Notes",cell:({row:e})=>{let r=e.original.reason;return r?(0,t.jsx)("div",{className:"max-w-48 truncate text-sm",children:r}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"—"})}},{id:"actions",cell:({row:e})=>(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>_(e.original),children:(0,t.jsx)(f.Eye,{className:"h-4 w-4"})})}],X=(0,n.useReactTable)({data:I,columns:K,getCoreRowModel:(0,s.getCoreRowModel)(),getSortedRowModel:(0,s.getSortedRowModel)(),onSortingChange:O,state:{sorting:L}}),J=Math.ceil(R/25);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(u.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:(0,t.jsx)(u.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-64",children:[(0,t.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"Search by ID, email, user, or notes...",value:Y,onChange:e=>H(e.target.value),onKeyDown:e=>"Enter"===e.key&&Q(),className:"pl-10 bg-background"})]}),(0,t.jsxs)(c.Select,{value:U,onValueChange:B,children:[(0,t.jsx)(c.SelectTrigger,{className:"w-48 bg-background",children:(0,t.jsx)(c.SelectValue,{placeholder:"Entity Type"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"All entities"}),C.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(c.Select,{value:V,onValueChange:q,children:[(0,t.jsx)(c.SelectTrigger,{className:"w-36 bg-background",children:(0,t.jsx)(c.SelectValue,{placeholder:"Action"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"all",children:"All actions"}),D.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(o.Button,{onClick:Q,disabled:k,children:[k?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(p.Search,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"ml-2",children:"Search"})]}),(0,t.jsx)(o.Button,{variant:"outline",size:"icon",onClick:G,disabled:k,children:(0,t.jsx)(b.RefreshCw,{className:(0,F.cn)("h-4 w-4",k&&"animate-spin")})})]})})}),(0,t.jsxs)(u.Card,{className:"border-border/50",children:[(0,t.jsx)("div",{className:"rounded-md",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:X.getHeaderGroups().map(e=>(0,t.jsx)(a.TableRow,{className:"hover:bg-transparent",children:e.headers.map(e=>(0,t.jsx)(a.TableHead,{className:"bg-muted/50",children:e.isPlaceholder?null:(0,n.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(a.TableBody,{children:k?(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:K.length,className:"h-32 text-center",children:(0,t.jsx)(y.Loader2,{className:"mx-auto h-6 w-6 animate-spin text-muted-foreground"})})}):X.getRowModel().rows?.length?X.getRowModel().rows.map(e=>(0,t.jsx)(a.TableRow,{className:"cursor-pointer transition-colors hover:bg-muted/50",onClick:()=>_(e.original),children:e.getVisibleCells().map(e=>(0,t.jsx)(a.TableCell,{children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:K.length,className:"h-32 text-center text-muted-foreground",children:"No audit records found."})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t bg-muted/30",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:R>0?(0,t.jsxs)(t.Fragment,{children:["Showing ",($-1)*25+1,"-",Math.min(25*$,R)," of ",R]}):"No results"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===$||k,children:(0,t.jsx)(g.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm font-medium px-2",children:[$," / ",J||1]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>W(e=>Math.min(J,e+1)),disabled:$>=J||k,children:(0,t.jsx)(j.ChevronRight,{className:"h-4 w-4"})})]})]})]}),(0,t.jsx)(d.Sheet,{open:!!z,onOpenChange:e=>!e&&_(null),children:(0,t.jsx)(d.SheetContent,{className:"w-full sm:max-w-xl overflow-y-auto",children:z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.SheetHeader,{children:[(0,t.jsxs)(d.SheetTitle,{className:"flex items-center gap-3",children:[(0,t.jsx)(l.Badge,{variant:"outline",className:(0,F.cn)("font-medium",T[z.action]),children:z.action}),z.entityType]}),(0,t.jsx)(d.SheetDescription,{children:(0,w.formatDistanceToNow)(new Date(z.timestamp),{addSuffix:!0})})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Entity ID"}),(0,t.jsx)("div",{className:"font-mono text-sm break-all bg-muted/50 p-2 rounded",children:z.entityId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Timestamp"}),(0,t.jsx)("div",{className:"text-sm",children:(0,N.format)(new Date(z.timestamp),"PPpp")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"User"}),(0,t.jsx)("div",{className:"text-sm",children:z.userName||"Unknown"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:z.userEmail})]}),z.ipAddress&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"IP Address"}),(0,t.jsx)("div",{className:"font-mono text-sm",children:z.ipAddress})]})]}),z.reason&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Reason / Notes"}),(0,t.jsx)("div",{className:"bg-muted/50 p-3 rounded text-sm",children:z.reason})]}),(0,t.jsx)(h.Separator,{}),z.previousValues&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Previous Values"}),(0,t.jsx)(m.ScrollArea,{className:"h-40 rounded border bg-zinc-950",children:(0,t.jsx)("pre",{className:"p-3 text-xs text-zinc-100",children:JSON.stringify(z.previousValues,null,2)})})]}),z.newValues&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"New Values"}),(0,t.jsx)(m.ScrollArea,{className:"h-40 rounded border bg-zinc-950",children:(0,t.jsx)("pre",{className:"p-3 text-xs text-zinc-100",children:JSON.stringify(z.newValues,null,2)})})]})]})]})})})]})};e.s(["AuditTrailViewer",()=>M],570857)},465253,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(152990),s=e.i(682830),a=e.i(784774),i=e.i(793479),o=e.i(519455),l=e.i(755146),c=e.i(487486),d=e.i(541071),u=e.i(899602),m=e.i(688511),h=e.i(727612),x=e.i(522016),p=e.i(618566),f=e.i(846696),g=e.i(95187);let j=(0,g.createServerReference)("60d461cd45231654778902549efec93dbc25a5862c",g.callServer,void 0,g.findSourceMapURL,"archiveAccount"),b=({accounts:e,agencyId:g})=>{let b=(0,p.useRouter)(),[v,y]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),C=[{accessorKey:"code",header:({column:e})=>(0,t.jsxs)(o.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Code",(0,t.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>{let r=e.original.level,n="  ".repeat(r);return(0,t.jsxs)("div",{className:"font-mono",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:n}),e.getValue("code")]})}},{accessorKey:"name",header:"Account Name",cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.getValue("name")}),e.original.isSystemAccount&&(0,t.jsx)(c.Badge,{variant:"secondary",className:"text-xs",children:"System"})]})},{accessorKey:"category",header:"Category",cell:({row:e})=>{let r=e.getValue("category");return(0,t.jsx)(c.Badge,{variant:"outline",children:r})}},{accessorKey:"accountType",header:"Type",cell:({row:e})=>{let r=e.getValue("accountType");return(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:r.replace(/_/g," ")})}},{accessorKey:"isActive",header:"Status",cell:({row:e})=>{let r=e.getValue("isActive");return(0,t.jsx)(c.Badge,{variant:r?"default":"secondary",children:r?"Active":"Inactive"})}},{id:"actions",cell:({row:e})=>{let r=e.original,n=!r.isSystemAccount;return(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(d.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(l.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(l.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(x.default,{href:`/agency/${g}/fi/general-ledger/chart-of-accounts/${r.id}`,children:[(0,t.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"View Details"]})}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.DropdownMenuSeparator,{}),(0,t.jsxs)(l.DropdownMenuItem,{className:"text-destructive",onClick:async()=>{if(confirm("Are you sure you want to archive this account? This action cannot be undone if the account has transactions.")){let e=await j(r.id,"Archived by user");e.success?(f.toast.success("Account archived"),b.refresh()):f.toast.error(e.error??"Failed to archive account")}},children:[(0,t.jsx)(h.Trash2,{className:"mr-2 h-4 w-4"}),"Archive"]})]})]})]})}}],S=(0,n.useReactTable)({data:e,columns:C,getCoreRowModel:(0,s.getCoreRowModel)(),getSortedRowModel:(0,s.getSortedRowModel)(),getFilteredRowModel:(0,s.getFilteredRowModel)(),onSortingChange:y,onColumnFiltersChange:N,state:{sorting:v,columnFilters:w}});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(i.Input,{placeholder:"Filter by code or name...",value:S.getColumn("code")?.getFilterValue()??"",onChange:e=>S.getColumn("code")?.setFilterValue(e.target.value),className:"max-w-sm"})}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:S.getHeaderGroups().map(e=>(0,t.jsx)(a.TableRow,{children:e.headers.map(e=>(0,t.jsx)(a.TableHead,{children:e.isPlaceholder?null:(0,n.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(a.TableBody,{children:S.getRowModel().rows?.length?S.getRowModel().rows.map(e=>(0,t.jsx)(a.TableRow,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(a.TableCell,{children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:C.length,className:"h-24 text-center",children:"No accounts found."})})})]})})]})};e.s(["ChartOfAccountsTable",()=>b],465253)},431343,e=>{"use strict";let t=(0,e.i(475254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>t],431343)},294918,e=>{"use strict";let t=(0,e.i(475254).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);e.s(["FileSpreadsheet",()=>t],294918)},927429,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(152990),s=e.i(682830),a=e.i(784774),i=e.i(793479),o=e.i(519455),l=e.i(487486),c=e.i(515288),d=e.i(980376),u=e.i(903133),m=e.i(967489),h=e.i(624687),x=e.i(755146),p=e.i(868499),f=e.i(107233),g=e.i(541071),j=e.i(286536),b=e.i(269638),v=e.i(431343),y=e.i(852008),w=e.i(531278),N=e.i(294918),C=e.i(607486),S=e.i(158524),F=e.i(846696),T=e.i(618566),D=e.i(653145),M=e.i(994814),k=e.i(681307),A=e.i(945919),I=e.i(95187);let P=(0,I.createServerReference)("4021556c29f8593c8b75447c9af1abcbe108470c15",I.callServer,void 0,I.findSourceMapURL,"createConsolidationSnapshot"),R=(0,I.createServerReference)("40ff69c2b7071d42a0ac39643163f8e24c7910106e",I.callServer,void 0,I.findSourceMapURL,"finalizeConsolidation"),E=(0,I.createServerReference)("40502f5db05f8ea11eb3073d476edcbc4c686157f2",I.callServer,void 0,I.findSourceMapURL,"detectIntercompanyTransactions");var L=e.i(975157);let O={DRAFT:"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",IN_PROGRESS:"bg-amber-500/10 text-amber-600 border-amber-500/20",COMPLETED:"bg-blue-500/10 text-blue-600 border-blue-500/20",APPROVED:"bg-green-500/10 text-green-600 border-green-500/20"},z=[{value:"FULL",label:"Full Consolidation (100%)"},{value:"PROPORTIONAL",label:"Proportional Consolidation"},{value:"EQUITY",label:"Equity Method"}],_=k.z.object({name:k.z.string().min(1,"Name is required").max(100),description:k.z.string().max(500).optional(),periodId:k.z.string().min(1,"Period is required"),consolidationMethod:k.z.enum(["FULL","PROPORTIONAL","EQUITY"])});function Y({snapshots:e,periods:k,agencyId:I,canManage:Y}){let H=(0,T.useRouter)(),[U,B]=(0,r.useTransition)(),[V,q]=(0,r.useState)(!1),[$,W]=(0,r.useState)(null),[G,Q]=(0,r.useState)(!1),K=(0,D.useForm)({resolver:(0,M.zodResolver)(_),defaultValues:{name:"",description:"",periodId:"",consolidationMethod:"FULL"}}),X=[{accessorKey:"snapshotNumber",header:"Snapshot",cell:({row:e})=>(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("div",{className:"font-mono font-medium",children:e.original.snapshotNumber}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.original.name})]})},{accessorKey:"Period",header:"Period",cell:({row:e})=>(0,t.jsx)(l.Badge,{variant:"outline",children:e.original.Period.name})},{accessorKey:"consolidationMethod",header:"Method",cell:({row:e})=>(0,t.jsx)("span",{className:"text-sm",children:e.original.consolidationMethod})},{id:"counts",header:"Details",cell:({row:e})=>(0,t.jsxs)("div",{className:"flex gap-3 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[e.original._count.WorksheetLines," lines"]}),(0,t.jsxs)("span",{children:[e.original._count.Adjustments," adj"]}),(0,t.jsxs)("span",{children:[e.original._count.Eliminations," elim"]})]})},{accessorKey:"status",header:"Status",cell:({row:e})=>(0,t.jsx)(l.Badge,{variant:"outline",className:(0,L.cn)("font-medium",O[e.original.status]),children:e.original.status.replace(/_/g," ")})},{accessorKey:"createdAt",header:"Created",cell:({row:e})=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,A.format)(new Date(e.original.createdAt),"MMM d, yyyy")})},{id:"actions",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)(x.DropdownMenu,{children:[(0,t.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(g.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(x.DropdownMenuItem,{onClick:()=>H.push(`/agency/${I}/fi/general-ledger/consolidation/${r.id}`),children:[(0,t.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsxs)(x.DropdownMenuItem,{onClick:()=>{B(async()=>{let e=await E(r.id);e.success?(F.toast.success(`Detected ${e.data?.detected??0} intercompany transactions`),H.refresh()):F.toast.error(e.error??"Failed to detect IC transactions")})},disabled:"APPROVED"===r.status,children:[(0,t.jsx)(S.Link2,{className:"mr-2 h-4 w-4"}),"Detect IC Transactions"]}),Y&&"APPROVED"!==r.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.DropdownMenuSeparator,{}),(0,t.jsxs)(x.DropdownMenuItem,{onClick:()=>{W(r),Q(!0)},children:[(0,t.jsx)(b.CheckCircle,{className:"mr-2 h-4 w-4"}),"Finalize"]})]})]})]})}}],J=(0,n.useReactTable)({data:e,columns:X,getCoreRowModel:(0,s.getCoreRowModel)()});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium",children:"Total Snapshots"}),(0,t.jsx)(N.FileSpreadsheet,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length})})]}),(0,t.jsxs)(c.Card,{className:"border-green-500/20 bg-green-500/5",children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium",children:"Approved"}),(0,t.jsx)(b.CheckCircle,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"APPROVED"===e.status).length})})]}),(0,t.jsxs)(c.Card,{className:"border-amber-500/20 bg-amber-500/5",children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,t.jsx)(v.Play,{className:"h-4 w-4 text-amber-500"})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:e.filter(e=>"IN_PROGRESS"===e.status||"DRAFT"===e.status).length})})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.CardTitle,{className:"text-sm font-medium",children:"Open Periods"}),(0,t.jsx)(C.Building2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:k.length})})]})]}),(0,t.jsxs)(c.Card,{className:"border-border/50",children:[(0,t.jsx)(c.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(y.Layers,{className:"h-5 w-5"}),"Consolidation Snapshots"]}),(0,t.jsx)(c.CardDescription,{children:"Multi-entity financial consolidation with eliminations"})]}),Y&&(0,t.jsxs)(o.Button,{onClick:()=>{K.reset({name:`Consolidation ${(0,A.format)(new Date,"MMM yyyy")}`,description:"",periodId:"",consolidationMethod:"FULL"}),q(!0)},children:[(0,t.jsx)(f.Plus,{className:"mr-2 h-4 w-4"}),"New Consolidation"]})]})}),(0,t.jsx)(c.CardContent,{className:"p-0",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:J.getHeaderGroups().map(e=>(0,t.jsx)(a.TableRow,{className:"hover:bg-transparent",children:e.headers.map(e=>(0,t.jsx)(a.TableHead,{className:"bg-muted/50",children:e.isPlaceholder?null:(0,n.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(a.TableBody,{children:J.getRowModel().rows?.length?J.getRowModel().rows.map(e=>(0,t.jsx)(a.TableRow,{children:e.getVisibleCells().map(e=>(0,t.jsx)(a.TableCell,{children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:X.length,className:"h-32 text-center text-muted-foreground",children:"No consolidation snapshots yet."})})})]})})]}),(0,t.jsx)(d.Sheet,{open:V,onOpenChange:q,children:(0,t.jsxs)(d.SheetContent,{className:"w-full sm:max-w-md overflow-y-auto",children:[(0,t.jsxs)(d.SheetHeader,{children:[(0,t.jsx)(d.SheetTitle,{children:"New Consolidation"}),(0,t.jsx)(d.SheetDescription,{children:"Create a consolidation snapshot to combine entity financials"})]}),(0,t.jsx)(u.Form,{...K,children:(0,t.jsxs)("form",{onSubmit:K.handleSubmit(e=>{B(async()=>{let t=await P({name:e.name,description:e.description,periodId:e.periodId,consolidationMethod:e.consolidationMethod,subAccountIds:[]});t.success?(F.toast.success("Consolidation snapshot created"),q(!1),H.refresh()):F.toast.error(t.error??"Failed to create snapshot")})}),className:"mt-6 space-y-4",children:[(0,t.jsx)(u.FormField,{control:K.control,name:"name",render:({field:e})=>(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"Name"}),(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(i.Input,{...e,placeholder:"Q4 2025 Consolidation"})}),(0,t.jsx)(u.FormMessage,{})]})}),(0,t.jsx)(u.FormField,{control:K.control,name:"periodId",render:({field:e})=>(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"Period"}),(0,t.jsxs)(m.Select,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{placeholder:"Select period"})})}),(0,t.jsx)(m.SelectContent,{children:k.map(e=>(0,t.jsx)(m.SelectItem,{value:e.id,children:e.name},e.id))})]}),(0,t.jsx)(u.FormMessage,{})]})}),(0,t.jsx)(u.FormField,{control:K.control,name:"consolidationMethod",render:({field:e})=>(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"Consolidation Method"}),(0,t.jsxs)(m.Select,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{})})}),(0,t.jsx)(m.SelectContent,{children:z.map(e=>(0,t.jsx)(m.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)(u.FormDescription,{children:"How to combine subsidiary financials"}),(0,t.jsx)(u.FormMessage,{})]})}),(0,t.jsx)(u.FormField,{control:K.control,name:"description",render:({field:e})=>(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"Description"}),(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(h.Textarea,{...e,placeholder:"Optional notes...",rows:2})}),(0,t.jsx)(u.FormMessage,{})]})}),(0,t.jsx)(d.SheetFooter,{className:"pt-4",children:(0,t.jsxs)(o.Button,{type:"submit",className:"w-full",disabled:U,children:[U&&(0,t.jsx)(w.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Consolidation"]})})]})})]})}),(0,t.jsx)(p.AlertDialog,{open:G,onOpenChange:Q,children:(0,t.jsxs)(p.AlertDialogContent,{children:[(0,t.jsxs)(p.AlertDialogHeader,{children:[(0,t.jsx)(p.AlertDialogTitle,{children:"Finalize Consolidation"}),(0,t.jsx)(p.AlertDialogDescription,{children:$&&`Finalizing "${$.name}" will lock all adjustments and eliminations. This action cannot be undone.`})]}),(0,t.jsxs)(p.AlertDialogFooter,{children:[(0,t.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,t.jsxs)(p.AlertDialogAction,{onClick:()=>{$&&B(async()=>{let e=await R($.id);e.success?(F.toast.success("Consolidation finalized"),Q(!1),H.refresh()):F.toast.error(e.error??"Failed to finalize")})},disabled:U,children:[U&&(0,t.jsx)(w.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Finalize"]})]})]})})]})}e.s(["ConsolidationDashboard",()=>Y],927429)},931178,e=>{"use strict";var t,r,n="0123456789abcdef",s="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",a="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",i={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Precision limit exceeded",u=l+"crypto unavailable",m="[object Decimal]",h=Math.floor,x=Math.pow,p=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,f=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,g=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,j=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,b=s.length-1,v=a.length-1,y={toStringTag:m};function w(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)(r=7-(n=e[t]+"").length)&&(a+=P(r)),a+=n;(r=7-(n=(i=e[t])+"").length)&&(a+=P(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return a+i}function N(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function C(e,t,r,n){var s,a,i,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,s=0):(s=Math.ceil((t+1)/7),t%=7),a=x(10,7-t),o=e[s]%a|0,null==n?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),i=r<4&&99999==o||r>3&&49999==o||5e4==o||0==o):i=(r<4&&o+1==a||r>3&&o+1==a/2)&&(e[s+1]/a/100|0)==x(10,t-2)-1||(o==a/2||0==o)&&(e[s+1]/a/100|0)==0:t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),i=(n||r<4)&&9999==o||!n&&r>3&&4999==o):i=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(e[s+1]/a/1e3|0)==x(10,t-3)-1,i}function S(e,t,r){for(var s,a,i=[0],o=0,l=e.length;o<l;){for(a=i.length;a--;)i[a]*=t;for(i[0]+=n.indexOf(e.charAt(o++)),s=0;s<i.length;s++)i[s]>r-1&&(void 0===i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/r|0,i[s]%=r)}return i.reverse()}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),T(e)},y.ceil=function(){return T(new this.constructor(this),this.e+1,2)},y.clampedTo=y.clamp=function(e,t){var r=this.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(c+t);return 0>this.cmp(e)?e:this.cmp(t)>0?t:new r(this)},y.comparedTo=y.cmp=function(e){var t,r,n,s,a=this.d,i=(e=new this.constructor(e)).d,o=this.s,l=e.s;if(!a||!i)return o&&l?o!==l?o:a===i?0:!a^o<0?1:-1:NaN;if(!a[0]||!i[0])return a[0]?o:i[0]?-l:0;if(o!==l)return o;if(this.e!==e.e)return this.e>e.e^o<0?1:-1;for(t=0,r=(n=a.length)<(s=i.length)?n:s;t<r;++t)if(a[t]!==i[t])return a[t]>i[t]^o<0?1:-1;return n===s?0:n>s^o<0?1:-1},y.cosine=y.cos=function(){var e,t,n=this,s=n.constructor;return n.d?n.d[0]?(e=s.precision,t=s.rounding,s.precision=e+Math.max(n.e,n.sd())+7,s.rounding=1,n=function(e,t){var r,n,s;if(t.isZero())return t;(n=t.d.length)<32?s=(1/U(4,r=Math.ceil(n/3))).toString():(r=16,s="2.3283064365386962890625e-10"),e.precision+=r,t=H(e,1,t.times(s),new e(1));for(var a=r;a--;){var i=t.times(t);t=i.times(i).minus(i).times(8).plus(1)}return e.precision-=r,t}(s,B(s,n)),s.precision=e,s.rounding=t,T(2==r||3==r?n.neg():n,e,t,!0)):new s(1):new s(NaN)},y.cubeRoot=y.cbrt=function(){var e,t,r,n,s,a,i,l,c,d,u=this.constructor;if(!this.isFinite()||this.isZero())return new u(this);for(o=!1,(a=this.s*x(this.s*this,1/3))&&Math.abs(a)!=1/0?n=new u(a.toString()):(r=w(this.d),(a=((e=this.e)-r.length+1)%3)&&(r+=1==a||-2==a?"0":"00"),a=x(r,1/3),e=h((e+1)/3)-(e%3==(e<0?-1:2)),(n=new u(r=a==1/0?"5e"+e:(r=a.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=this.s),i=(e=u.precision)+3;;)if(n=F((d=(c=(l=n).times(l).times(l)).plus(this)).plus(this).times(l),d.plus(c),i+2,1),w(l.d).slice(0,i)===(r=w(n.d)).slice(0,i)){if("9999"!=(r=r.slice(i-3,i+1))&&(s||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(T(n,e+1,1),t=!n.times(n).times(n).eq(this));break}if(!s&&(T(l,e+1,0),l.times(l).times(l).eq(this))){n=l;break}i+=4,s=1}return o=!0,T(n,e,u.rounding,t)},y.decimalPlaces=y.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-h(this.e/7))*7,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},y.dividedBy=y.div=function(e){return F(this,new this.constructor(e))},y.dividedToIntegerBy=y.divToInt=function(e){var t=this.constructor;return T(F(this,new t(e),0,1,1),t.precision,t.rounding)},y.equals=y.eq=function(e){return 0===this.cmp(e)},y.floor=function(){return T(new this.constructor(this),this.e+1,3)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){var t=this.cmp(e);return 1==t||0===t},y.hyperbolicCosine=y.cosh=function(){var e,t,r,n,s,a=this,i=a.constructor,o=new i(1);if(!a.isFinite())return new i(a.s?1/0:NaN);if(a.isZero())return o;r=i.precision,n=i.rounding,i.precision=r+Math.max(a.e,a.sd())+4,i.rounding=1,(s=a.d.length)<32?t=(1/U(4,e=Math.ceil(s/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=H(i,1,a.times(t),new i(1),!0);for(var l,c=e,d=new i(8);c--;)l=a.times(a),a=o.minus(l.times(d.minus(l.times(d))));return T(a,i.precision=r,i.rounding=n,!0)},y.hyperbolicSine=y.sinh=function(){var e,t,r,n,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,(n=s.d.length)<3)s=H(a,2,s,s,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,s=H(a,2,s=s.times(1/U(5,e)),s,!0);for(var i,o=new a(5),l=new a(16),c=new a(20);e--;)i=s.times(s),s=s.times(o.plus(i.times(l.times(i).plus(c))))}return a.precision=t,a.rounding=r,T(s,t,r,!0)},y.hyperbolicTangent=y.tanh=function(){var e,t,r=this.constructor;return this.isFinite()?this.isZero()?new r(this):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,F(this.sinh(),this.cosh(),r.precision=e,r.rounding=t)):new r(this.s)},y.inverseCosine=y.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,s=t.rounding;return -1!==r?0===r?e.isNeg()?A(t,n,s):new t(0):new t(NaN):e.isZero()?A(t,n+4,s).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=s,e.times(2))},y.inverseHyperbolicCosine=y.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,o=!1,r=r.times(r).minus(1).sqrt().plus(r),o=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},y.inverseHyperbolicSine=y.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,o=!1,r=r.times(r).plus(1).sqrt().plus(r),o=!0,n.precision=e,n.rounding=t,r.ln())},y.inverseHyperbolicTangent=y.atanh=function(){var e,t,r,n,s=this,a=s.constructor;return s.isFinite()?s.e>=0?new a(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=a.precision,t=a.rounding,Math.max(n=s.sd(),e)<-(2*s.e)-1)?T(new a(s),e,t,!0):(a.precision=r=n-s.e,s=F(s.plus(1),new a(1).minus(s),r+e,1),a.precision=e+4,a.rounding=1,s=s.ln(),a.precision=e,a.rounding=t,s.times(.5)):new a(NaN)},y.inverseSine=y.asin=function(){var e,t,r,n,s=this,a=s.constructor;return s.isZero()?new a(s):(t=s.abs().cmp(1),r=a.precision,n=a.rounding,-1!==t)?0===t?((e=A(a,r+4,n).times(.5)).s=s.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,s=s.div(new a(1).minus(s.times(s)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,s.times(2))},y.inverseTangent=y.atan=function(){var e,t,r,n,s,a,i,l,c,d=this,u=d.constructor,m=u.precision,h=u.rounding;if(d.isFinite()){if(d.isZero())return new u(d);else if(d.abs().eq(1)&&m+4<=v)return(i=A(u,m+4,h).times(.25)).s=d.s,i}else{if(!d.s)return new u(NaN);if(m+4<=v)return(i=A(u,m+4,h).times(.5)).s=d.s,i}for(u.precision=l=m+10,u.rounding=1,e=r=Math.min(28,l/7+2|0);e;--e)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(o=!1,t=Math.ceil(l/7),n=1,c=d.times(d),i=new u(d),s=d;-1!==e;)if(s=s.times(c),a=i.minus(s.div(n+=2)),s=s.times(c),void 0!==(i=a.plus(s.div(n+=2))).d[t])for(e=t;i.d[e]===a.d[e]&&e--;);return r&&(i=i.times(2<<r-1)),o=!0,T(i,u.precision=m,u.rounding=h,!0)},y.isFinite=function(){return!!this.d},y.isInteger=y.isInt=function(){return!!this.d&&h(this.e/7)>this.d.length-2},y.isNaN=function(){return!this.s},y.isNegative=y.isNeg=function(){return this.s<0},y.isPositive=y.isPos=function(){return this.s>0},y.isZero=function(){return!!this.d&&0===this.d[0]},y.lessThan=y.lt=function(e){return 0>this.cmp(e)},y.lessThanOrEqualTo=y.lte=function(e){return 1>this.cmp(e)},y.logarithm=y.log=function(e){var t,r,n,s,a,i,l,c=this.constructor,d=c.precision,u=c.rounding;if(null==e)e=new c(10),t=!0;else{if(r=(e=new c(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new c(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10==0;)n/=10;s=1!==n}if(o=!1,C((l=F(a=z(this,i=d+5),t?k(c,i+10):z(e,i),i,1)).d,n=d,u))do if(i+=10,l=F(a=z(this,i),t?k(c,i+10):z(e,i),i,1),!s){+w(l.d).slice(n+1,n+15)+1==1e14&&(l=T(l,d+1,0));break}while(C(l.d,n+=10,u))return o=!0,T(l,d,u)},y.minus=y.sub=function(e){var t,r,n,s,a,i,l,c,d,u,m,x,p=this.constructor;if(e=new p(e),!this.d||!e.d)return this.s&&e.s?this.d?e.s=-e.s:e=new p(e.d||this.s!==e.s?this:NaN):e=new p(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.plus(e);if(d=this.d,x=e.d,l=p.precision,c=p.rounding,!d[0]||!x[0]){if(x[0])e.s=-e.s;else{if(!d[0])return new p(3===c?-0:0);e=new p(this)}return o?T(e,l,c):e}if(r=h(e.e/7),u=h(this.e/7),d=d.slice(),a=u-r){for((m=a<0)?(t=d,a=-a,i=x.length):(t=x,r=u,i=d.length),a>(n=Math.max(Math.ceil(l/7),i)+2)&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for((m=(n=d.length)<(i=x.length))&&(i=n),n=0;n<i;n++)if(d[n]!=x[n]){m=d[n]<x[n];break}a=0}for(m&&(t=d,d=x,x=t,e.s=-e.s),i=d.length,n=x.length-i;n>0;--n)d[i++]=0;for(n=x.length;n>a;){if(d[--n]<x[n]){for(s=n;s&&0===d[--s];)d[s]=1e7-1;--d[s],d[n]+=1e7}d[n]-=x[n]}for(;0===d[--i];)d.pop();for(;0===d[0];d.shift())--r;return d[0]?(e.d=d,e.e=M(d,r),o?T(e,l,c):e):new p(3===c?-0:0)},y.modulo=y.mod=function(e){var t,r=this.constructor;return(e=new r(e),this.d&&e.s&&(!e.d||e.d[0]))?e.d&&(!this.d||this.d[0])?(o=!1,9==r.modulo?(t=F(this,e.abs(),0,3,1),t.s*=e.s):t=F(this,e,0,r.modulo,1),t=t.times(e),o=!0,this.minus(t)):T(new r(this),r.precision,r.rounding):new r(NaN)},y.naturalExponential=y.exp=function(){return O(this)},y.naturalLogarithm=y.ln=function(){return z(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,T(e)},y.plus=y.add=function(e){var t,r,n,s,a,i,l,c,d,u,m=this.constructor;if(e=new m(e),!this.d||!e.d)return this.s&&e.s?this.d||(e=new m(e.d||this.s===e.s?this:NaN)):e=new m(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.minus(e);if(d=this.d,u=e.d,l=m.precision,c=m.rounding,!d[0]||!u[0])return u[0]||(e=new m(this)),o?T(e,l,c):e;if(a=h(this.e/7),n=h(e.e/7),d=d.slice(),s=a-n){for(s<0?(r=d,s=-s,i=u.length):(r=u,n=a,i=d.length),s>(i=(a=Math.ceil(l/7))>i?a+1:i+1)&&(s=i,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((i=d.length)-(s=u.length)<0&&(s=i,r=u,u=d,d=r),t=0;s;)t=(d[--s]=d[s]+u[s]+t)/1e7|0,d[s]%=1e7;for(t&&(d.unshift(t),++n),i=d.length;0==d[--i];)d.pop();return e.d=d,e.e=M(d,n),o?T(e,l,c):e},y.precision=y.sd=function(e){var t;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(c+e);return this.d?(t=I(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},y.round=function(){var e=this.constructor;return T(new e(this),this.e+1,e.rounding)},y.sine=y.sin=function(){var e,t,n=this,s=n.constructor;return n.isFinite()?n.isZero()?new s(n):(e=s.precision,t=s.rounding,s.precision=e+Math.max(n.e,n.sd())+7,s.rounding=1,n=function(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:H(e,2,t,t);r=(r=1.4*Math.sqrt(n))>16?16:0|r,t=H(e,2,t=t.times(1/U(5,r)),t);for(var s,a=new e(5),i=new e(16),o=new e(20);r--;)s=t.times(t),t=t.times(a.plus(s.times(i.times(s).minus(o))));return t}(s,B(s,n)),s.precision=e,s.rounding=t,T(r>2?n.neg():n,e,t,!0)):new s(NaN)},y.squareRoot=y.sqrt=function(){var e,t,r,n,s,a,i=this.d,l=this.e,c=this.s,d=this.constructor;if(1!==c||!i||!i[0])return new d(!c||c<0&&(!i||i[0])?NaN:i?this:1/0);for(o=!1,0==(c=Math.sqrt(+this))||c==1/0?(((t=w(i)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=h((l+1)/2)-(l<0||l%2),n=new d(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new d(c.toString()),r=(l=d.precision)+3;;)if(n=(a=n).plus(F(this,a,r+2,1)).times(.5),w(a.d).slice(0,r)===(t=w(n.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(T(n,l+1,1),e=!n.times(n).eq(this));break}if(!s&&(T(a,l+1,0),a.times(a).eq(this))){n=a;break}r+=4,s=1}return o=!0,T(n,l,d.rounding,e)},y.tangent=y.tan=function(){var e,t,n=this,s=n.constructor;return n.isFinite()?n.isZero()?new s(n):(e=s.precision,t=s.rounding,s.precision=e+10,s.rounding=1,(n=n.sin()).s=1,n=F(n,new s(1).minus(n.times(n)).sqrt(),e+10,0),s.precision=e,s.rounding=t,T(2==r||4==r?n.neg():n,e,t,!0)):new s(NaN)},y.times=y.mul=function(e){var t,r,n,s,a,i,l,c,d,u=this.constructor,m=this.d,x=(e=new u(e)).d;if(e.s*=this.s,!m||!m[0]||!x||!x[0])return new u(!e.s||m&&!m[0]&&!x||x&&!x[0]&&!m?NaN:!m||!x?e.s/0:0*e.s);for(r=h(this.e/7)+h(e.e/7),(c=m.length)<(d=x.length)&&(a=m,m=x,x=a,i=c,c=d,d=i),a=[],n=i=c+d;n--;)a.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=a[s]+x[n]*m[s-n-1]+t,a[s--]=l%1e7|0,t=l/1e7|0;a[s]=(a[s]+t)%1e7|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=M(a,r),o?T(e,u.precision,u.rounding):e},y.toBinary=function(e,t){return V(this,2,e,t)},y.toDecimalPlaces=y.toDP=function(e,t){var r=this,n=r.constructor;return(r=new n(r),void 0===e)?r:(N(e,0,1e9),void 0===t?t=n.rounding:N(t,0,8),T(r,e+r.e+1,t))},y.toExponential=function(e,t){var r,n=this,s=n.constructor;return void 0===e?r=D(n,!0):(N(e,0,1e9),void 0===t?t=s.rounding:N(t,0,8),r=D(n=T(new s(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},y.toFixed=function(e,t){var r,n,s=this.constructor;return void 0===e?r=D(this):(N(e,0,1e9),void 0===t?t=s.rounding:N(t,0,8),r=D(n=T(new s(this),e+this.e+1,t),!1,e+n.e+1)),this.isNeg()&&!this.isZero()?"-"+r:r},y.toFraction=function(e){var t,r,n,s,a,i,l,d,u,m,h,p,f=this.d,g=this.constructor;if(!f)return new g(this);if(u=r=new g(1),n=d=new g(0),i=(a=(t=new g(n)).e=I(f)-this.e-1)%7,t.d[0]=x(10,i<0?7+i:i),null==e)e=a>0?t:u;else{if(!(l=new g(e)).isInt()||l.lt(u))throw Error(c+l);e=l.gt(t)?a>0?t:u:l}for(o=!1,l=new g(w(f)),m=g.precision,g.precision=a=7*f.length*2;h=F(l,t,0,1,1),1!=(s=r.plus(h.times(n))).cmp(e);)r=n,n=s,s=u,u=d.plus(h.times(s)),d=s,s=t,t=l.minus(h.times(s)),l=s;return s=F(e.minus(r),n,0,1,1),d=d.plus(s.times(u)),r=r.plus(s.times(n)),d.s=u.s=this.s,p=1>F(u,n,a,1).minus(this).abs().cmp(F(d,r,a,1).minus(this).abs())?[u,n]:[d,r],g.precision=m,o=!0,p},y.toHexadecimal=y.toHex=function(e,t){return V(this,16,e,t)},y.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:N(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(o=!1,r=F(r,e,0,t,1).times(e),o=!0,T(r)):(e.s=r.s,r=e),r},y.toNumber=function(){return+this},y.toOctal=function(e,t){return V(this,8,e,t)},y.toPower=y.pow=function(e){var t,r,n,s,a,i,l=this,c=l.constructor,d=+(e=new c(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new c(x(+l,d));if((l=new c(l)).eq(1))return l;if(n=c.precision,a=c.rounding,e.eq(1))return T(l,n,a);if((t=h(e.e/7))>=e.d.length-1&&(r=d<0?-d:d)<=0x1fffffffffffff)return s=R(c,l,r,n),e.s<0?new c(1).div(s):T(s,n,a);if((i=l.s)<0){if(t<e.d.length-1)return new c(NaN);if((1&e.d[t])==0&&(i=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=i,l}return(t=0!=(r=x(+l,d))&&isFinite(r)?new c(r+"").e:h(d*(Math.log("0."+w(l.d))/Math.LN10+l.e+1)))>c.maxE+1||t<c.minE-1?new c(t>0?i/0:0):(o=!1,c.rounding=l.s=1,r=Math.min(12,(t+"").length),(s=O(e.times(z(l,n+r)),n)).d&&C((s=T(s,n+5,1)).d,n,a)&&(t=n+10,+w((s=T(O(e.times(z(l,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(s=T(s,n+1,0))),s.s=i,o=!0,c.rounding=a,T(s,n,a))},y.toPrecision=function(e,t){var r,n=this,s=n.constructor;return void 0===e?r=D(n,n.e<=s.toExpNeg||n.e>=s.toExpPos):(N(e,1,1e9),void 0===t?t=s.rounding:N(t,0,8),r=D(n=T(new s(n),e,t),e<=n.e||n.e<=s.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},y.toSignificantDigits=y.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(N(e,1,1e9),void 0===t?t=r.rounding:N(t,0,8)),T(new r(this),e,t)},y.toString=function(){var e=this.constructor,t=D(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()&&!this.isZero()?"-"+t:t},y.truncated=y.trunc=function(){return T(new this.constructor(this),this.e+1,1)},y.valueOf=y.toJSON=function(){var e=this.constructor,t=D(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()?"-"+t:t};var F=function(){function e(e,t,r){var n,s=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+s,e[a]=n%r|0,s=n/r|0;return s&&e.unshift(s),e}function r(e,t,r,n){var s,a;if(r!=n)a=r>n?1:-1;else for(s=a=0;s<r;s++)if(e[s]!=t[s]){a=e[s]>t[s]?1:-1;break}return a}function n(e,t,r,n){for(var s=0;r--;)e[r]-=s,s=+(e[r]<t[r]),e[r]=s*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(s,a,i,o,l,c){var d,u,m,x,p,f,g,j,b,v,y,w,N,C,S,F,D,M,k,A,I=s.constructor,P=s.s==a.s?1:-1,R=s.d,E=a.d;if(!R||!R[0]||!E||!E[0])return new I(!s.s||!a.s||(R?E&&R[0]==E[0]:!E)?NaN:R&&0==R[0]||!E?0*P:P/0);for(c?(p=1,u=s.e-a.e):(c=1e7,p=7,u=h(s.e/p)-h(a.e/p)),k=E.length,D=R.length,v=(b=new I(P)).d=[],m=0;E[m]==(R[m]||0);m++);if(E[m]>(R[m]||0)&&u--,null==i?(C=i=I.precision,o=I.rounding):C=l?i+(s.e-a.e)+1:i,C<0)v.push(1),f=!0;else{if(C=C/p+2|0,m=0,1==k){for(x=0,E=E[0],C++;(m<D||x)&&C--;m++)S=x*c+(R[m]||0),v[m]=S/E|0,x=S%E|0;f=x||m<D}else{for((x=c/(E[0]+1)|0)>1&&(E=e(E,x,c),R=e(R,x,c),k=E.length,D=R.length),F=k,w=(y=R.slice(0,k)).length;w<k;)y[w++]=0;(A=E.slice()).unshift(0),M=E[0],E[1]>=c/2&&++M;do x=0,(d=r(E,y,k,w))<0?(N=y[0],k!=w&&(N=N*c+(y[1]||0)),(x=N/M|0)>1?(x>=c&&(x=c-1),j=(g=e(E,x,c)).length,w=y.length,1==(d=r(g,y,j,w))&&(x--,n(g,k<j?A:E,j,c))):(0==x&&(d=x=1),g=E.slice()),(j=g.length)<w&&g.unshift(0),n(y,g,w,c),-1==d&&(w=y.length,(d=r(E,y,k,w))<1&&(x++,n(y,k<w?A:E,w,c))),w=y.length):0===d&&(x++,y=[0]),v[m++]=x,d&&y[0]?y[w++]=R[F]||0:(y=[R[F]],w=1);while((F++<D||void 0!==y[0])&&C--)f=void 0!==y[0]}v[0]||v.shift()}if(1==p)b.e=u,t=f;else{for(m=1,x=v[0];x>=10;x/=10)m++;b.e=m+u*p-1,T(b,l?i+b.e+1:i,o,f)}return b}}();function T(e,t,r,n){var s,a,i,l,c,d,u,m,h,p=e.constructor;e:if(null!=t){if(!(m=e.d))return e;for(s=1,l=m[0];l>=10;l/=10)s++;if((a=t-s)<0)a+=7,i=t,c=(u=m[h=0])/x(10,s-i-1)%10|0;else if((h=Math.ceil((a+1)/7))>=(l=m.length))if(n){for(;l++<=h;)m.push(0);u=c=0,s=1,a%=7,i=a-7+1}else break e;else{for(s=1,u=l=m[h];l>=10;l/=10)s++;a%=7,c=(i=a-7+s)<0?0:u/x(10,s-i-1)%10|0}if(n=n||t<0||void 0!==m[h+1]||(i<0?u:u%x(10,s-i-1)),d=r<4?(c||n)&&(0==r||r==(e.s<0?3:2)):c>5||5==c&&(4==r||n||6==r&&(a>0?i>0?u/x(10,s-i):0:m[h-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,d?(t-=e.e+1,m[0]=x(10,(7-t%7)%7),e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=h,l=1,h--):(m.length=h+1,l=x(10,7-a),m[h]=i>0?(u/x(10,s-i)%x(10,i)|0)*l:0),d)for(;;)if(0==h){for(a=1,i=m[0];i>=10;i/=10)a++;for(i=m[0]+=l,l=1;i>=10;i/=10)l++;a!=l&&(e.e++,1e7==m[0]&&(m[0]=1));break}else{if(m[h]+=l,1e7!=m[h])break;m[h--]=0,l=1}for(a=m.length;0===m[--a];)m.pop()}return o&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function D(e,t,r){if(!e.isFinite())return _(e);var n,s=e.e,a=w(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+P(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):s<0?(a="0."+P(-s-1)+a,r&&(n=r-i)>0&&(a+=P(n))):s>=i?(a+=P(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+P(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=P(n))),a}function M(e,t){var r=e[0];for(t*=7;r>=10;r/=10)t++;return t}function k(e,t,r){if(t>b)throw o=!0,r&&(e.precision=r),Error(d);return T(new e(s),t,1,!0)}function A(e,t,r){if(t>v)throw Error(d);return T(new e(a),t,r,!0)}function I(e){var t=e.length-1,r=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function P(e){for(var t="";e--;)t+="0";return t}function R(e,t,r,n){var s,a=new e(1),i=Math.ceil(n/7+4);for(o=!1;;){if(r%2&&q((a=a.times(t)).d,i)&&(s=!0),0===(r=h(r/2))){r=a.d.length-1,s&&0===a.d[r]&&++a.d[r];break}q((t=t.times(t)).d,i)}return o=!0,a}function E(e){return 1&e.d[e.d.length-1]}function L(e,t,r){for(var n,s,a=new e(t[0]),i=0;++i<t.length;){if(!(s=new e(t[i])).s){a=s;break}((n=a.cmp(s))===r||0===n&&a.s===r)&&(a=s)}return a}function O(e,t){var r,n,s,a,i,l,c,d=0,u=0,m=0,h=e.constructor,p=h.rounding,f=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?!e.d[0]?1:e.s<0?0:1/0:e.s?e.s<0?0:e:0/0);for(null==t?(o=!1,c=f):c=t,l=new h(.03125);e.e>-2;)e=e.times(l),m+=5;for(c+=n=Math.log(x(2,m))/Math.LN10*2+5|0,r=a=i=new h(1),h.precision=c;;){if(a=T(a.times(e),c,1),r=r.times(++u),w((l=i.plus(F(a,r,c,1))).d).slice(0,c)===w(i.d).slice(0,c)){for(s=m;s--;)i=T(i.times(i),c,1);if(null!=t)return h.precision=f,i;if(!(d<3&&C(i.d,c-n,p,d)))return T(i,h.precision=f,p,o=!0);h.precision=c+=10,r=a=l=new h(1),u=0,d++}i=l}}function z(e,t){var r,n,s,a,i,l,c,d,u,m,h,x=1,p=e,f=p.d,g=p.constructor,j=g.rounding,b=g.precision;if(p.s<0||!f||!f[0]||!p.e&&1==f[0]&&1==f.length)return new g(f&&!f[0]?-1/0:1!=p.s?NaN:f?0:p);if(null==t?(o=!1,u=b):u=t,g.precision=u+=10,n=(r=w(f)).charAt(0),!(15e14>Math.abs(a=p.e)))return d=k(g,u+2,b).times(a+""),p=z(new g(n+"."+r.slice(1)),u-10).plus(d),g.precision=b,null==t?T(p,b,j,o=!0):p;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=w((p=p.times(e)).d)).charAt(0),x++;for(a=p.e,n>1?(p=new g("0."+r),a++):p=new g(n+"."+r.slice(1)),m=p,c=i=p=F(p.minus(1),p.plus(1),u,1),h=T(p.times(p),u,1),s=3;;){if(i=T(i.times(h),u,1),w((d=c.plus(F(i,new g(s),u,1))).d).slice(0,u)===w(c.d).slice(0,u)){if(c=c.times(2),0!==a&&(c=c.plus(k(g,u+2,b).times(a+""))),c=F(c,new g(x),u,1),null!=t)return g.precision=b,c;if(!C(c.d,u-10,j,l))return T(c,g.precision=b,j,o=!0);g.precision=u+=10,d=i=p=F(m.minus(1),m.plus(1),u,1),h=T(p.times(p),u,1),s=l=1}c=d,s+=2}}function _(e){return String(e.s*e.s/0)}function Y(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(s=t.length;48===t.charCodeAt(s-1);--s);if(t=t.slice(n,s)){if(s-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%7,r<0&&(n+=7),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=7;n<s;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=s;for(;n--;)t+="0";e.d.push(+t),o&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function H(e,t,r,n,s){var a,i,l,c,d=e.precision,u=Math.ceil(d/7);for(o=!1,c=r.times(r),l=new e(n);;){if(i=F(l.times(c),new e(t++*t++),d,1),l=s?n.plus(i):n.minus(i),n=F(i.times(c),new e(t++*t++),d,1),void 0!==(i=l.plus(n)).d[u]){for(a=u;i.d[a]===l.d[a]&&a--;);if(-1==a)break}a=l,l=n,n=i,i=a}return o=!0,i.d.length=u+1,i}function U(e,t){for(var r=e;--t;)r*=e;return r}function B(e,t){var n,s=t.s<0,a=A(e,e.precision,1),i=a.times(.5);if((t=t.abs()).lte(i))return r=s?4:1,t;if((n=t.divToInt(a)).isZero())r=s?3:2;else{if((t=t.minus(n.times(a))).lte(i))return r=E(n)?s?2:3:s?4:1,t;r=E(n)?s?1:4:s?3:2}return t.minus(a).abs()}function V(e,r,s,a){var i,o,l,c,d,u,m,h,x,p=e.constructor,f=void 0!==s;if(f?(N(s,1,1e9),void 0===a?a=p.rounding:N(a,0,8)):(s=p.precision,a=p.rounding),e.isFinite()){for(l=(m=D(e)).indexOf("."),f?(i=2,16==r?s=4*s-3:8==r&&(s=3*s-2)):i=r,l>=0&&(m=m.replace(".",""),(x=new p(1)).e=m.length-l,x.d=S(D(x),10,i),x.e=x.d.length),o=d=(h=S(m,10,i)).length;0==h[--d];)h.pop();if(h[0]){if(l<0?o--:((e=new p(e)).d=h,e.e=o,h=(e=F(e,x,s,a,0,i)).d,o=e.e,u=t),l=h[s],c=i/2,u=u||void 0!==h[s+1],u=a<4?(void 0!==l||u)&&(0===a||a===(e.s<0?3:2)):l>c||l===c&&(4===a||u||6===a&&1&h[s-1]||a===(e.s<0?8:7)),h.length=s,u)for(;++h[--s]>i-1;)h[s]=0,s||(++o,h.unshift(1));for(d=h.length;!h[d-1];--d);for(l=0,m="";l<d;l++)m+=n.charAt(h[l]);if(f){if(d>1)if(16==r||8==r){for(l=16==r?4:3,--d;d%l;d++)m+="0";for(d=(h=S(m,i,r)).length;!h[d-1];--d);for(l=1,m="1.";l<d;l++)m+=n.charAt(h[l])}else m=m.charAt(0)+"."+m.slice(1);m=m+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)m="0"+m;m="0."+m}else if(++o>d)for(o-=d;o--;)m+="0";else o<d&&(m=m.slice(0,o)+"."+m.slice(o))}else m=f?"0p+0":"0";m=(16==r?"0x":2==r?"0b":8==r?"0o":"")+m}else m=_(e);return e.s<0?"-"+m:m}function q(e,t){if(e.length>t)return e.length=t,!0}function $(e){return new this(e).abs()}function W(e){return new this(e).acos()}function G(e){return new this(e).acosh()}function Q(e,t){return new this(e).plus(t)}function K(e){return new this(e).asin()}function X(e){return new this(e).asinh()}function J(e){return new this(e).atan()}function Z(e){return new this(e).atanh()}function ee(e,t){e=new this(e),t=new this(t);var r,n=this.precision,s=this.rounding,a=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?A(this,n,s):new this(0)).s=e.s:!e.d||t.isZero()?(r=A(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,r=this.atan(F(e,t,a,1)),t=A(this,a,1),this.precision=n,this.rounding=s,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(F(e,t,a,1)):(r=A(this,a,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function et(e){return new this(e).cbrt()}function er(e){return T(e=new this(e),e.e+1,2)}function en(e,t,r){return new this(e).clamp(t,r)}function es(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,r,n,s=!0===e.defaults,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],s&&(this[r]=i[r]),void 0!==(n=e[r]))if(h(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(c+r+": "+n);if(r="crypto",s&&(this[r]=i[r]),void 0!==(n=e[r]))if(!0===n||!1===n||0===n||1===n)if(n)if("u">typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(u);else this[r]=!1;else throw Error(c+r+": "+n);return this}function ea(e){return new this(e).cos()}function ei(e){return new this(e).cosh()}function eo(e,t){return new this(e).div(t)}function el(e){return new this(e).exp()}function ec(e){return T(e=new this(e),e.e+1,3)}function ed(){var e,t,r=new this(0);for(e=0,o=!1;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return o=!0,new this(1/0);r=t}return o=!0,r.sqrt()}function eu(e){return e instanceof eI||e&&e.toStringTag===m||!1}function em(e){return new this(e).ln()}function eh(e,t){return new this(e).log(t)}function ex(e){return new this(e).log(2)}function ep(e){return new this(e).log(10)}function ef(){return L(this,arguments,-1)}function eg(){return L(this,arguments,1)}function ej(e,t){return new this(e).mod(t)}function eb(e,t){return new this(e).mul(t)}function ev(e,t){return new this(e).pow(t)}function ey(e){var t,r,n,s,a=0,i=new this(1),o=[];if(void 0===e?e=this.precision:N(e,1,1e9),n=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)(s=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);a<n;)(s=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(s%1e7),a+=4);a=n/4}else throw Error(u);else for(;a<n;)o[a++]=1e7*Math.random()|0;for(n=o[--a],e%=7,n&&e&&(s=x(10,7-e),o[a]=(n/s|0)*s);0===o[a];a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;0===o[0];r-=7)o.shift();for(n=1,s=o[0];s>=10;s/=10)n++;n<7&&(r-=7-n)}return i.e=r,i.d=o,i}function ew(e){return T(e=new this(e),e.e+1,this.rounding)}function eN(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function eC(e){return new this(e).sin()}function eS(e){return new this(e).sinh()}function eF(e){return new this(e).sqrt()}function eT(e,t){return new this(e).sub(t)}function eD(){var e=0,t=arguments,r=new this(t[0]);for(o=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return o=!0,T(r,this.precision,this.rounding)}function eM(e){return new this(e).tan()}function ek(e){return new this(e).tanh()}function eA(e){return T(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString,y[Symbol.toStringTag]="Decimal";var eI=y.constructor=function e(t){var r,n,s;function a(e){var t,r,n;if(!(this instanceof a))return new a(e);if(this.constructor=a,eu(e)){this.s=e.s,o?!e.d||e.e>a.maxE?(this.e=NaN,this.d=null):e.e<a.minE?(this.e=0,this.d=[0]):(this.e=e.e,this.d=e.d.slice()):(this.e=e.e,this.d=e.d?e.d.slice():e.d);return}if("number"==(n=typeof e)){if(0===e){this.s=1/e<0?-1:1,this.e=0,this.d=[0];return}if(e<0?(e=-e,this.s=-1):this.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;o?t>a.maxE?(this.e=NaN,this.d=null):t<a.minE?(this.e=0,this.d=[0]):(this.e=t,this.d=[e]):(this.e=t,this.d=[e]);return}if(0*e!=0){e||(this.s=NaN),this.e=NaN,this.d=null;return}return Y(this,e.toString())}if("string"===n)return 45===(r=e.charCodeAt(0))?(e=e.slice(1),this.s=-1):(43===r&&(e=e.slice(1)),this.s=1),j.test(e)?Y(this,e):function(e,t){var r,n,s,a,i,l,d,u,m;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),j.test(t))return Y(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(f.test(t))r=16,t=t.toLowerCase();else if(p.test(t))r=2;else if(g.test(t))r=8;else throw Error(c+t);for((a=t.search(/p/i))>0?(d=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),i=(a=t.indexOf("."))>=0,n=e.constructor,i&&(a=(l=(t=t.replace(".","")).length)-a,s=R(n,new n(r),a,2*a)),a=m=(u=S(t,r,1e7)).length-1;0===u[a];--a)u.pop();return a<0?new n(0*e.s):(e.e=M(u,m),e.d=u,o=!1,i&&(e=F(e,s,4*l)),d&&(e=e.times(54>Math.abs(d)?x(2,d):eI.pow(2,d))),o=!0,e)}(this,e);if("bigint"===n)return e<0?(e=-e,this.s=-1):this.s=1,Y(this,e.toString());throw Error(c+e)}if(a.prototype=y,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=es,a.clone=e,a.isDecimal=eu,a.abs=$,a.acos=W,a.acosh=G,a.add=Q,a.asin=K,a.asinh=X,a.atan=J,a.atanh=Z,a.atan2=ee,a.cbrt=et,a.ceil=er,a.clamp=en,a.cos=ea,a.cosh=ei,a.div=eo,a.exp=el,a.floor=ec,a.hypot=ed,a.ln=em,a.log=eh,a.log10=ep,a.log2=ex,a.max=ef,a.min=eg,a.mod=ej,a.mul=eb,a.pow=ev,a.random=ey,a.round=ew,a.sign=eN,a.sin=eC,a.sinh=eS,a.sqrt=eF,a.sub=eT,a.sum=eD,a.tan=eM,a.tanh=ek,a.trunc=eA,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=0,s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];r<s.length;)t.hasOwnProperty(n=s[r++])||(t[n]=this[n]);return a.config(t),a}(i);function eP(e,t="USD",r="en-US"){let n="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}function eR(e,t="medium"){return new Intl.DateTimeFormat("en-US","short"===t?{month:"numeric",day:"numeric",year:"2-digit"}:"medium"===t?{month:"short",day:"numeric",year:"numeric"}:{month:"long",day:"numeric",year:"numeric"}).format(e)}s=new eI(s),a=new eI(a),e.s(["formatCurrency",()=>eP,"formatDate",()=>eR],931178)},48286,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(152990),s=e.i(682830),a=e.i(784774),i=e.i(793479),o=e.i(519455),l=e.i(755146),c=e.i(487486),d=e.i(541071),u=e.i(899602),m=e.i(178583),h=e.i(269638),x=e.i(373884),p=e.i(522016),f=e.i(618566),g=e.i(846696),j=e.i(95187);let b=(0,j.createServerReference)("4094967d55cba38eaae53d16ca7af28cdac68939ad",j.callServer,void 0,j.findSourceMapURL,"submitJournalEntry");var v=e.i(342671),y=e.i(966649),w=e.i(931178);let N={DRAFT:"secondary",PENDING_APPROVAL:"outline",APPROVED:"default",REJECTED:"destructive"},C=({entries:e,agencyId:j})=>{let C=(0,f.useRouter)(),[S,F]=(0,r.useState)([]),[T,D]=(0,r.useState)([]),M=[{accessorKey:"entryNumber",header:({column:e})=>(0,t.jsxs)(o.Button,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Entry #",(0,t.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>(0,t.jsxs)("div",{className:"font-mono",children:["JE-",e.getValue("entryNumber")]})},{accessorKey:"entryDate",header:"Date",cell:({row:e})=>(0,w.formatDate)(new Date(e.getValue("entryDate")),"short")},{accessorKey:"description",header:"Description",cell:({row:e})=>(0,t.jsx)("div",{className:"max-w-md truncate",children:e.getValue("description")})},{accessorKey:"entryType",header:"Type",cell:({row:e})=>{let r=e.getValue("entryType");return(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:r.replace(/_/g," ")})}},{id:"amount",header:"Amount",cell:({row:e})=>{let r=e.original.Lines.reduce((e,t)=>e+t.debitAmount,0);return(0,t.jsxs)("div",{className:"font-mono",children:["$",r.toFixed(2)]})}},{accessorKey:"status",header:"Status",cell:({row:e})=>{let r=e.getValue("status");return(0,t.jsx)(c.Badge,{variant:N[r]||"outline",children:r.replace(/_/g," ")})}},{id:"actions",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(d.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(l.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(l.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(p.default,{href:`/agency/${j}/fi/general-ledger/journal-entries/${r.id}`,children:[(0,t.jsx)(m.FileText,{className:"mr-2 h-4 w-4"}),"View Details"]})}),"DRAFT"===r.status&&(0,t.jsxs)(l.DropdownMenuItem,{onClick:async()=>{let e=await b(r.id);e.success?(g.toast.success("Entry submitted for approval"),C.refresh()):g.toast.error(e.error??"Failed to submit entry")},children:[(0,t.jsx)(h.CheckCircle,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]}),"PENDING_APPROVAL"===r.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.DropdownMenuSeparator,{}),(0,t.jsxs)(l.DropdownMenuItem,{onClick:async()=>{let e=await (0,v.approveJournalEntry)(r.id);e.success?(g.toast.success("Entry approved and posted"),C.refresh()):g.toast.error(e.error??"Failed to approve entry")},children:[(0,t.jsx)(h.CheckCircle,{className:"mr-2 h-4 w-4 text-green-600"}),"Approve"]}),(0,t.jsxs)(l.DropdownMenuItem,{onClick:async()=>{let e=prompt("Reason for rejection:");if(e){let t=await (0,y.rejectJournalEntry)(r.id,e);t.success?(g.toast.success("Entry rejected"),C.refresh()):g.toast.error(t.error??"Failed to reject entry")}},children:[(0,t.jsx)(x.XCircle,{className:"mr-2 h-4 w-4 text-red-600"}),"Reject"]})]})]})]})}}],k=(0,n.useReactTable)({data:e,columns:M,getCoreRowModel:(0,s.getCoreRowModel)(),getSortedRowModel:(0,s.getSortedRowModel)(),getFilteredRowModel:(0,s.getFilteredRowModel)(),onSortingChange:F,onColumnFiltersChange:D,state:{sorting:S,columnFilters:T}});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(i.Input,{placeholder:"Filter by description...",value:k.getColumn("description")?.getFilterValue()??"",onChange:e=>k.getColumn("description")?.setFilterValue(e.target.value),className:"max-w-sm"})}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:k.getHeaderGroups().map(e=>(0,t.jsx)(a.TableRow,{children:e.headers.map(e=>(0,t.jsx)(a.TableHead,{children:e.isPlaceholder?null:(0,n.flexRender)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(a.TableBody,{children:k.getRowModel().rows?.length?k.getRowModel().rows.map(e=>(0,t.jsx)(a.TableRow,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(a.TableCell,{children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(a.TableRow,{children:(0,t.jsx)(a.TableCell,{colSpan:M.length,className:"h-24 text-center",children:"No journal entries found."})})})]})})]})};e.s(["JournalEntriesTable",()=>C],48286)},747697,e=>{"use strict";var t=e.i(361277);e.s(["CalendarIcon",()=>t.default])},227766,e=>{"use strict";var t,r,n=e.i(843476),s=e.i(373375),a=e.i(463059),i=e.i(271645),o=e.i(945919),l=e.i(435684);function c(e){let t=(0,l.toDate)(e);return t.setDate(1),t.setHours(0,0,0,0),t}var d=e.i(128880),u=e.i(116766),m=e.i(96226);function h(e,t){let r,n,s,a,i=(0,l.toDate)(e),o=i.getFullYear(),c=i.getDate(),d=(0,m.constructFrom)(e,0);d.setFullYear(o,t,15),d.setHours(0,0,0,0);let u=(n=(r=(0,l.toDate)(d)).getFullYear(),s=r.getMonth(),(a=(0,m.constructFrom)(d,0)).setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate());return i.setMonth(t,Math.min(c,u)),i}function x(e,t){let r=(0,l.toDate)(e);return isNaN(+r)?(0,m.constructFrom)(e,NaN):(r.setFullYear(t),r)}var p=e.i(467027),f=e.i(901159);function g(e,t){let r=(0,l.toDate)(e);if(isNaN(t))return(0,m.constructFrom)(e,NaN);if(!t)return r;let n=r.getDate(),s=(0,m.constructFrom)(e,r.getTime());return(s.setMonth(r.getMonth()+t+1,0),n>=s.getDate())?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}function j(e,t){let r=(0,l.toDate)(e),n=(0,l.toDate)(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function b(e,t){return+(0,l.toDate)(e)<+(0,l.toDate)(t)}var v=e.i(854307),y=e.i(680390);function w(e,t){let r=(0,l.toDate)(e);return isNaN(t)?(0,m.constructFrom)(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function N(e,t){return+(0,u.startOfDay)(e)==+(0,u.startOfDay)(t)}function C(e,t){let r=(0,l.toDate)(e),n=(0,l.toDate)(t);return r.getTime()>n.getTime()}var S=e.i(521416),F=e.i(86767);function T(e,t){return w(e,7*t)}function D(e,t){return g(e,12*t)}var M=e.i(511048);function k(e,t){let r=(0,M.getDefaultOptions)(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=(0,l.toDate)(e),a=s.getDay();return s.setDate(s.getDate()+((a<n?-7:0)+6-(a-n))),s.setHours(23,59,59,999),s}function A(e){return k(e,{weekStartsOn:1})}var I=e.i(603506),P=e.i(96161),R=e.i(8470),E=e.i(74327);e.i(363367),e.i(336976),e.i(29325);class L{subPriority=0;validate(e,t){return!0}}class O extends L{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class z{run(e,t,r,n){let s=this.parse(e,t,r,n);return s?{setter:new O(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}let _=/^(1[0-2]|0?\d)/,Y=/^(3[0-1]|[0-2]?\d)/,H=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,U=/^(5[0-3]|[0-4]?\d)/,B=/^(2[0-3]|[0-1]?\d)/,V=/^(2[0-4]|[0-1]?\d)/,q=/^(1[0-1]|0?\d)/,$=/^(1[0-2]|0?\d)/,W=/^[0-5]?\d/,G=/^[0-5]?\d/,Q=/^\d/,K=/^\d{1,2}/,X=/^\d{1,3}/,J=/^\d{1,4}/,Z=/^-?\d+/,ee=/^-?\d/,et=/^-?\d{1,2}/,er=/^-?\d{1,3}/,en=/^-?\d{1,4}/,es=/^([+-])(\d{2})(\d{2})?|Z/,ea=/^([+-])(\d{2})(\d{2})|Z/,ei=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,eo=/^([+-])(\d{2}):(\d{2})|Z/,el=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ec(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ed(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function eu(e,t){let r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};let n="+"===r[1]?1:-1,s=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(s*R.millisecondsInHour+a*R.millisecondsInMinute+i*R.millisecondsInSecond),rest:t.slice(r[0].length)}}function em(e,t){switch(e){case 1:return ed(Q,t);case 2:return ed(K,t);case 3:return ed(X,t);case 4:return ed(J,t);default:return ed(RegExp("^\\d{1,"+e+"}"),t)}}function eh(e,t){switch(e){case 1:return ed(ee,t);case 2:return ed(et,t);case 3:return ed(er,t);case 4:return ed(en,t);default:return ed(RegExp("^-?\\d{1,"+e+"}"),t)}}function ex(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ep(e,t){let r,n=t>0,s=n?t:1-t;if(s<=50)r=e||100;else{let t=s+50;r=e+100*Math.trunc(t/100)-100*(e>=t%100)}return n?r:1-r}function ef(e){return e%400==0||e%4==0&&e%100!=0}var eg=e.i(158276);let ej=[31,28,31,30,31,30,31,31,30,31,30,31],eb=[31,29,31,30,31,30,31,31,30,31,30,31];function ev(e,t,r){let n=(0,M.getDefaultOptions)(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=(0,l.toDate)(e),i=a.getDay(),o=7-s;return w(a,t<0||t>6?t-(i+o)%7:((t%7+7)%7+o)%7-(i+o)%7)}new class extends z{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},new class extends z{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){let n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return ec(em(4,e),n);case"yo":return ec(r.ordinalNumber(e,{unit:"year"}),n);default:return ec(em(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){let n=e.getFullYear();if(r.isTwoDigitYear){let t=ep(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}let s="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},new class extends z{priority=130;parse(e,t,r){let n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return ec(em(4,e),n);case"Yo":return ec(r.ordinalNumber(e,{unit:"year"}),n);default:return ec(em(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){let s=(0,eg.getWeekYear)(e,n);if(r.isTwoDigitYear){let t=ep(r.year,s);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),(0,y.startOfWeek)(e,n)}let a="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(a,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),(0,y.startOfWeek)(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},new class extends z{priority=130;parse(e,t){return"R"===t?eh(4,e):eh(t.length,e)}set(e,t,r){let n=(0,m.constructFrom)(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),(0,v.startOfISOWeek)(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},new class extends z{priority=130;parse(e,t){return"u"===t?eh(4,e):eh(t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},new class extends z{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return em(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends z{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return em(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends z{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){let n=e=>e-1;switch(t){case"M":return ec(ed(_,e),n);case"MM":return ec(em(2,e),n);case"Mo":return ec(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}},new class extends z{priority=110;parse(e,t,r){let n=e=>e-1;switch(t){case"L":return ec(ed(_,e),n);case"LL":return ec(em(2,e),n);case"Lo":return ec(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},new class extends z{priority=100;parse(e,t,r){switch(t){case"w":return ed(U,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return em(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){let s,a;return(0,y.startOfWeek)((s=(0,l.toDate)(e),a=(0,P.getWeek)(s,n)-r,s.setDate(s.getDate()-7*a),s),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},new class extends z{priority=100;parse(e,t,r){switch(t){case"I":return ed(U,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return em(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){let n,s;return(0,v.startOfISOWeek)((n=(0,l.toDate)(e),s=(0,I.getISOWeek)(n)-r,n.setDate(n.getDate()-7*s),n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},new class extends z{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return ed(Y,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return em(t.length,e)}}validate(e,t){let r=ef(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=eb[n]:t>=1&&t<=ej[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},new class extends z{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return ed(H,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return em(t.length,e)}}validate(e,t){return ef(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},new class extends z{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=ev(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},new class extends z{priority=90;parse(e,t,r,n){let s=e=>{let t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ec(em(t.length,e),s);case"eo":return ec(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=ev(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},new class extends z{priority=90;parse(e,t,r,n){let s=e=>{let t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ec(em(t.length,e),s);case"co":return ec(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=ev(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},new class extends z{priority=90;parse(e,t,r){let n=e=>0===e?7:e;switch(t){case"i":case"ii":return em(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return ec(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return ec(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return ec(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return ec(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){var n;let s,a;return n=e,s=(0,l.toDate)(n),0===(a=(0,l.toDate)(s).getDay())&&(a=7),(e=w(s,r-a)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},new class extends z{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ex(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},new class extends z{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ex(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},new class extends z{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(ex(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]},new class extends z{priority=70;parse(e,t,r){switch(t){case"h":return ed($,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return em(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){let n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},new class extends z{priority=70;parse(e,t,r){switch(t){case"H":return ed(B,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return em(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},new class extends z{priority=70;parse(e,t,r){switch(t){case"K":return ed(q,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return em(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},new class extends z{priority=70;parse(e,t,r){switch(t){case"k":return ed(V,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return em(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){return e.setHours(r<=24?r%24:r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},new class extends z{priority=60;parse(e,t,r){switch(t){case"m":return ed(W,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return em(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]},new class extends z{priority=50;parse(e,t,r){switch(t){case"s":return ed(G,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return em(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]},new class extends z{priority=30;parse(e,t){return ec(em(t.length,e),e=>Math.trunc(e*Math.pow(10,-t.length+3)))}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]},new class extends z{priority=10;parse(e,t){switch(t){case"X":return eu(es,e);case"XX":return eu(ea,e);case"XXXX":return eu(ei,e);case"XXXXX":return eu(el,e);default:return eu(eo,e)}}set(e,t,r){return t.timestampIsSet?e:(0,m.constructFrom)(e,e.getTime()-(0,E.getTimezoneOffsetInMilliseconds)(e)-r)}incompatibleTokens=["t","T","x"]},new class extends z{priority=10;parse(e,t){switch(t){case"x":return eu(es,e);case"xx":return eu(ea,e);case"xxxx":return eu(ei,e);case"xxxxx":return eu(el,e);default:return eu(eo,e)}}set(e,t,r){return t.timestampIsSet?e:(0,m.constructFrom)(e,e.getTime()-(0,E.getTimezoneOffsetInMilliseconds)(e)-r)}incompatibleTokens=["t","T","X"]},new class extends z{priority=40;parse(e){return ed(Z,e)}set(e,t,r){return[(0,m.constructFrom)(e,1e3*r),{timestampIsSet:!0}]}incompatibleTokens="*"},new class extends z{priority=20;parse(e){return ed(Z,e)}set(e,t,r){return[(0,m.constructFrom)(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"};var ey=e.i(384192),ew=function(){return(ew=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function eN(e,t,r){if(r||2==arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function eC(e){return"multiple"===e.mode}function eS(e){return"range"===e.mode}function eF(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var eT={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"},eD=Object.freeze({__proto__:null,formatCaption:function(e,t){return(0,o.format)(e,"LLLL y",t)},formatDay:function(e,t){return(0,o.format)(e,"d",t)},formatMonthCaption:function(e,t){return(0,o.format)(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return(0,o.format)(e,"cccccc",t)},formatYearCaption:function(e,t){return(0,o.format)(e,"yyyy",t)}}),eM=Object.freeze({__proto__:null,labelDay:function(e,t,r){return(0,o.format)(e,"do MMMM (EEEE)",r)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return(0,o.format)(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}}),ek=(0,i.createContext)(void 0);function eA(e){var t,r,s,a,i,o,l,m,h=e.initialProps,x={captionLayout:"buttons",classNames:eT,formatters:eD,labels:eM,locale:ey.enUS,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},p=(t=h.fromYear,r=h.toYear,s=h.fromMonth,a=h.toMonth,i=h.fromDate,o=h.toDate,s?i=c(s):t&&(i=new Date(t,0,1)),a?o=(0,d.endOfMonth)(a):r&&(o=new Date(r,11,31)),{fromDate:i?(0,u.startOfDay)(i):void 0,toDate:o?(0,u.startOfDay)(o):void 0}),f=p.fromDate,g=p.toDate,j=null!=(l=h.captionLayout)?l:x.captionLayout;"buttons"===j||f&&g||(j="buttons"),(eF(h)||eC(h)||eS(h))&&(m=h.onSelect);var b=ew(ew(ew({},x),h),{captionLayout:j,classNames:ew(ew({},x.classNames),h.classNames),components:ew({},h.components),formatters:ew(ew({},x.formatters),h.formatters),fromDate:f,labels:ew(ew({},x.labels),h.labels),mode:h.mode||x.mode,modifiers:ew(ew({},x.modifiers),h.modifiers),modifiersClassNames:ew(ew({},x.modifiersClassNames),h.modifiersClassNames),onSelect:m,styles:ew(ew({},x.styles),h.styles),toDate:g});return(0,n.jsx)(ek.Provider,{value:b,children:e.children})}function eI(){var e=(0,i.useContext)(ek);if(!e)throw Error("useDayPicker must be used within a DayPickerProvider.");return e}function eP(e){var t=eI(),r=t.locale,s=t.classNames,a=t.styles,i=t.formatters.formatCaption;return(0,n.jsx)("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function eR(e){return(0,n.jsx)("svg",ew({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:(0,n.jsx)("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function eE(e){var t,r,s=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=eI(),u=null!=(r=null==(t=d.components)?void 0:t.IconDropdown)?r:eR;return(0,n.jsxs)("div",{className:l,style:c,children:[(0,n.jsx)("span",{className:d.classNames.vhidden,children:e["aria-label"]}),(0,n.jsx)("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:i}),(0,n.jsxs)("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,(0,n.jsx)(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function eL(e){let t,r;var s,a=eI(),i=a.fromDate,o=a.toDate,d=a.styles,u=a.locale,m=a.formatters.formatMonthCaption,x=a.classNames,p=a.components,f=a.labels.labelMonthDropdown;if(!i||!o)return(0,n.jsx)(n.Fragment,{});var g=[];if(t=(0,l.toDate)(i),r=(0,l.toDate)(o),t.getFullYear()===r.getFullYear())for(var j=c(i),b=i.getMonth();b<=o.getMonth();b++)g.push(h(j,b));else for(var j=c(new Date),b=0;b<=11;b++)g.push(h(j,b));var v=null!=(s=null==p?void 0:p.Dropdown)?s:eE;return(0,n.jsx)(v,{name:"months","aria-label":f(),className:x.dropdown_month,style:d.dropdown_month,onChange:function(t){var r=Number(t.target.value),n=h(c(e.displayMonth),r);e.onChange(n)},value:e.displayMonth.getMonth(),caption:m(e.displayMonth,{locale:u}),children:g.map(function(e){return(0,n.jsx)("option",{value:e.getMonth(),children:m(e,{locale:u})},e.getMonth())})})}function eO(e){var t,r=e.displayMonth,s=eI(),a=s.fromDate,i=s.toDate,o=s.locale,l=s.styles,d=s.classNames,u=s.components,m=s.formatters.formatYearCaption,h=s.labels.labelYearDropdown,f=[];if(!a||!i)return(0,n.jsx)(n.Fragment,{});for(var g=a.getFullYear(),j=i.getFullYear(),b=g;b<=j;b++)f.push(x((0,p.startOfYear)(new Date),b));var v=null!=(t=null==u?void 0:u.Dropdown)?t:eE;return(0,n.jsx)(v,{name:"years","aria-label":h(),className:d.dropdown_year,style:l.dropdown_year,onChange:function(t){var n=x(c(r),Number(t.target.value));e.onChange(n)},value:r.getFullYear(),caption:m(r,{locale:o}),children:f.map(function(e){return(0,n.jsx)("option",{value:e.getFullYear(),children:m(e,{locale:o})},e.getFullYear())})})}var ez=(0,i.createContext)(void 0);function e_(e){var t,r,s,a,o,l,d,u,m,h,x,p,v,y,w,N,C=eI(),S=(w=(s=(r=t=eI()).month,a=r.defaultMonth,o=r.today,l=s||a||o||new Date,d=r.toDate,u=r.fromDate,m=r.numberOfMonths,d&&0>(0,f.differenceInCalendarMonths)(d,l)&&(l=g(d,-1*((void 0===m?1:m)-1))),u&&0>(0,f.differenceInCalendarMonths)(l,u)&&(l=u),h=c(l),x=t.month,v=(p=(0,i.useState)(h))[0],y=[void 0===x?v:x,p[1]])[0],N=y[1],[w,function(e){if(!t.disableNavigation){var r,n=c(e);N(n),null==(r=t.onMonthChange)||r.call(t,n)}}]),F=S[0],T=S[1],D=function(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,s=c(e),a=c(g(s,n)),i=(0,f.differenceInCalendarMonths)(a,s),o=[],l=0;l<i;l++){var d=g(s,l);o.push(d)}return r&&(o=o.reverse()),o}(F,C),M=function(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,s=t.numberOfMonths,a=void 0===s?1:s,i=c(e);if(!r||!((0,f.differenceInCalendarMonths)(r,e)<a))return g(i,n?a:1)}}(F,C),k=function(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,s=t.numberOfMonths,a=c(e);if(!r||!(0>=(0,f.differenceInCalendarMonths)(a,r)))return g(a,-(n?void 0===s?1:s:1))}}(F,C),A=function(e){return D.some(function(t){return j(e,t)})};return(0,n.jsx)(ez.Provider,{value:{currentMonth:F,displayMonths:D,goToMonth:T,goToDate:function(e,t){A(e)||(t&&b(e,t)?T(g(e,1+-1*C.numberOfMonths)):T(e))},previousMonth:k,nextMonth:M,isDateDisplayed:A},children:e.children})}function eY(){var e=(0,i.useContext)(ez);if(!e)throw Error("useNavigation must be used within a NavigationProvider");return e}function eH(e){var t,r=eI(),s=r.classNames,a=r.styles,i=r.components,o=eY().goToMonth,l=function(t){o(g(t,e.displayIndex?-e.displayIndex:0))},c=null!=(t=null==i?void 0:i.CaptionLabel)?t:eP,d=(0,n.jsx)(c,{id:e.id,displayMonth:e.displayMonth});return(0,n.jsxs)("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[(0,n.jsx)("div",{className:s.vhidden,children:d}),(0,n.jsx)(eL,{onChange:l,displayMonth:e.displayMonth}),(0,n.jsx)(eO,{onChange:l,displayMonth:e.displayMonth})]})}function eU(e){return(0,n.jsx)("svg",ew({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,n.jsx)("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function eB(e){return(0,n.jsx)("svg",ew({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,n.jsx)("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var eV=(0,i.forwardRef)(function(e,t){var r=eI(),s=r.classNames,a=r.styles,i=[s.button_reset,s.button];e.className&&i.push(e.className);var o=i.join(" "),l=ew(ew({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),(0,n.jsx)("button",ew({},e,{ref:t,type:"button",className:o,style:l}))});function eq(e){var t,r,s=eI(),a=s.dir,i=s.locale,o=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,m=s.components;if(!e.nextMonth&&!e.previousMonth)return(0,n.jsx)(n.Fragment,{});var h=d(e.previousMonth,{locale:i}),x=[o.nav_button,o.nav_button_previous].join(" "),p=u(e.nextMonth,{locale:i}),f=[o.nav_button,o.nav_button_next].join(" "),g=null!=(t=null==m?void 0:m.IconRight)?t:eB,j=null!=(r=null==m?void 0:m.IconLeft)?r:eU;return(0,n.jsxs)("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&(0,n.jsx)(eV,{name:"previous-month","aria-label":h,className:x,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===a?(0,n.jsx)(g,{className:o.nav_icon,style:l.nav_icon}):(0,n.jsx)(j,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&(0,n.jsx)(eV,{name:"next-month","aria-label":p,className:f,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===a?(0,n.jsx)(j,{className:o.nav_icon,style:l.nav_icon}):(0,n.jsx)(g,{className:o.nav_icon,style:l.nav_icon})})]})}function e$(e){var t=eI().numberOfMonths,r=eY(),s=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(t){return j(e.displayMonth,t)}),c=0===l,d=l===o.length-1;return(0,n.jsx)(eq,{displayMonth:e.displayMonth,hideNext:t>1&&(c||!d),hidePrevious:t>1&&(d||!c),nextMonth:a,previousMonth:s,onPreviousClick:function(){s&&i(s)},onNextClick:function(){a&&i(a)}})}function eW(e){var t,r,s=eI(),a=s.classNames,i=s.disableNavigation,o=s.styles,l=s.captionLayout,c=s.components,d=null!=(t=null==c?void 0:c.CaptionLabel)?t:eP;return r=i?(0,n.jsx)(d,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===l?(0,n.jsx)(eH,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eH,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),(0,n.jsx)(e$,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,n.jsx)(e$,{displayMonth:e.displayMonth,id:e.id})]}),(0,n.jsx)("div",{className:a.caption,style:o.caption,children:r})}function eG(e){var t=eI(),r=t.footer,s=t.styles,a=t.classNames.tfoot;return r?(0,n.jsx)("tfoot",{className:a,style:s.tfoot,children:(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:8,children:r})})}):(0,n.jsx)(n.Fragment,{})}function eQ(){var e=eI(),t=e.classNames,r=e.styles,s=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=function(e,t,r){for(var n=r?(0,v.startOfISOWeek)(new Date):(0,y.startOfWeek)(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=w(n,a);s.push(i)}return s}(a,i,o);return(0,n.jsxs)("tr",{style:r.head_row,className:t.head_row,children:[s&&(0,n.jsx)("td",{style:r.head_cell,className:t.head_cell}),d.map(function(e,s){return(0,n.jsx)("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(e,{locale:a}),children:l(e,{locale:a})},s)})]})}function eK(){var e,t=eI(),r=t.classNames,s=t.styles,a=t.components,i=null!=(e=null==a?void 0:a.HeadRow)?e:eQ;return(0,n.jsx)("thead",{style:s.head,className:r.head,children:(0,n.jsx)(i,{})})}function eX(e){var t=eI(),r=t.locale,s=t.formatters.formatDay;return(0,n.jsx)(n.Fragment,{children:s(e.date,{locale:r})})}var eJ=(0,i.createContext)(void 0);function eZ(e){return eC(e.initialProps)?(0,n.jsx)(e0,{initialProps:e.initialProps,children:e.children}):(0,n.jsx)(eJ.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}function e0(e){var t=e.initialProps,r=e.children,s=t.selected,a=t.min,i=t.max,o={disabled:[]};return s&&o.disabled.push(function(e){var t=i&&s.length>i-1,r=s.some(function(t){return N(t,e)});return!!(t&&!r)}),(0,n.jsx)(eJ.Provider,{value:{selected:s,onDayClick:function(e,r,n){var o,l;if((null==(o=t.onDayClick)||o.call(t,e,r,n),!r.selected||!a||(null==s?void 0:s.length)!==a)&&!(!r.selected&&i&&(null==s?void 0:s.length)===i)){var c=s?eN([],s,!0):[];if(r.selected){var d=c.findIndex(function(t){return N(e,t)});c.splice(d,1)}else c.push(e);null==(l=t.onSelect)||l.call(t,c,e,r,n)}},modifiers:o},children:r})}function e1(){var e=(0,i.useContext)(eJ);if(!e)throw Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var e4=(0,i.createContext)(void 0);function e2(e){return eS(e.initialProps)?(0,n.jsx)(e5,{initialProps:e.initialProps,children:e.children}):(0,n.jsx)(e4.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}function e5(e){var t=e.initialProps,r=e.children,s=t.selected,a=s||{},i=a.from,o=a.to,l=t.min,c=t.max,d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],N(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:w(i,-(l-1)),before:w(i,l-1)}),i&&o&&d.disabled.push({after:i,before:w(i,l-1)}),!i&&o&&d.disabled.push({after:w(o,-(l-1)),before:w(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:w(i,-c+1)}),d.disabled.push({after:w(i,c-1)})),i&&o){var u=c-((0,S.differenceInCalendarDays)(o,i)+1);d.disabled.push({before:w(i,-u)}),d.disabled.push({after:w(o,u)})}!i&&o&&(d.disabled.push({before:w(o,-c+1)}),d.disabled.push({after:w(o,c-1)}))}return(0,n.jsx)(e4.Provider,{value:{selected:s,onDayClick:function(e,r,n){null==(c=t.onDayClick)||c.call(t,e,r,n);var a,i,o,l,c,d,u=(a=e,o=(i=s||{}).from,l=i.to,o&&l?N(l,a)&&N(o,a)?void 0:N(l,a)?{from:l,to:void 0}:N(o,a)?void 0:C(o,a)?{from:a,to:l}:{from:o,to:a}:l?C(a,l)?{from:l,to:a}:{from:a,to:l}:o?b(a,o)?{from:a,to:o}:{from:o,to:a}:{from:a,to:void 0});null==(d=t.onSelect)||d.call(t,u,e,r,n)},modifiers:d},children:r})}function e3(){var e=(0,i.useContext)(e4);if(!e)throw Error("useSelectRange must be used within a SelectRangeProvider");return e}function e6(e){return Array.isArray(e)?eN([],e,!0):void 0!==e?[e]:[]}(t=r||(r={})).Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle";var e7=r.Selected,e9=r.Disabled,e8=r.Hidden,te=r.Today,tt=r.RangeEnd,tr=r.RangeMiddle,tn=r.RangeStart,ts=r.Outside,ta=(0,i.createContext)(void 0);function ti(e){var t,r,s,a,i=eI(),o=e1(),l=e3(),c=((t={})[e7]=e6(i.selected),t[e9]=e6(i.disabled),t[e8]=e6(i.hidden),t[te]=[i.today],t[tt]=[],t[tr]=[],t[tn]=[],t[ts]=[],r=t,i.fromDate&&r[e9].push({before:i.fromDate}),i.toDate&&r[e9].push({after:i.toDate}),eC(i)?r[e9]=r[e9].concat(o.modifiers[e9]):eS(i)&&(r[e9]=r[e9].concat(l.modifiers[e9]),r[tn]=l.modifiers[tn],r[tr]=l.modifiers[tr],r[tt]=l.modifiers[tt]),r),d=(s=i.modifiers,a={},Object.entries(s).forEach(function(e){var t=e[0],r=e[1];a[t]=e6(r)}),a),u=ew(ew({},c),d);return(0,n.jsx)(ta.Provider,{value:u,children:e.children})}function to(){var e=(0,i.useContext)(ta);if(!e)throw Error("useModifiers must be used within a ModifiersProvider");return e}function tl(e,t,r){var n=Object.keys(t).reduce(function(r,n){return t[n].some(function(t){if("boolean"==typeof t)return t;if((0,F.isDate)(t))return N(e,t);if(Array.isArray(t)&&t.every(F.isDate))return t.includes(e);if(t&&"object"==typeof t&&"from"in t)return n=t.from,s=t.to,n&&s?(0>(0,S.differenceInCalendarDays)(s,n)&&(n=(r=[s,n])[0],s=r[1]),(0,S.differenceInCalendarDays)(e,n)>=0&&(0,S.differenceInCalendarDays)(s,e)>=0):s?N(s,e):!!n&&N(n,e);if(t&&"object"==typeof t&&"dayOfWeek"in t)return t.dayOfWeek.includes(e.getDay());if(t&&"object"==typeof t&&"before"in t&&"after"in t){var r,n,s,a=(0,S.differenceInCalendarDays)(t.before,e),i=(0,S.differenceInCalendarDays)(t.after,e),o=a>0,l=i<0;return C(t.before,t.after)?l&&o:o||l}return t&&"object"==typeof t&&"after"in t?(0,S.differenceInCalendarDays)(e,t.after)>0:t&&"object"==typeof t&&"before"in t?(0,S.differenceInCalendarDays)(t.before,e)>0:"function"==typeof t&&t(e)})&&r.push(n),r},[]),s={};return n.forEach(function(e){return s[e]=!0}),r&&!j(e,r)&&(s.outside=!0),s}var tc=(0,i.createContext)(void 0);function td(e){var t=eY(),r=to(),s=(0,i.useState)(),a=s[0],o=s[1],u=(0,i.useState)(),m=u[0],h=u[1],x=function(e,t){for(var r,n,s=c(e[0]),a=(0,d.endOfMonth)(e[e.length-1]),i=s;i<=a;){var o=tl(i,t);if(!(!o.disabled&&!o.hidden)){i=w(i,1);continue}if(o.selected)return i;o.today&&!n&&(n=i),r||(r=i),i=w(i,1)}return n||r}(t.displayMonths,r),p=(null!=a?a:m&&t.isDateDisplayed(m))?m:x,f=function(e){o(e)},j=eI(),b=function(e,n){if(a){var s=function e(t,r){var n=r.moveBy,s=r.direction,a=r.context,i=r.modifiers,o=r.retry,c=void 0===o?{count:0,lastFocused:t}:o,d=a.weekStartsOn,u=a.fromDate,m=a.toDate,h=a.locale,x=({day:w,week:T,month:g,year:D,startOfWeek:function(e){return a.ISOWeek?(0,v.startOfISOWeek)(e):(0,y.startOfWeek)(e,{locale:h,weekStartsOn:d})},endOfWeek:function(e){return a.ISOWeek?A(e):k(e,{locale:h,weekStartsOn:d})}})[n](t,"after"===s?1:-1);if("before"===s&&u){let e;[u,x].forEach(function(t){let r=(0,l.toDate)(t);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),x=e||new Date(NaN)}else{let e;"after"===s&&m&&([m,x].forEach(t=>{let r=(0,l.toDate)(t);(!e||e>r||isNaN(+r))&&(e=r)}),x=e||new Date(NaN))}var p=!0;if(i){var f=tl(x,i);p=!f.disabled&&!f.hidden}return p?x:c.count>365?c.lastFocused:e(x,{moveBy:n,direction:s,context:a,modifiers:i,retry:ew(ew({},c),{count:c.count+1})})}(a,{moveBy:e,direction:n,context:j,modifiers:r});N(a,s)||(t.goToDate(s,a),f(s))}};return(0,n.jsx)(tc.Provider,{value:{focusedDay:a,focusTarget:p,blur:function(){h(a),o(void 0)},focus:f,focusDayAfter:function(){return b("day","after")},focusDayBefore:function(){return b("day","before")},focusWeekAfter:function(){return b("week","after")},focusWeekBefore:function(){return b("week","before")},focusMonthBefore:function(){return b("month","before")},focusMonthAfter:function(){return b("month","after")},focusYearBefore:function(){return b("year","before")},focusYearAfter:function(){return b("year","after")},focusStartOfWeek:function(){return b("startOfWeek","before")},focusEndOfWeek:function(){return b("endOfWeek","after")}},children:e.children})}function tu(){var e=(0,i.useContext)(tc);if(!e)throw Error("useFocusContext must be used within a FocusProvider");return e}var tm=(0,i.createContext)(void 0);function th(e){return eF(e.initialProps)?(0,n.jsx)(tx,{initialProps:e.initialProps,children:e.children}):(0,n.jsx)(tm.Provider,{value:{selected:void 0},children:e.children})}function tx(e){var t=e.initialProps,r=e.children,s={selected:t.selected,onDayClick:function(e,r,n){var s,a,i;if(null==(s=t.onDayClick)||s.call(t,e,r,n),r.selected&&!t.required){null==(a=t.onSelect)||a.call(t,void 0,e,r,n);return}null==(i=t.onSelect)||i.call(t,e,e,r,n)}};return(0,n.jsx)(tm.Provider,{value:s,children:r})}function tp(){var e=(0,i.useContext)(tm);if(!e)throw Error("useSelectSingle must be used within a SelectSingleProvider");return e}function tf(e){var t,s,a,o,l,c,d,u,m,h,x,p,f,g,j,b,v,y,w,C,S,F,T,D,M,k,A,I,P,R,E,L,O,z,_,Y,H,U,B,V,q,$,W=(0,i.useRef)(null),G=(t=e.date,s=e.displayMonth,c=eI(),d=tu(),u=tl(t,to(),s),m=eI(),h=tp(),x=e1(),p=e3(),g=(f=tu()).focusDayAfter,j=f.focusDayBefore,b=f.focusWeekAfter,v=f.focusWeekBefore,y=f.blur,w=f.focus,C=f.focusMonthBefore,S=f.focusMonthAfter,F=f.focusYearBefore,T=f.focusYearAfter,D=f.focusStartOfWeek,M=f.focusEndOfWeek,k={onClick:function(e){var r,n,s,a;eF(m)?null==(r=h.onDayClick)||r.call(h,t,u,e):eC(m)?null==(n=x.onDayClick)||n.call(x,t,u,e):eS(m)?null==(s=p.onDayClick)||s.call(p,t,u,e):null==(a=m.onDayClick)||a.call(m,t,u,e)},onFocus:function(e){var r;w(t),null==(r=m.onDayFocus)||r.call(m,t,u,e)},onBlur:function(e){var r;y(),null==(r=m.onDayBlur)||r.call(m,t,u,e)},onKeyDown:function(e){var r;switch(e.key){case"ArrowLeft":e.preventDefault(),e.stopPropagation(),"rtl"===m.dir?g():j();break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),"rtl"===m.dir?j():g();break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),b();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),v();break;case"PageUp":e.preventDefault(),e.stopPropagation(),e.shiftKey?F():C();break;case"PageDown":e.preventDefault(),e.stopPropagation(),e.shiftKey?T():S();break;case"Home":e.preventDefault(),e.stopPropagation(),D();break;case"End":e.preventDefault(),e.stopPropagation(),M()}null==(r=m.onDayKeyDown)||r.call(m,t,u,e)},onKeyUp:function(e){var r;null==(r=m.onDayKeyUp)||r.call(m,t,u,e)},onMouseEnter:function(e){var r;null==(r=m.onDayMouseEnter)||r.call(m,t,u,e)},onMouseLeave:function(e){var r;null==(r=m.onDayMouseLeave)||r.call(m,t,u,e)},onPointerEnter:function(e){var r;null==(r=m.onDayPointerEnter)||r.call(m,t,u,e)},onPointerLeave:function(e){var r;null==(r=m.onDayPointerLeave)||r.call(m,t,u,e)},onTouchCancel:function(e){var r;null==(r=m.onDayTouchCancel)||r.call(m,t,u,e)},onTouchEnd:function(e){var r;null==(r=m.onDayTouchEnd)||r.call(m,t,u,e)},onTouchMove:function(e){var r;null==(r=m.onDayTouchMove)||r.call(m,t,u,e)},onTouchStart:function(e){var r;null==(r=m.onDayTouchStart)||r.call(m,t,u,e)}},A=eI(),I=tp(),P=e1(),R=e3(),E=eF(A)?I.selected:eC(A)?P.selected:eS(A)?R.selected:void 0,L=!!(c.onDayClick||"default"!==c.mode),(0,i.useEffect)(function(){var e;u.outside||!d.focusedDay||L&&N(d.focusedDay,t)&&(null==(e=W.current)||e.focus())},[d.focusedDay,t,W,L,u.outside]),z=(O=[c.classNames.day],Object.keys(u).forEach(function(e){var t=c.modifiersClassNames[e];if(t)O.push(t);else if(Object.values(r).includes(e)){var n=c.classNames["day_".concat(e)];n&&O.push(n)}}),O).join(" "),_=ew({},c.styles.day),Object.keys(u).forEach(function(e){var t;_=ew(ew({},_),null==(t=c.modifiersStyles)?void 0:t[e])}),Y=_,H=!!(u.outside&&!c.showOutsideDays||u.hidden),U=null!=(l=null==(o=c.components)?void 0:o.DayContent)?l:eX,B={style:Y,className:z,children:(0,n.jsx)(U,{date:t,displayMonth:s,activeModifiers:u}),role:"gridcell"},V=d.focusTarget&&N(d.focusTarget,t)&&!u.outside,q=d.focusedDay&&N(d.focusedDay,t),$=ew(ew(ew({},B),((a={disabled:u.disabled,role:"gridcell"})["aria-selected"]=u.selected,a.tabIndex=q||V?0:-1,a)),k),{isButton:L,isHidden:H,activeModifiers:u,selectedDays:E,buttonProps:$,divProps:B});return G.isHidden?(0,n.jsx)("div",{role:"gridcell"}):G.isButton?(0,n.jsx)(eV,ew({name:"day",ref:W},G.buttonProps)):(0,n.jsx)("div",ew({},G.divProps))}function tg(e){var t=e.number,r=e.dates,s=eI(),a=s.onWeekNumberClick,i=s.styles,o=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=(0,s.formatters.formatWeekNumber)(Number(t),{locale:l});if(!a)return(0,n.jsx)("span",{className:o.weeknumber,style:i.weeknumber,children:d});var u=c(Number(t),{locale:l});return(0,n.jsx)(eV,{name:"week-number","aria-label":u,className:o.weeknumber,style:i.weeknumber,onClick:function(e){a(t,r,e)},children:d})}function tj(e){var t,r,s,a=eI(),i=a.styles,o=a.classNames,c=a.showWeekNumber,d=a.components,u=null!=(t=null==d?void 0:d.Day)?t:tf,m=null!=(r=null==d?void 0:d.WeekNumber)?r:tg;return c&&(s=(0,n.jsx)("td",{className:o.cell,style:i.cell,children:(0,n.jsx)(m,{number:e.weekNumber,dates:e.dates})})),(0,n.jsxs)("tr",{className:o.row,style:i.row,children:[s,e.dates.map(function(t){return(0,n.jsx)("td",{className:o.cell,style:i.cell,role:"presentation",children:(0,n.jsx)(u,{displayMonth:e.displayMonth,date:t})},Math.trunc((0,l.toDate)(t)/1e3))})]})}function tb(e,t,r){for(var n=(null==r?void 0:r.ISOWeek)?A(t):k(t,r),s=(null==r?void 0:r.ISOWeek)?(0,v.startOfISOWeek)(e):(0,y.startOfWeek)(e,r),a=(0,S.differenceInCalendarDays)(n,s),i=[],o=0;o<=a;o++)i.push(w(s,o));return i.reduce(function(e,t){var n=(null==r?void 0:r.ISOWeek)?(0,I.getISOWeek)(t):(0,P.getWeek)(t,r),s=e.find(function(e){return e.weekNumber===n});return s?s.dates.push(t):e.push({weekNumber:n,dates:[t]}),e},[])}function tv(e){var t,r,s,a=eI(),i=a.locale,o=a.classNames,u=a.styles,m=a.hideHead,h=a.fixedWeeks,x=a.components,p=a.weekStartsOn,f=a.firstWeekContainsDate,g=a.ISOWeek,j=function(e,t){var r=tb(c(e),(0,d.endOfMonth)(e),t);if(null==t?void 0:t.useFixedWeeks){let d,h,x,p;var n,s,a=(h=(d=(0,l.toDate)(e)).getMonth(),d.setFullYear(d.getFullYear(),h+1,0),d.setHours(0,0,0,0),n=d,s=c(e),x=(0,y.startOfWeek)(n,t),p=(0,y.startOfWeek)(s,t),Math.round((x-(0,E.getTimezoneOffsetInMilliseconds)(x)-(p-(0,E.getTimezoneOffsetInMilliseconds)(p)))/R.millisecondsInWeek)+1);if(a<6){var i=r[r.length-1],o=i.dates[i.dates.length-1],u=T(o,6-a),m=tb(T(o,1),u,t);r.push.apply(r,m)}}return r}(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:g,locale:i,weekStartsOn:p,firstWeekContainsDate:f}),b=null!=(t=null==x?void 0:x.Head)?t:eK,v=null!=(r=null==x?void 0:x.Row)?r:tj,w=null!=(s=null==x?void 0:x.Footer)?s:eG;return(0,n.jsxs)("table",{id:e.id,className:o.table,style:u.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!m&&(0,n.jsx)(b,{}),(0,n.jsx)("tbody",{className:o.tbody,style:u.tbody,children:j.map(function(t){return(0,n.jsx)(v,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),(0,n.jsx)(w,{displayMonth:e.displayMonth})]})}var ty="u">typeof window&&window.document&&window.document.createElement?i.useLayoutEffect:i.useEffect,tw=!1,tN=0;function tC(){return"react-day-picker-".concat(++tN)}function tS(e){var t,r,s,a,o,l,c,d,u=eI(),m=u.dir,h=u.classNames,x=u.styles,p=u.components,f=eY().displayMonths,g=(s=null!=(t=u.id?"".concat(u.id,"-").concat(e.displayIndex):void 0)?t:tw?tC():null,o=(a=(0,i.useState)(s))[0],l=a[1],ty(function(){null===o&&l(tC())},[]),(0,i.useEffect)(function(){!1===tw&&(tw=!0)},[]),null!=(r=null!=t?t:o)?r:void 0),j=u.id?"".concat(u.id,"-grid-").concat(e.displayIndex):void 0,b=[h.month],v=x.month,y=0===e.displayIndex,w=e.displayIndex===f.length-1,N=!y&&!w;"rtl"===m&&(w=(c=[y,w])[0],y=c[1]),y&&(b.push(h.caption_start),v=ew(ew({},v),x.caption_start)),w&&(b.push(h.caption_end),v=ew(ew({},v),x.caption_end)),N&&(b.push(h.caption_between),v=ew(ew({},v),x.caption_between));var C=null!=(d=null==p?void 0:p.Caption)?d:eW;return(0,n.jsxs)("div",{className:b.join(" "),style:v,children:[(0,n.jsx)(C,{id:g,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,n.jsx)(tv,{id:j,"aria-labelledby":g,displayMonth:e.displayMonth})]},e.displayIndex)}function tF(e){var t=eI(),r=t.classNames,s=t.styles;return(0,n.jsx)("div",{className:r.months,style:s.months,children:e.children})}function tT(e){var t,r,s=e.initialProps,a=eI(),o=tu(),l=eY(),c=(0,i.useState)(!1),d=c[0],u=c[1];(0,i.useEffect)(function(){a.initialFocus&&o.focusTarget&&(d||(o.focus(o.focusTarget),u(!0)))},[a.initialFocus,d,o.focus,o.focusTarget,o]);var m=[a.classNames.root,a.className];a.numberOfMonths>1&&m.push(a.classNames.multiple_months),a.showWeekNumber&&m.push(a.classNames.with_weeknumber);var h=ew(ew({},a.styles.root),a.style),x=Object.keys(s).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var r;return ew(ew({},e),((r={})[t]=s[t],r))},{}),p=null!=(r=null==(t=s.components)?void 0:t.Months)?r:tF;return(0,n.jsx)("div",ew({className:m.join(" "),style:h,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},x,{children:(0,n.jsx)(p,{children:l.displayMonths.map(function(e,t){return(0,n.jsx)(tS,{displayIndex:t,displayMonth:e},t)})})}))}function tD(e){var t=e.children,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}(e,["children"]);return(0,n.jsx)(eA,{initialProps:r,children:(0,n.jsx)(e_,{children:(0,n.jsx)(th,{initialProps:r,children:(0,n.jsx)(eZ,{initialProps:r,children:(0,n.jsx)(e2,{initialProps:r,children:(0,n.jsx)(ti,{children:(0,n.jsx)(td,{children:t})})})})})})})}function tM(e){return(0,n.jsx)(tD,ew({},e,{children:(0,n.jsx)(tT,{initialProps:e})}))}var tk=e.i(975157),tA=e.i(519455);function tI({className:e,classNames:t,showOutsideDays:r=!0,...i}){return(0,n.jsx)(tM,{showOutsideDays:r,className:(0,tk.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,tk.cn)((0,tA.buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,tk.cn)((0,tA.buttonVariants)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>(0,n.jsx)(s.ChevronLeft,{className:"h-4 w-4"}),IconRight:({...e})=>(0,n.jsx)(a.ChevronRight,{className:"h-4 w-4"})},...i})}tI.displayName="Calendar",e.s(["Calendar",()=>tI],227766)},866377,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(653145),a=e.i(994814),i=e.i(681307),o=e.i(945919),l=e.i(747697),c=e.i(107233),d=e.i(727612),u=e.i(531278),m=e.i(519455),h=e.i(793479),x=e.i(624687),p=e.i(227766),f=e.i(903133),g=e.i(967489),j=e.i(337822),b=e.i(784774),v=e.i(487486),y=e.i(772436),w=e.i(846696),N=e.i(975157),C=e.i(95187);let S=(0,C.createServerReference)("40e3beed1dc4ea30a08f2fc2b8b23dc9ce34a1128a",C.callServer,void 0,C.findSourceMapURL,"createJournalEntry"),F=i.z.object({periodId:i.z.string().uuid({message:"Please select a period"}),entryDate:i.z.date(),entryType:i.z.enum(["NORMAL","ADJUSTMENT","REVERSAL"]),description:i.z.string().min(1,"Description is required").max(1e3),notes:i.z.string().max(2e3).optional(),currencyCode:i.z.string().length(3),exchangeRate:i.z.number().positive(),lines:i.z.array(i.z.object({lineNumber:i.z.number().int().min(1),accountId:i.z.string().uuid({message:"Please select an account"}),description:i.z.string().max(500).optional(),debitAmount:i.z.number().min(0),creditAmount:i.z.number().min(0),dimension1:i.z.string().optional(),dimension2:i.z.string().optional()})).min(2,"At least 2 lines required")});function T({agencyId:e,accounts:i,periods:C}){let T=(0,n.useRouter)(),[D,M]=(0,r.useTransition)(),[k,A]=(0,r.useState)(!1),I=(0,s.useForm)({resolver:(0,a.zodResolver)(F),defaultValues:{periodId:"",entryDate:new Date,entryType:"NORMAL",description:"",notes:"",currencyCode:"MYR",exchangeRate:1,lines:[{lineNumber:1,accountId:"",description:"",debitAmount:0,creditAmount:0,dimension1:void 0,dimension2:void 0},{lineNumber:2,accountId:"",description:"",debitAmount:0,creditAmount:0,dimension1:void 0,dimension2:void 0}]}}),{fields:P,append:R,remove:E}=(0,s.useFieldArray)({control:I.control,name:"lines"}),L=I.watch("lines"),O=L.reduce((e,t)=>e+(t.debitAmount||0),0),z=L.reduce((e,t)=>e+(t.creditAmount||0),0),_=.01>Math.abs(O-z),Y=O-z,H=async t=>{if(!_)return void w.toast.error("Entry is not balanced. Total debits must equal total credits.");A(!0);try{({...t,entryDate:t.entryDate.toISOString()});let r=await S({periodId:t.periodId,entryDate:t.entryDate,entryType:t.entryType,sourceModule:"MANUAL",description:t.description,currencyCode:t.currencyCode,exchangeRate:t.exchangeRate,lines:t.lines.map(e=>({lineNumber:e.lineNumber||0,accountId:e.accountId||"",description:e.description||void 0,debitAmount:e.debitAmount||0,creditAmount:e.creditAmount||0,dimension1:e.dimension1||void 0,dimension2:e.dimension2||void 0,subledgerType:"NONE",isIntercompany:!1}))});r.success?(w.toast.success("Journal entry created successfully"),M(()=>{T.push(`/agency/${e}/fi/general-ledger/journal-entries`),T.refresh()})):w.toast.error(r.error??"Failed to create journal entry")}catch{w.toast.error("An unexpected error occurred")}finally{A(!1)}};return(0,t.jsx)(f.Form,{...I,children:(0,t.jsxs)("form",{onSubmit:I.handleSubmit(H),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsx)(f.FormField,{control:I.control,name:"periodId",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Period *"}),(0,t.jsxs)(g.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select period"})})}),(0,t.jsx)(g.SelectContent,{children:C.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id,children:e.name},e.id))})]}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:I.control,name:"entryDate",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Entry Date *"}),(0,t.jsxs)(j.Popover,{children:[(0,t.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(f.FormControl,{children:(0,t.jsxs)(m.Button,{variant:"outline",className:(0,N.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,o.format)(e.value,"PPP"):(0,t.jsx)("span",{children:"Pick a date"}),(0,t.jsx)(l.CalendarIcon,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsx)(j.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(p.Calendar,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:I.control,name:"entryType",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Entry Type"}),(0,t.jsxs)(g.Select,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select type"})})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"NORMAL",children:"Normal"}),(0,t.jsx)(g.SelectItem,{value:"ADJUSTMENT",children:"Adjustment"}),(0,t.jsx)(g.SelectItem,{value:"REVERSAL",children:"Reversal"})]})]}),(0,t.jsx)(f.FormMessage,{})]})})]}),(0,t.jsx)(f.FormField,{control:I.control,name:"description",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Description *"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(h.Input,{placeholder:"Enter journal entry description",...e})}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:I.control,name:"notes",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Notes"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(x.Textarea,{placeholder:"Additional notes (optional)",className:"resize-none",...e})}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(y.Separator,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-medium",children:"Journal Lines"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add debit and credit entries. Total must balance."})]}),(0,t.jsxs)(m.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{R({lineNumber:P.length+1,accountId:"",description:"",debitAmount:0,creditAmount:0})},children:[(0,t.jsx)(c.Plus,{className:"h-4 w-4 mr-2"}),"Add Line"]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(b.Table,{children:[(0,t.jsx)(b.TableHeader,{children:(0,t.jsxs)(b.TableRow,{children:[(0,t.jsx)(b.TableHead,{className:"w-12",children:"#"}),(0,t.jsx)(b.TableHead,{className:"min-w-[200px]",children:"Account"}),(0,t.jsx)(b.TableHead,{className:"min-w-[150px]",children:"Description"}),(0,t.jsx)(b.TableHead,{className:"w-32 text-right",children:"Debit"}),(0,t.jsx)(b.TableHead,{className:"w-32 text-right",children:"Credit"}),(0,t.jsx)(b.TableHead,{className:"w-12"})]})}),(0,t.jsx)(b.TableBody,{children:P.map((e,r)=>(0,t.jsxs)(b.TableRow,{children:[(0,t.jsx)(b.TableCell,{className:"font-medium",children:r+1}),(0,t.jsx)(b.TableCell,{children:(0,t.jsx)(f.FormField,{control:I.control,name:`lines.${r}.accountId`,render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"space-y-0",children:[(0,t.jsxs)(g.Select,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.SelectTrigger,{className:"h-9",children:(0,t.jsx)(g.SelectValue,{placeholder:"Select account"})})}),(0,t.jsx)(g.SelectContent,{children:i.map(e=>(0,t.jsxs)(g.SelectItem,{value:e?.id,children:[e?.code," - ",e?.name]},e?.id))})]}),(0,t.jsx)(f.FormMessage,{})]})})}),(0,t.jsx)(b.TableCell,{children:(0,t.jsx)(f.FormField,{control:I.control,name:`lines.${r}.description`,render:({field:e})=>(0,t.jsx)(f.FormItem,{className:"space-y-0",children:(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(h.Input,{className:"h-9",placeholder:"Line description",...e})})})})}),(0,t.jsx)(b.TableCell,{children:(0,t.jsx)(f.FormField,{control:I.control,name:`lines.${r}.debitAmount`,render:({field:e})=>(0,t.jsx)(f.FormItem,{className:"space-y-0",children:(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(h.Input,{type:"number",step:"0.01",min:"0",className:"h-9 text-right",placeholder:"0.00",...e,onChange:t=>{let n=parseFloat(t.target.value)||0;e.onChange(n),n>0&&I.setValue(`lines.${r}.creditAmount`,0)}})})})})}),(0,t.jsx)(b.TableCell,{children:(0,t.jsx)(f.FormField,{control:I.control,name:`lines.${r}.creditAmount`,render:({field:e})=>(0,t.jsx)(f.FormItem,{className:"space-y-0",children:(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(h.Input,{type:"number",step:"0.01",min:"0",className:"h-9 text-right",placeholder:"0.00",...e,onChange:t=>{let n=parseFloat(t.target.value)||0;e.onChange(n),n>0&&I.setValue(`lines.${r}.debitAmount`,0)}})})})})}),(0,t.jsx)(b.TableCell,{children:(0,t.jsx)(m.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{P.length<=2?w.toast.error("Minimum 2 lines required for double-entry"):(E(r),I.getValues("lines").forEach((e,t)=>{I.setValue(`lines.${t}.lineNumber`,t+1)}))},disabled:P.length<=2,children:(0,t.jsx)(d.Trash2,{className:"h-4 w-4 text-destructive"})})})]},e.id))}),(0,t.jsxs)(b.TableFooter,{children:[(0,t.jsxs)(b.TableRow,{children:[(0,t.jsx)(b.TableCell,{colSpan:3,className:"text-right font-medium",children:"Totals"}),(0,t.jsx)(b.TableCell,{className:"text-right font-medium",children:O.toFixed(2)}),(0,t.jsx)(b.TableCell,{className:"text-right font-medium",children:z.toFixed(2)}),(0,t.jsx)(b.TableCell,{})]}),(0,t.jsxs)(b.TableRow,{children:[(0,t.jsx)(b.TableCell,{colSpan:3,className:"text-right",children:"Balance Status"}),(0,t.jsx)(b.TableCell,{colSpan:2,className:"text-center",children:_?(0,t.jsx)(v.Badge,{variant:"default",className:"bg-green-600",children:"Balanced"}):(0,t.jsxs)(v.Badge,{variant:"destructive",children:["Unbalanced (",Y>0?"+":"",Y.toFixed(2),")"]})}),(0,t.jsx)(b.TableCell,{})]})]})]})})]}),(0,t.jsx)(y.Separator,{}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>T.push(`/agency/${e}/fi/general-ledger/journal-entries`),disabled:k,children:"Cancel"}),(0,t.jsxs)(m.Button,{type:"submit",disabled:k||!_,children:[k&&(0,t.jsx)(u.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Entry"]})]})]})})}e.s(["JournalEntryForm",()=>T],866377)},199796,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(945919),a=e.i(227766),i=e.i(519455),o=e.i(967489),l=e.i(337822),c=e.i(747697),d=e.i(555436),u=e.i(975157);let m=({reportType:e,periods:m,selectedPeriodId:h,selectedAsOfDate:x,selectedFromDate:p,selectedToDate:f,basePath:g})=>{let j=(0,n.useRouter)(),[b,v]=(0,r.useState)(h?"period":p?"range":"date"),[y,w]=(0,r.useState)(h??""),[N,C]=(0,r.useState)(x?new Date(x):void 0),[S,F]=(0,r.useState)(p?new Date(p):void 0),[T,D]=(0,r.useState)(f?new Date(f):void 0);return(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Filter By"}),(0,t.jsxs)(o.Select,{value:b,onValueChange:e=>v(e),children:[(0,t.jsx)(o.SelectTrigger,{className:"w-[180px]",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"period",children:"Financial Period"}),(0,t.jsx)(o.SelectItem,{value:"date",children:"As of Date"}),("general-ledger"===e||"journal-register"===e)&&(0,t.jsx)(o.SelectItem,{value:"range",children:"Date Range"})]})]})]}),"period"===b&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Period"}),(0,t.jsxs)(o.Select,{value:y,onValueChange:w,children:[(0,t.jsx)(o.SelectTrigger,{className:"w-[250px]",children:(0,t.jsx)(o.SelectValue,{placeholder:"Select period"})}),(0,t.jsx)(o.SelectContent,{children:m.map(e=>(0,t.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),"date"===b&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"As of Date"}),(0,t.jsxs)(l.Popover,{children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",className:(0,u.cn)("w-[250px] justify-start text-left font-normal",!N&&"text-muted-foreground"),children:[(0,t.jsx)(c.CalendarIcon,{className:"mr-2 h-4 w-4"}),N?(0,s.format)(N,"PPP"):"Pick a date"]})}),(0,t.jsx)(l.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(a.Calendar,{mode:"single",selected:N,onSelect:C,initialFocus:!0})})]})]}),"range"===b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"From Date"}),(0,t.jsxs)(l.Popover,{children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",className:(0,u.cn)("w-[180px] justify-start text-left font-normal",!S&&"text-muted-foreground"),children:[(0,t.jsx)(c.CalendarIcon,{className:"mr-2 h-4 w-4"}),S?(0,s.format)(S,"PP"):"Start"]})}),(0,t.jsx)(l.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(a.Calendar,{mode:"single",selected:S,onSelect:F,initialFocus:!0})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"To Date"}),(0,t.jsxs)(l.Popover,{children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",className:(0,u.cn)("w-[180px] justify-start text-left font-normal",!T&&"text-muted-foreground"),children:[(0,t.jsx)(c.CalendarIcon,{className:"mr-2 h-4 w-4"}),T?(0,s.format)(T,"PP"):"End"]})}),(0,t.jsx)(l.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(a.Calendar,{mode:"single",selected:T,onSelect:D,initialFocus:!0})})]})]})]}),(0,t.jsxs)(i.Button,{onClick:()=>{let e=new URLSearchParams;"period"===b&&y?e.set("periodId",y):"date"===b&&N?e.set("asOfDate",(0,s.format)(N,"yyyy-MM-dd")):"range"===b&&S&&T&&(e.set("fromDate",(0,s.format)(S,"yyyy-MM-dd")),e.set("toDate",(0,s.format)(T,"yyyy-MM-dd"))),j.push(`${g}?${e.toString()}`)},children:[(0,t.jsx)(d.Search,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})};e.s(["ReportFilters",()=>m])},303281,e=>{"use strict";let t=(0,e.i(475254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],303281)},901404,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(515288),s=e.i(519455),a=e.i(784774),i=e.i(755146),o=e.i(440160),l=e.i(294918),c=e.i(178583),d=e.i(303281),u=e.i(531278),m=e.i(846696),h=e.i(931178);function x({data:e,agencyId:x,periodId:p,asOfDate:f}){let[g,j]=(0,r.useTransition)(),[b,v]=(0,r.useState)(null),y=e=>{v(e),j(async()=>{try{let t=new URLSearchParams;t.set("format",e),p&&t.set("periodId",p),f&&t.set("asOfDate",f);let r=await fetch(`/api/fi/general-ledger/reports/trial-balance/export?${t.toString()}`);if(!r.ok)throw Error("Export failed");let n=await r.blob(),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`trial-balance-${p??f}.${e}`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a),m.toast.success(`Report exported as ${e.toUpperCase()}`)}catch(e){m.toast.error("Failed to export report")}finally{v(null)}})},w=.01>Math.abs(e.totals.debit-e.totals.credit);return(0,t.jsxs)(n.Card,{className:"print:shadow-none print:border-none",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between print:hidden",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.CardTitle,{children:"Trial Balance"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.metadata?.periodName??`As of ${e.metadata?.asOfDate}`})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},children:[(0,t.jsx)(d.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",disabled:g,children:[g&&b?(0,t.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,t.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>y("csv"),children:[(0,t.jsx)(c.FileText,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>y("xlsx"),children:[(0,t.jsx)(l.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),(0,t.jsxs)(i.DropdownMenuItem,{onClick:()=>y("pdf"),children:[(0,t.jsx)(c.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})]})]}),(0,t.jsxs)("div",{className:"hidden print:block text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Trial Balance"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e.metadata?.periodName??`As of ${e.metadata?.asOfDate}`}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Generated: ",new Date(e.metadata?.generatedAt).toLocaleString()]})]}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableHeader,{children:(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableHead,{className:"w-[100px]",children:"Account Code"}),(0,t.jsx)(a.TableHead,{children:"Account Name"}),(0,t.jsx)(a.TableHead,{children:"Type"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"Debit"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"Credit"})]})}),(0,t.jsx)(a.TableBody,{children:e.accounts.map(r=>(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableCell,{className:"font-mono",children:r.accountCode}),(0,t.jsx)(a.TableCell,{children:r.accountName}),(0,t.jsx)(a.TableCell,{className:"capitalize",children:r.accountType.toLowerCase().replace("_"," ")}),(0,t.jsx)(a.TableCell,{className:"text-right",children:r.debit>0?(0,h.formatCurrency)(r.debit,e.metadata?.currency):"-"}),(0,t.jsx)(a.TableCell,{className:"text-right",children:r.credit>0?(0,h.formatCurrency)(r.credit,e.metadata?.currency):"-"})]},r.accountCode))}),(0,t.jsx)(a.TableFooter,{children:(0,t.jsxs)(a.TableRow,{className:"font-bold",children:[(0,t.jsx)(a.TableCell,{colSpan:3,children:"Total"}),(0,t.jsx)(a.TableCell,{className:"text-right",children:(0,h.formatCurrency)(e.totals.debit,e.metadata?.currency)}),(0,t.jsx)(a.TableCell,{className:"text-right",children:(0,h.formatCurrency)(e.totals.credit,e.metadata?.currency)})]})})]}),(0,t.jsx)("div",{className:`mt-4 p-4 rounded-lg ${w?"bg-green-50 dark:bg-green-950":"bg-red-50 dark:bg-red-950"}`,children:(0,t.jsx)("p",{className:`text-sm font-medium ${w?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:w?"✓ Trial balance is balanced (debits = credits)":`⚠ Trial balance is out of balance by ${(0,h.formatCurrency)(Math.abs(e.totals.debit-e.totals.credit),e.metadata?.currency)}`})})]})]})}e.s(["TrialBalanceReport",()=>x])},537904,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(519455),s=e.i(755146),a=e.i(440160),i=e.i(294918),o=e.i(178583),l=e.i(303281),c=e.i(531278),d=e.i(846696);let u=({exportEndpoint:e,reportName:u,params:m={},showPrint:h=!0,disabled:x=!1})=>{let[p,f]=(0,r.useTransition)(),[g,j]=(0,r.useState)(null),b=t=>{j(t),f(async()=>{try{let r=new URLSearchParams;r.set("format",t),Object.entries(m).forEach(([e,t])=>{t&&r.set(e,t)});let n=await fetch(`${e}?${r.toString()}`);if(!n.ok){let e=await n.json().catch(()=>({error:"Export failed"}));throw Error(e.error||"Export failed")}let s=await n.blob(),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a;let o=new Date().toISOString().split("T")[0];i.download=`${u.toLowerCase().replace(/\s+/g,"-")}-${o}.${t}`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i),d.toast.success(`Report exported as ${t.toUpperCase()}`)}catch(e){d.toast.error(e instanceof Error?e.message:"Failed to export report")}finally{j(null)}})};return(0,t.jsxs)("div",{className:"flex gap-2 print:hidden",children:[h&&(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},disabled:x,children:[(0,t.jsx)(l.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,t.jsxs)(s.DropdownMenu,{children:[(0,t.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",disabled:x||p,children:[p&&g?(0,t.jsx)(c.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,t.jsx)(a.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,t.jsxs)(s.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(s.DropdownMenuItem,{onClick:()=>b("csv"),children:[(0,t.jsx)(o.FileText,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,t.jsxs)(s.DropdownMenuItem,{onClick:()=>b("xlsx"),children:[(0,t.jsx)(i.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),(0,t.jsxs)(s.DropdownMenuItem,{onClick:()=>b("pdf"),children:[(0,t.jsx)(o.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})]})},m=({title:e,subtitle:r,exportEndpoint:n,reportName:s,params:a})=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between print:hidden",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:e}),r&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r})]}),(0,t.jsx)(u,{exportEndpoint:n,reportName:s,params:a})]}),h=({title:e,subtitle:r,generatedAt:n})=>{let s=n?new Date(n).toLocaleString():new Date().toLocaleString();return(0,t.jsxs)("div",{className:"hidden print:block text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:e}),r&&(0,t.jsx)("p",{className:"text-muted-foreground",children:r}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Generated: ",s]})]})};e.s(["ReportExportButton",()=>u,"ReportHeader",()=>m,"ReportPrintHeader",()=>h])},416233,e=>{"use strict";var t=e.i(95187);let r=(0,t.createServerReference)("40d1468c05ee3b0d35ae90530577cde053b3acdae2",t.callServer,void 0,t.findSourceMapURL,"createFinancialPeriod");e.s(["createFinancialPeriod",()=>r])},890557,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(846696),a=e.i(515288),i=e.i(519455),o=e.i(168148),l=e.i(793479),c=e.i(629288),d=e.i(967489),u=e.i(699375),m=e.i(487486),h=e.i(531278),x=e.i(269638),p=e.i(972520),f=e.i(871689),g=e.i(39312),j=e.i(475254);let b=(0,j.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var v=e.i(350627);let y=(0,j.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var w=e.i(95187);let N=(0,w.createServerReference)("606c7b8d6fe347a04230db1dbd860adb1641ccc214",w.callServer,void 0,w.findSourceMapURL,"applyTemplate"),C=(0,w.createServerReference)("4082a7cddd12f558a23615c11447210af09d5aa3e2",w.callServer,void 0,w.findSourceMapURL,"initializeGLConfiguration");var S=e.i(416233);let F=(0,w.createServerReference)("404030d5a8a87f718fbcdccd004ffa6e553769deb2",w.callServer,void 0,w.findSourceMapURL,"applyDefaultPostingRules");var T=e.i(681307);let D=T.z.enum(["INPUT","OUTPUT","WITHHOLDING","EXEMPT"]),M=T.z.enum(["MONTHLY","QUARTERLY","ANNUAL"]),k=T.z.object({code:T.z.string().min(1).max(10).regex(/^[A-Z0-9_-]+$/i,"Code must be alphanumeric"),name:T.z.string().min(1).max(100),description:T.z.string().max(500).optional(),rate:T.z.number().min(0).max(100),type:D,accountId:T.z.uuid(),reverseChargeAccountId:T.z.string().uuid().optional(),isDefault:T.z.boolean().default(!1),isActive:T.z.boolean().default(!0),effectiveFrom:T.z.coerce.date().optional(),effectiveTo:T.z.coerce.date().optional()});k.partial().extend({id:T.z.uuid()}),T.z.object({enabled:T.z.boolean().default(!1),inputVATAccountId:T.z.string().uuid().nullable().optional(),outputVATAccountId:T.z.string().uuid().nullable().optional(),withholdingTaxAccountId:T.z.string().uuid().nullable().optional(),taxClearingAccountId:T.z.string().uuid().nullable().optional(),taxPayableAccountId:T.z.string().uuid().nullable().optional(),taxReceivableAccountId:T.z.string().uuid().nullable().optional(),taxPeriod:M.default("MONTHLY"),taxCodes:T.z.array(k).default([]),autoApplyDefaultTax:T.z.boolean().default(!1),requireTaxOnInvoice:T.z.boolean().default(!1),calculateTaxInclusive:T.z.boolean().default(!1)}),T.z.object({periodId:T.z.uuid(),clearingDate:T.z.coerce.date(),description:T.z.string().max(200).optional(),clearInputVAT:T.z.boolean().default(!0),clearOutputVAT:T.z.boolean().default(!0),clearWithholding:T.z.boolean().default(!1),netToPayable:T.z.boolean().default(!0)}),T.z.object({amount:T.z.number(),taxCodeId:T.z.string(),isInclusive:T.z.boolean().default(!1)}),T.z.object({periodId:T.z.string().uuid().optional(),fromDate:T.z.coerce.date().optional(),toDate:T.z.coerce.date().optional(),taxType:D.optional(),taxCodes:T.z.array(T.z.string()).optional(),format:T.z.enum(["SCREEN","PDF","EXCEL","CSV"]).default("SCREEN")});let A=Object.entries({SIMPLE_VAT:{name:"Simple VAT",description:"Standard input/output VAT setup",codes:[{code:"VAT_IN",name:"Input VAT",type:"INPUT",rate:0},{code:"VAT_OUT",name:"Output VAT",type:"OUTPUT",rate:0}]},GST:{name:"GST",description:"Goods and Services Tax setup",codes:[{code:"GST_IN",name:"GST Input",type:"INPUT",rate:0},{code:"GST_OUT",name:"GST Output",type:"OUTPUT",rate:0},{code:"GST_EXEMPT",name:"GST Exempt",type:"EXEMPT",rate:0}]},SALES_TAX:{name:"Sales Tax",description:"US-style sales tax setup",codes:[{code:"SALES_TAX",name:"Sales Tax",type:"OUTPUT",rate:0},{code:"USE_TAX",name:"Use Tax",type:"INPUT",rate:0}]},WITHHOLDING:{name:"Withholding Tax",description:"Income withholding tax setup",codes:[{code:"WHT",name:"Withholding Tax",type:"WITHHOLDING",rate:0}]},NONE:{name:"No Tax",description:"No tax management",codes:[]}}).map(([e,t])=>({id:e,...t})),I=[{id:"company",title:"Company Info",description:"Configure basic settings"},{id:"coa",title:"Chart of Accounts",description:"Select a template"},{id:"periods",title:"Financial Periods",description:"Set up periods"},{id:"tax",title:"Tax Settings",description:"Configure tax accounts",optional:!0},{id:"posting",title:"Posting Rules",description:"Set default posting rules",optional:!0},{id:"review",title:"Review & Finish",description:"Confirm your settings"}],P=[{id:"standard",name:"General Business",coaTemplate:"standard"},{id:"service",name:"Professional Services",coaTemplate:"service-business"},{id:"agency",name:"Agency / Creative",coaTemplate:"agency"},{id:"retail",name:"Retail / Trading",coaTemplate:"standard"},{id:"manufacturing",name:"Manufacturing",coaTemplate:"standard"},{id:"minimal",name:"Simple / Minimal",coaTemplate:"minimal"}],R=({agencyId:e})=>{let l=(0,n.useRouter)(),[c,d]=(0,r.useState)(null),[u,j]=(0,r.useState)("company"),[v,y]=(0,r.useTransition)(),[w,T]=(0,r.useState)({baseCurrency:"USD",fiscalYearStart:"01-01",fiscalYearEnd:"12-31",requireApproval:!0,businessType:"standard",coaTemplate:"standard",startYear:new Date().getFullYear(),numberOfYears:2,enableTax:!1,taxPreset:null,applyDefaultPostingRules:!0}),D="express"===c?I.filter(e=>!e.optional):I,M=D.findIndex(e=>e.id===u),k=(M+1)/D.length*100;return c?(0,t.jsxs)(a.Card,{className:"max-w-2xl",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{children:"GL Setup Wizard"}),(0,t.jsx)(a.CardDescription,{children:"Complete these steps to set up your General Ledger"})]}),(0,t.jsxs)(m.Badge,{variant:"outline",className:"capitalize",children:[c," setup"]})]}),(0,t.jsx)(o.Progress,{value:k,className:"mt-4"}),(0,t.jsx)("div",{className:"flex justify-between mt-2 text-sm text-muted-foreground",children:D.map((e,r)=>(0,t.jsx)("span",{className:r<=M?"text-primary font-medium":"",children:e.title},e.id))})]}),(0,t.jsxs)(a.CardContent,{children:["company"===u&&(0,t.jsx)(E,{data:w,onUpdate:e=>T(t=>({...t,...e}))}),"coa"===u&&(0,t.jsx)(L,{data:w,onUpdate:e=>T(t=>({...t,...e}))}),"periods"===u&&(0,t.jsx)(O,{data:w,onUpdate:e=>T(t=>({...t,...e}))}),"tax"===u&&(0,t.jsx)(_,{data:w,onUpdate:e=>T(t=>({...t,...e}))}),"posting"===u&&(0,t.jsx)(Y,{data:w,onUpdate:e=>T(t=>({...t,...e}))}),"review"===u&&(0,t.jsx)(z,{data:w,setupMode:c})]}),(0,t.jsxs)(a.CardFooter,{className:"flex justify-between",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>{j(D[Math.max(M-1,0)].id)},disabled:0===M||v,children:[(0,t.jsx)(f.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Previous"]}),"review"===u?(0,t.jsx)(i.Button,{onClick:()=>{y(async()=>{try{let t=await C({baseCurrency:w.baseCurrency,fiscalYearStart:w.fiscalYearStart,fiscalYearEnd:w.fiscalYearEnd,requireApproval:w.requireApproval,useControlAccounts:!0,autoPostingEnabled:!1,allowFuturePeriodPost:!1,allowClosedPeriodPost:!1,consolidationEnabled:!1,consolidationMethod:"FULL",eliminateIntercompany:!1,autoCreatePeriods:!1,periodLockDays:0,accountCodeFormat:"",accountCodeLength:0,accountCodeSeparator:"",erpIntegrationEnabled:!1,retainAuditDays:0});if(!t.success)return void s.toast.error(t.error);let r=await N(w.coaTemplate,{includeSystemAccounts:!0});if(!r.success)return void s.toast.error(r.error);for(let e=w.startYear;e<w.startYear+w.numberOfYears;e++)for(let t=1;t<=12;t++){let r=new Date(e,t-1,1),n=new Date(e,t,0),a=await (0,S.createFinancialPeriod)({name:`${e}-${String(t).padStart(2,"0")}`,periodType:"MONTH",fiscalYear:e,fiscalPeriod:t,startDate:r,endDate:n,isYearEnd:12===t});if(!a.success)return void s.toast.error(a.error)}w.applyDefaultPostingRules&&((await F()).success||s.toast.warning("Posting rules setup incomplete. You can configure them in Settings.")),s.toast.success("GL setup completed successfully!"),l.push(`/agency/${e}/fi/general-ledger`),l.refresh()}catch(e){s.toast.error("Failed to complete GL setup")}})},disabled:v,children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.CheckCircle,{className:"mr-2 h-4 w-4"}),"Complete Setup"]})}):(0,t.jsxs)(i.Button,{onClick:()=>{let e=Math.min(M+1,D.length-1);j(D[e].id)},disabled:v,children:["Next",(0,t.jsx)(p.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]}):(0,t.jsxs)(a.Card,{className:"max-w-2xl",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"GL Setup Wizard"}),(0,t.jsx)(a.CardDescription,{children:"Choose how you want to set up your General Ledger"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:()=>{d("express"),T(e=>({...e,requireApproval:!0,coaTemplate:"standard",numberOfYears:2,enableTax:!1,applyDefaultPostingRules:!0}))},className:"w-full p-6 rounded-lg border-2 border-primary/20 hover:border-primary hover:bg-primary/5 transition-all text-left group",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:(0,t.jsx)(g.Zap,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Express Setup"}),(0,t.jsx)(m.Badge,{variant:"secondary",children:"Recommended"})]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Get started quickly with sensible defaults. Perfect for most businesses. You can customize everything later."}),(0,t.jsxs)("ul",{className:"mt-3 text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"• Standard chart of accounts"}),(0,t.jsx)("li",{children:"• Recommended posting rules applied"}),(0,t.jsx)("li",{children:"• 2 years of monthly periods"})]})]})]})}),(0,t.jsx)("button",{onClick:()=>d("custom"),className:"w-full p-6 rounded-lg border hover:border-primary/50 hover:bg-accent transition-all text-left",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-muted",children:(0,t.jsx)(b,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Custom Setup"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Full control over all settings including tax configuration and posting rules."})]})]})})]})]})};function E({data:e,onUpdate:r}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Base Currency"}),(0,t.jsxs)(d.Select,{value:e.baseCurrency,onValueChange:e=>r({baseCurrency:e}),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsx)(d.SelectContent,{children:[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"MYR",name:"Malaysian Ringgit"},{code:"SGD",name:"Singapore Dollar"}].map(e=>(0,t.jsxs)(d.SelectItem,{value:e.code,children:[e.code," - ",e.name]},e.code))})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will be your primary reporting currency"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Fiscal Year Start"}),(0,t.jsx)(l.Input,{value:e.fiscalYearStart,onChange:e=>r({fiscalYearStart:e.target.value}),placeholder:"01-01"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Format: MM-DD"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Fiscal Year End"}),(0,t.jsx)(l.Input,{value:e.fiscalYearEnd,onChange:e=>r({fiscalYearEnd:e.target.value}),placeholder:"12-31"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Format: MM-DD"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Require Approval"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Journal entries require approval before posting"})]}),(0,t.jsx)(u.Switch,{checked:e.requireApproval,onCheckedChange:e=>r({requireApproval:e})})]})]})}function L({data:e,onUpdate:r}){return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select your business type to get an industry-appropriate chart of accounts"}),(0,t.jsx)(c.RadioGroup,{value:e.businessType,onValueChange:e=>{let t=P.find(t=>t.id===e);r({businessType:e,coaTemplate:t?.coaTemplate??"standard"})},className:"grid gap-3",children:P.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.RadioGroupItem,{value:e.id,id:e.id}),(0,t.jsx)("label",{htmlFor:e.id,className:"flex flex-1 cursor-pointer items-center justify-between rounded-lg border p-4 hover:bg-accent",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Uses ",e.coaTemplate," template"]})]})})]},e.id))})]})}function O({data:e,onUpdate:r}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Starting Year"}),(0,t.jsx)(l.Input,{type:"number",value:e.startYear,onChange:e=>r({startYear:parseInt(e.target.value)}),min:2020,max:2030}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"The first year to create financial periods for"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Number of Years"}),(0,t.jsxs)(d.Select,{value:e.numberOfYears.toString(),onValueChange:e=>r({numberOfYears:parseInt(e)}),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"1",children:"1 Year (12 periods)"}),(0,t.jsx)(d.SelectItem,{value:"2",children:"2 Years (24 periods)"}),(0,t.jsx)(d.SelectItem,{value:"3",children:"3 Years (36 periods)"}),(0,t.jsx)(d.SelectItem,{value:"5",children:"5 Years (60 periods)"})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Monthly periods will be created for each year"})]})]})}function z({data:e,setupMode:r}){let n=P.find(t=>t.id===e.businessType),s=e.taxPreset?A.find(t=>t.id===e.taxPreset):null;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please review your settings before completing the setup:"}),(0,t.jsxs)("div",{className:"rounded-lg border p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Setup Mode"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:r})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Base Currency"}),(0,t.jsx)("span",{className:"font-medium",children:e.baseCurrency})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Fiscal Year"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.fiscalYearStart," to ",e.fiscalYearEnd]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Require Approval"}),(0,t.jsx)("span",{className:"font-medium",children:e.requireApproval?"Yes":"No"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Business Type"}),(0,t.jsx)("span",{className:"font-medium",children:n?.name??e.businessType})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"COA Template"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:e.coaTemplate.replace("-"," ")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Periods"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.startYear," - ",e.startYear+e.numberOfYears-1," (",12*e.numberOfYears," ","periods)"]})]}),"custom"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tax Setup"}),(0,t.jsx)("span",{className:"font-medium",children:e.enableTax?s?.name??"Custom":"Skipped"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Default Posting Rules"}),(0,t.jsx)("span",{className:"font-medium",children:e.applyDefaultPostingRules?"Applied":"Skipped"})]})]})]}),(0,t.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("strong",{children:"Note:"})," After setup, you can add more accounts and periods, but some settings like base currency cannot be changed after transactions are posted."]})})]})}function _({data:e,onUpdate:r}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,t.jsx)(v.Receipt,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Enable Tax Management"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Set up tax accounts and posting configurations"})]})]}),(0,t.jsx)(u.Switch,{checked:e.enableTax,onCheckedChange:e=>r({enableTax:e,taxPreset:e?"simple":null})})]}),e.enableTax&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a tax preset to quickly configure tax accounts"}),(0,t.jsx)(c.RadioGroup,{value:e.taxPreset??"",onValueChange:e=>r({taxPreset:e}),className:"grid gap-3",children:A.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.RadioGroupItem,{value:e.id,id:`tax-${e.id}`}),(0,t.jsx)("label",{htmlFor:`tax-${e.id}`,className:"flex flex-1 cursor-pointer items-center justify-between rounded-lg border p-4 hover:bg-accent",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})})]},e.id))}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can customize tax codes and accounts after setup in Settings → Tax Configuration"})]})]})}function Y({data:e,onUpdate:r}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,t.jsx)(y,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Apply Default Posting Rules"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically configure rules for forex, rounding, and discrepancies"})]})]}),(0,t.jsx)(u.Switch,{checked:e.applyDefaultPostingRules,onCheckedChange:e=>r({applyDefaultPostingRules:e})})]}),e.applyDefaultPostingRules&&(0,t.jsxs)("div",{className:"rounded-lg border p-4 space-y-3",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Default rules that will be applied:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:"Forex Realized Gain/Loss posting"})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:"Forex Unrealized Gain/Loss posting"})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:"Payment discrepancy handling"})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:"Rounding difference allocation"})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:"Cash clearing rules"})]})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can customize posting rules after setup in Settings → Posting Rules"})]})}R.displayName="GLSetupWizard",e.s(["GLSetupWizard",()=>R],890557)},642167,e=>{"use strict";var t=e.i(95187);let r=(0,t.createServerReference)("4035d595559932637460e183d4645d5fba4e4973dc",t.callServer,void 0,t.findSourceMapURL,"updateGLConfiguration");e.s(["updateGLConfiguration",()=>r])},804683,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(653145),s=e.i(994814),a=e.i(681307),i=e.i(846696),o=e.i(642167),l=e.i(95187);let c=(0,l.createServerReference)("402088cbcc19d7eb6cf62eb1644f3109edc1c66240",l.callServer,void 0,l.findSourceMapURL,"updateBaseCurrency"),d=(0,l.createServerReference)("60d1dd7f780ced21cf879e9d7aefa798ed9767b178",l.callServer,void 0,l.findSourceMapURL,"updateFiscalYear"),u=(0,l.createServerReference)("408627094323c3da03939125ab92077c6dbe885487",l.callServer,void 0,l.findSourceMapURL,"updateApprovalSettings"),m=(0,l.createServerReference)("40138128b985e606268f67c04881579b303ff20e91",l.callServer,void 0,l.findSourceMapURL,"updateConsolidationSettings"),h=(0,l.createServerReference)("40f1c4ce5b382577731ec1e8519ac2736f4dafef6a",l.callServer,void 0,l.findSourceMapURL,"updateAccountCodeFormat"),x=(0,l.createServerReference)("40340cc23f41fe43d7a127f9cd593f31162b0cd501",l.callServer,void 0,l.findSourceMapURL,"updateERPIntegration"),p=(0,l.createServerReference)("402d7c7d5f557914f2c438bc7dc7cfeece83a6332c",l.callServer,void 0,l.findSourceMapURL,"updateSubAccountConfiguration");var f=e.i(903133),g=e.i(793479),j=e.i(519455),b=e.i(699375),v=e.i(967489),y=e.i(531278);let w=a.z.object({accountCodeFormat:a.z.string().min(1,"Format is required"),accountCodeLength:a.z.number().min(4).max(16)}),N=a.z.object({useControlAccounts:a.z.boolean()}),C=a.z.object({retainAuditDays:a.z.number().min(90).max(3650)}),S=a.z.object({fiscalYearStart:a.z.string().regex(/^\d{2}-\d{2}$/,"Use MM-DD format"),fiscalYearEnd:a.z.string().regex(/^\d{2}-\d{2}$/,"Use MM-DD format"),autoCreatePeriods:a.z.boolean(),periodLockDays:a.z.number().min(0).max(30)}),F=a.z.object({baseCurrency:a.z.string().length(3,"Must be 3-letter currency code")}),T=a.z.object({consolidationMethod:a.z.enum(["FULL","PROPORTIONAL","EQUITY"]),eliminateIntercompany:a.z.boolean()}),D=a.z.object({requireApproval:a.z.boolean(),approvalThreshold:a.z.number().min(0).optional(),autoPostingEnabled:a.z.boolean(),allowFuturePeriodPost:a.z.boolean(),allowClosedPeriodPost:a.z.boolean()}),M=a.z.object({isIndependent:a.z.boolean(),baseCurrency:a.z.string().length(3).optional(),fiscalYearStart:a.z.string().regex(/^\d{2}-\d{2}$/).optional(),fiscalYearEnd:a.z.string().regex(/^\d{2}-\d{2}$/).optional(),requireApproval:a.z.boolean().optional(),approvalThreshold:a.z.number().min(0).optional(),autoPostingEnabled:a.z.boolean().optional(),accountCodeFormat:a.z.string().optional(),accountCodeLength:a.z.number().min(4).max(16).optional()}),k={accountCode:w,controlAccounts:N,audit:C,fiscalYear:S,currency:F,consolidation:T,posting:D,erp:a.z.object({erpIntegrationEnabled:a.z.boolean(),erpSystemType:a.z.string().optional(),erpApiUrl:a.z.string().url().optional().or(a.z.literal(""))}),subAccountConfig:M},A=({section:e,initialData:a,disabled:l})=>{let[g,b]=(0,r.useTransition)(),v=k[e],w=(0,n.useForm)({resolver:(0,s.zodResolver)(v),defaultValues:a});return(0,t.jsx)(f.Form,{...w,children:(0,t.jsxs)("form",{onSubmit:w.handleSubmit(t=>{b(async()=>{try{let r;switch(e){case"accountCode":r=await h(t);break;case"fiscalYear":(r=await d(t.fiscalYearStart,t.fiscalYearEnd)).success&&(r=await (0,o.updateGLConfiguration)({autoCreatePeriods:t.autoCreatePeriods,periodLockDays:t.periodLockDays}));break;case"currency":r=await c(t.baseCurrency);break;case"consolidation":r=await m(t);break;case"posting":r=await u(t);break;case"erp":r=await x(t);break;case"subAccountConfig":r=await p(t);break;default:r=await (0,o.updateGLConfiguration)(t)}r.success?i.toast.success("Settings updated successfully"):i.toast.error(r.error??"Failed to update settings")}catch(e){i.toast.error("An error occurred while updating settings")}})}),className:"space-y-4",children:["accountCode"===e&&(0,t.jsx)(I,{form:w,disabled:l}),"controlAccounts"===e&&(0,t.jsx)(P,{form:w,disabled:l}),"audit"===e&&(0,t.jsx)(R,{form:w,disabled:l}),"fiscalYear"===e&&(0,t.jsx)(E,{form:w,disabled:l}),"currency"===e&&(0,t.jsx)(L,{form:w,disabled:l}),"consolidation"===e&&(0,t.jsx)(O,{form:w,disabled:l}),"posting"===e&&(0,t.jsx)(z,{form:w,disabled:l}),"erp"===e&&(0,t.jsx)(_,{form:w,disabled:l}),"subAccountConfig"===e&&(0,t.jsx)(Y,{form:w,disabled:l}),(0,t.jsxs)(j.Button,{type:"submit",disabled:l||g,children:[g&&(0,t.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})})};function I({form:e,disabled:r}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"accountCodeFormat",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Account Code Format"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"####-####",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Use # for digits, - or . as separators (e.g., ####-####)"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"accountCodeLength",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Account Code Length"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value)),disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Number of digits (4-16)"}),(0,t.jsx)(f.FormMessage,{})]})})]})}function P({form:e,disabled:r}){return(0,t.jsx)(f.FormField,{control:e.control,name:"useControlAccounts",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Use Control Accounts"}),(0,t.jsx)(f.FormDescription,{children:"Enable control accounts for AR, AP, and other subledgers"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})})}function R({form:e,disabled:r}){return(0,t.jsx)(f.FormField,{control:e.control,name:"retainAuditDays",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Audit Trail Retention (Days)"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value)),disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Number of days to retain audit trail records (90-3650)"}),(0,t.jsx)(f.FormMessage,{})]})})}function E({form:e,disabled:r}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(f.FormField,{control:e.control,name:"fiscalYearStart",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Fiscal Year Start"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"01-01",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Format: MM-DD"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"fiscalYearEnd",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Fiscal Year End"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"12-31",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Format: MM-DD"}),(0,t.jsx)(f.FormMessage,{})]})})]}),(0,t.jsx)(f.FormField,{control:e.control,name:"autoCreatePeriods",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Auto-Create Periods"}),(0,t.jsx)(f.FormDescription,{children:"Automatically create periods for new fiscal years"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"periodLockDays",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Period Lock (Days After Close)"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value)),disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Days after month-end before period is locked"}),(0,t.jsx)(f.FormMessage,{})]})})]})}function L({form:e,disabled:r}){let n=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"},{code:"CAD",name:"Canadian Dollar"},{code:"AUD",name:"Australian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SGD",name:"Singapore Dollar"},{code:"MYR",name:"Malaysian Ringgit"}];return(0,t.jsx)(f.FormField,{control:e.control,name:"baseCurrency",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Base Currency"}),(0,t.jsxs)(v.Select,{onValueChange:e.onChange,defaultValue:e.value,disabled:r,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"Select currency"})})}),(0,t.jsx)(v.SelectContent,{children:n.map(e=>(0,t.jsxs)(v.SelectItem,{value:e.code,children:[e.code," - ",e.name]},e.code))})]}),(0,t.jsx)(f.FormDescription,{children:"This cannot be changed after transactions are posted"}),(0,t.jsx)(f.FormMessage,{})]})})}function O({form:e,disabled:r}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"consolidationMethod",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Consolidation Method"}),(0,t.jsxs)(v.Select,{onValueChange:e.onChange,defaultValue:e.value,disabled:r,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"Select method"})})}),(0,t.jsxs)(v.SelectContent,{children:[(0,t.jsx)(v.SelectItem,{value:"FULL",children:"Full Consolidation"}),(0,t.jsx)(v.SelectItem,{value:"PROPORTIONAL",children:"Proportional Consolidation"}),(0,t.jsx)(v.SelectItem,{value:"EQUITY",children:"Equity Method"})]})]}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"eliminateIntercompany",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Eliminate Intercompany"}),(0,t.jsx)(f.FormDescription,{children:"Automatically eliminate intercompany transactions during consolidation"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})})]})}function z({form:e,disabled:r}){let n=e.watch("requireApproval");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"requireApproval",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Require Approval"}),(0,t.jsx)(f.FormDescription,{children:"Journal entries require approval before posting"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),n&&(0,t.jsx)(f.FormField,{control:e.control,name:"approvalThreshold",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Approval Threshold Amount"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseFloat(t.target.value)||0),disabled:r,placeholder:"0.00"})}),(0,t.jsx)(f.FormDescription,{children:"Entries above this amount require approval (0 = all entries)"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"autoPostingEnabled",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Auto-Posting"}),(0,t.jsx)(f.FormDescription,{children:"Automatically post approved entries"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"allowFuturePeriodPost",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Allow Future Period Posting"}),(0,t.jsx)(f.FormDescription,{children:"Allow posting to periods that haven't started"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"allowClosedPeriodPost",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Allow Closed Period Posting"}),(0,t.jsx)(f.FormDescription,{children:"Allow posting to closed periods (requires special permission)"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})})]})}function _({form:e,disabled:r}){let n=e.watch("erpIntegrationEnabled");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"erpIntegrationEnabled",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Enable ERP Integration"}),(0,t.jsx)(f.FormDescription,{children:"Connect to external ERP systems for data sync"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"erpSystemType",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"ERP System"}),(0,t.jsxs)(v.Select,{onValueChange:e.onChange,defaultValue:e.value,disabled:r,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"Select ERP system"})})}),(0,t.jsxs)(v.SelectContent,{children:[(0,t.jsx)(v.SelectItem,{value:"SAP",children:"SAP"}),(0,t.jsx)(v.SelectItem,{value:"ORACLE",children:"Oracle"}),(0,t.jsx)(v.SelectItem,{value:"NETSUITE",children:"NetSuite"}),(0,t.jsx)(v.SelectItem,{value:"DYNAMICS",children:"Microsoft Dynamics"}),(0,t.jsx)(v.SelectItem,{value:"QUICKBOOKS",children:"QuickBooks"}),(0,t.jsx)(v.SelectItem,{value:"XERO",children:"Xero"}),(0,t.jsx)(v.SelectItem,{value:"OTHER",children:"Other"})]})]}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"erpApiUrl",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"API URL"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"https://api.erp-system.com",disabled:r})}),(0,t.jsx)(f.FormMessage,{})]})})]})]})}function Y({form:e,disabled:r}){let n=e.watch("isIndependent"),s=e.watch("requireApproval"),a=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"},{code:"CAD",name:"Canadian Dollar"},{code:"AUD",name:"Australian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SGD",name:"Singapore Dollar"},{code:"MYR",name:"Malaysian Ringgit"}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"isIndependent",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border border-primary/20 bg-primary/5 p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base font-semibold",children:"Independent Configuration"}),(0,t.jsx)(f.FormDescription,{children:"Enable to use separate GL settings for this SubAccount (like SAP SKA1/SKB1 pattern). When disabled, settings are inherited from Agency with optional overrides."})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),(0,t.jsxs)("div",{className:`space-y-4 ${!n?"opacity-75":""}`,children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:n?"✓ Full independent configuration (not inherited from Agency)":"↳ Override settings (empty fields inherit from Agency)"}),(0,t.jsx)(f.FormField,{control:e.control,name:"baseCurrency",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsxs)(f.FormLabel,{children:["Base Currency ",!n&&"(Override)"]}),(0,t.jsxs)(v.Select,{onValueChange:e.onChange,defaultValue:e.value,disabled:r,children:[(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:n?"Select currency":"Use Agency currency"})})}),(0,t.jsx)(v.SelectContent,{children:a.map(e=>(0,t.jsxs)(v.SelectItem,{value:e.code,children:[e.code," - ",e.name]},e.code))})]}),(0,t.jsx)(f.FormDescription,{children:n?"Base currency for this SubAccount":"Leave empty to use Agency base currency"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(f.FormField,{control:e.control,name:"fiscalYearStart",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Fiscal Year Start"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"01-01",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Format: MM-DD"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"fiscalYearEnd",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Fiscal Year End"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"12-31",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Format: MM-DD"}),(0,t.jsx)(f.FormMessage,{})]})})]}),(0,t.jsx)(f.FormField,{control:e.control,name:"requireApproval",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Require Approval"}),(0,t.jsx)(f.FormDescription,{children:"Journal entries require approval before posting"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),s&&(0,t.jsx)(f.FormField,{control:e.control,name:"approvalThreshold",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Approval Threshold Amount"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseFloat(t.target.value)||0),disabled:r,placeholder:"0.00"})}),(0,t.jsx)(f.FormDescription,{children:"Entries above this amount require approval (0 = all entries)"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"autoPostingEnabled",render:({field:e})=>(0,t.jsxs)(f.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(f.FormLabel,{className:"text-base",children:"Auto-Posting"}),(0,t.jsx)(f.FormDescription,{children:"Automatically post approved entries"})]}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(b.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:r})})]})}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.FormField,{control:e.control,name:"accountCodeFormat",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Account Code Format"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{...e,placeholder:"####-####",disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Use # for digits, - or . as separators"}),(0,t.jsx)(f.FormMessage,{})]})}),(0,t.jsx)(f.FormField,{control:e.control,name:"accountCodeLength",render:({field:e})=>(0,t.jsxs)(f.FormItem,{children:[(0,t.jsx)(f.FormLabel,{children:"Account Code Length"}),(0,t.jsx)(f.FormControl,{children:(0,t.jsx)(g.Input,{type:"number",...e,onChange:t=>e.onChange(parseInt(t.target.value)),disabled:r})}),(0,t.jsx)(f.FormDescription,{children:"Number of digits (4-16)"}),(0,t.jsx)(f.FormMessage,{})]})})]})]})]})}A.displayName="GLSettingsForm",e.s(["GLSettingsForm",()=>A],804683)},927441,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(784774),a=e.i(519455),i=e.i(487486),o=e.i(699375),l=e.i(755146),c=e.i(868499),d=e.i(846696),u=e.i(541071),m=e.i(788699),h=e.i(727612),x=e.i(174886),p=e.i(431343),f=e.i(475254);let g=(0,f.default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),j=(0,f.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]);var b=e.i(16715);let v=(0,f.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var y=e.i(487074),w=e.i(39312);let N=(0,f.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var C=e.i(95187);let S=(0,C.createServerReference)("40ccf4ceb1932729c606fdbaa618b2f24c34d813b8",C.callServer,void 0,C.findSourceMapURL,"updatePostingRule"),F=(0,C.createServerReference)("407a09f403e9d8b83a61c2f9aadf2e6a9763960c8b",C.callServer,void 0,C.findSourceMapURL,"deletePostingRule"),T={FOREX:(0,t.jsx)(g,{className:"h-3.5 w-3.5"}),ROUNDING:(0,t.jsx)(j,{className:"h-3.5 w-3.5"}),DISCREPANCY:(0,t.jsx)(b.RefreshCw,{className:"h-3.5 w-3.5"}),TAX:(0,t.jsx)(v,{className:"h-3.5 w-3.5"}),CLEARING:(0,t.jsx)(y.PiggyBank,{className:"h-3.5 w-3.5"}),ALLOCATION:(0,t.jsx)(w.Zap,{className:"h-3.5 w-3.5"}),CUSTOM:(0,t.jsx)(N,{className:"h-3.5 w-3.5"})},D={FOREX:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",ROUNDING:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",DISCREPANCY:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",TAX:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",CLEARING:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",ALLOCATION:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300",CUSTOM:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},M=({rules:e,accounts:f,canEdit:g,agencyId:j})=>{let b=(0,n.useRouter)(),[v,y]=(0,r.useTransition)(),[w,N]=(0,r.useState)(null),C=async e=>{g&&y(async()=>{let t=await S({id:e.id,isActive:!e.isActive});t.success?(d.toast.success(`Rule ${e.isActive?"disabled":"enabled"}`),b.refresh()):d.toast.error(t.error||"Failed to update rule")})},M=async e=>{g&&y(async()=>{let t=await S({id:e.id,autoPost:!e.autoPost});t.success?(d.toast.success(`Auto-post ${e.autoPost?"disabled":"enabled"}`),b.refresh()):d.toast.error(t.error||"Failed to update rule")})},k=async()=>{w&&g&&y(async()=>{let e=await F(w);e.success?(d.toast.success("Rule deleted"),b.refresh()):d.toast.error(e.error||"Failed to delete rule"),N(null)})},A=(e,t)=>{if(t)return`${t.code} - ${t.name}`;let r=f.find(t=>t?.id===e);return r?`${r.code} - ${r.name}`:e};return 0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)("p",{children:"No posting rules configured yet."}),g&&(0,t.jsx)("p",{className:"text-sm mt-2",children:"Create a new rule or use a template to get started."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHeader,{children:(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableHead,{className:"w-10",children:"#"}),(0,t.jsx)(s.TableHead,{children:"Rule"}),(0,t.jsx)(s.TableHead,{children:"Category"}),(0,t.jsx)(s.TableHead,{children:"Source"}),(0,t.jsx)(s.TableHead,{children:"Debit Account"}),(0,t.jsx)(s.TableHead,{children:"Credit Account"}),(0,t.jsx)(s.TableHead,{className:"text-center",children:"Active"}),(0,t.jsx)(s.TableHead,{className:"text-center",children:"Auto-Post"}),(0,t.jsx)(s.TableHead,{className:"w-10"})]})}),(0,t.jsx)(s.TableBody,{children:e.map((e,r)=>(0,t.jsxs)(s.TableRow,{className:v?"opacity-50":"",children:[(0,t.jsx)(s.TableCell,{className:"font-mono text-muted-foreground",children:e.priority}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:e.code})]})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)(i.Badge,{variant:"secondary",className:`flex items-center gap-1 w-fit ${D[e.category]}`,children:[T[e.category],e.category]})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)("span",{className:"text-sm",children:e.sourceModule})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)("span",{className:"text-sm font-mono",children:A(e.debitAccountId,e.DebitAccount)})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)("span",{className:"text-sm font-mono",children:A(e.creditAccountId,e.CreditAccount)})}),(0,t.jsx)(s.TableCell,{className:"text-center",children:(0,t.jsx)(o.Switch,{checked:e.isActive,onCheckedChange:()=>C(e),disabled:!g||v})}),(0,t.jsx)(s.TableCell,{className:"text-center",children:(0,t.jsx)(o.Switch,{checked:e.autoPost,onCheckedChange:()=>M(e),disabled:!g||v})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",disabled:v,children:(0,t.jsx)(u.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>b.push(`/agency/${j}/fi/general-ledger/settings/posting-rules/${e.id}`),children:[(0,t.jsx)(m.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>b.push(`/agency/${j}/fi/general-ledger/settings/posting-rules/new?clone=${e.id}`),children:[(0,t.jsx)(x.Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,t.jsxs)(l.DropdownMenuItem,{children:[(0,t.jsx)(p.Play,{className:"mr-2 h-4 w-4"}),"Test Rule"]}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.DropdownMenuSeparator,{}),(0,t.jsxs)(l.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>N(e.id),children:[(0,t.jsx)(h.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},e.id))})]}),(0,t.jsx)(c.AlertDialog,{open:!!w,onOpenChange:()=>N(null),children:(0,t.jsxs)(c.AlertDialogContent,{children:[(0,t.jsxs)(c.AlertDialogHeader,{children:[(0,t.jsx)(c.AlertDialogTitle,{children:"Delete Posting Rule"}),(0,t.jsx)(c.AlertDialogDescription,{children:"Are you sure you want to delete this posting rule? This action cannot be undone."})]}),(0,t.jsxs)(c.AlertDialogFooter,{children:[(0,t.jsx)(c.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(c.AlertDialogAction,{onClick:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};e.s(["PostingRulesSettings",()=>M],927441)},673629,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(653145),a=e.i(994814),i=e.i(681307),o=e.i(903133),l=e.i(967489),c=e.i(699375),d=e.i(519455),u=e.i(846696),m=e.i(531278),h=e.i(642167);let x=i.z.object({enabled:i.z.boolean(),taxPeriod:i.z.enum(["MONTHLY","QUARTERLY","ANNUAL"]),autoApplyDefaultTax:i.z.boolean(),requireTaxOnInvoice:i.z.boolean(),calculateTaxInclusive:i.z.boolean()}),p=i.z.object({inputVATAccountId:i.z.string().nullable(),outputVATAccountId:i.z.string().nullable()}),f=i.z.object({withholdingTaxAccountId:i.z.string().nullable()}),g=i.z.object({taxClearingAccountId:i.z.string().nullable(),taxPayableAccountId:i.z.string().nullable(),taxReceivableAccountId:i.z.string().nullable()});function j({section:e,initialData:i,accounts:j=[],disabled:b=!1}){let v=(0,n.useRouter)(),[y,w]=(0,r.useTransition)(),N=(0,s.useForm)({resolver:(0,a.zodResolver)({general:x,vatAccounts:p,withholdingAccounts:f,clearingAccounts:g}[e]),defaultValues:i}),C=e=>{w(async()=>{try{let t={...e},r=await (0,h.updateGLConfiguration)({taxSettings:t});r.success?(u.toast.success("Tax settings updated"),v.refresh()):u.toast.error(r.error||"Failed to update settings")}catch(e){u.toast.error("An error occurred")}})};return"general"===e?(0,t.jsx)(o.Form,{...N,children:(0,t.jsxs)("form",{onSubmit:N.handleSubmit(C),className:"space-y-4",children:[(0,t.jsx)(o.FormField,{control:N.control,name:"enabled",render:({field:e})=>(0,t.jsxs)(o.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(o.FormLabel,{children:"Enable Tax Management"}),(0,t.jsx)(o.FormDescription,{children:"Track tax accounts and codes"})]}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:b})})]})}),(0,t.jsx)(o.FormField,{control:N.control,name:"taxPeriod",render:({field:e})=>(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:"Tax Period"}),(0,t.jsxs)(l.Select,{value:e.value,onValueChange:e.onChange,disabled:b,children:[(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{})})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"MONTHLY",children:"Monthly"}),(0,t.jsx)(l.SelectItem,{value:"QUARTERLY",children:"Quarterly"}),(0,t.jsx)(l.SelectItem,{value:"ANNUAL",children:"Annual"})]})]}),(0,t.jsx)(o.FormDescription,{children:"How often you file tax returns"})]})}),(0,t.jsx)(o.FormField,{control:N.control,name:"autoApplyDefaultTax",render:({field:e})=>(0,t.jsxs)(o.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(o.FormLabel,{children:"Auto-apply Default Tax"}),(0,t.jsx)(o.FormDescription,{children:"Automatically apply default tax code to new transactions"})]}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:b})})]})}),(0,t.jsx)(o.FormField,{control:N.control,name:"calculateTaxInclusive",render:({field:e})=>(0,t.jsxs)(o.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(o.FormLabel,{children:"Tax-Inclusive Calculation"}),(0,t.jsx)(o.FormDescription,{children:"Calculate tax from tax-inclusive amounts"})]}),(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(c.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:b})})]})}),(0,t.jsxs)(d.Button,{type:"submit",disabled:b||y,children:[y&&(0,t.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})}):(0,t.jsx)(o.Form,{...N,children:(0,t.jsxs)("form",{onSubmit:N.handleSubmit(C),className:"space-y-4",children:[Object.keys(i).map(e=>(0,t.jsx)(o.FormField,{control:N.control,name:e,render:({field:r})=>{var n;return(0,t.jsxs)(o.FormItem,{children:[(0,t.jsx)(o.FormLabel,{children:{inputVATAccountId:"Input VAT Account",outputVATAccountId:"Output VAT Account",withholdingTaxAccountId:"Withholding Tax Account",taxClearingAccountId:"Tax Clearing Account",taxPayableAccountId:"Tax Payable Account",taxReceivableAccountId:"Tax Receivable Account"}[n=e]||n}),(0,t.jsxs)(l.Select,{value:r.value||"",onValueChange:e=>r.onChange(e||null),disabled:b,children:[(0,t.jsx)(o.FormControl,{children:(0,t.jsx)(l.SelectTrigger,{children:(0,t.jsx)(l.SelectValue,{placeholder:"Select account"})})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"",children:"None"}),j.map(e=>(0,t.jsxs)(l.SelectItem,{value:e.id,children:[e.code," - ",e.name]},e.id))]})]}),(0,t.jsx)(o.FormMessage,{})]})}},e)),(0,t.jsxs)(d.Button,{type:"submit",disabled:b||y,children:[y&&(0,t.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})})}e.s(["TaxSettingsForm",()=>j])},241218,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566),s=e.i(784774),a=e.i(519455),i=e.i(487486),o=e.i(699375),l=e.i(755146),c=e.i(868499),d=e.i(846696),u=e.i(541071),m=e.i(788699),h=e.i(727612),x=e.i(870273);let p=(0,e.i(475254).default)("star-off",[["path",{d:"m10.344 4.688 1.181-2.393a.53.53 0 0 1 .95 0l2.31 4.679a2.12 2.12 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.237 3.152",key:"19ctli"}],["path",{d:"m17.945 17.945.43 2.505a.53.53 0 0 1-.771.56l-4.618-2.428a2.12 2.12 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a8 8 0 0 0 .4-.099",key:"ptqqvy"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),f={INPUT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",OUTPUT:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",WITHHOLDING:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",EXEMPT:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"};function g({taxCodes:e,accounts:g,canEdit:j,agencyId:b}){let v=(0,n.useRouter)(),[y,w]=(0,r.useTransition)(),[N,C]=(0,r.useState)(null),S=async e=>{j&&w(async()=>{d.toast.success(`${e} set as default`),v.refresh()})},F=async()=>{N&&j&&w(async()=>{d.toast.success("Tax code deleted"),C(null),v.refresh()})};return 0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)("p",{children:"No tax codes configured yet."}),j&&(0,t.jsx)("p",{className:"text-sm mt-2",children:"Add a tax code or apply a template to get started."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHeader,{children:(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableHead,{children:"Code"}),(0,t.jsx)(s.TableHead,{children:"Name"}),(0,t.jsx)(s.TableHead,{children:"Type"}),(0,t.jsx)(s.TableHead,{className:"text-right",children:"Rate"}),(0,t.jsx)(s.TableHead,{children:"Account"}),(0,t.jsx)(s.TableHead,{className:"text-center",children:"Default"}),(0,t.jsx)(s.TableHead,{className:"text-center",children:"Active"}),(0,t.jsx)(s.TableHead,{className:"w-10"})]})}),(0,t.jsx)(s.TableBody,{children:e.map(e=>{var r;let n;return(0,t.jsxs)(s.TableRow,{className:y?"opacity-50":"",children:[(0,t.jsx)(s.TableCell,{children:(0,t.jsx)("span",{className:"font-mono font-medium",children:e.code})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)(i.Badge,{variant:"secondary",className:f[e.type],children:e.type})}),(0,t.jsxs)(s.TableCell,{className:"text-right font-mono",children:[e.rate.toFixed(2),"%"]}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)("span",{className:"text-sm",children:(r=e.accountId,(n=g.find(e=>e.id===r))?`${n.code} - ${n.name}`:r)})}),(0,t.jsx)(s.TableCell,{className:"text-center",children:e.isDefault?(0,t.jsx)(x.Star,{className:"h-4 w-4 fill-yellow-400 text-yellow-400 mx-auto"}):(0,t.jsx)(p,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,t.jsx)(s.TableCell,{className:"text-center",children:(0,t.jsx)(o.Switch,{checked:!1!==e.isActive,disabled:!j||y})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",disabled:y,children:(0,t.jsx)(u.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>v.push(`/agency/${b}/fi/general-ledger/settings/tax/codes/${e.code}`),children:[(0,t.jsx)(m.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),!e.isDefault&&(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>S(e.code),children:[(0,t.jsx)(x.Star,{className:"mr-2 h-4 w-4"}),"Set as Default"]}),j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.DropdownMenuSeparator,{}),(0,t.jsxs)(l.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>C(e.code),children:[(0,t.jsx)(h.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},e.code)})})]}),(0,t.jsx)(c.AlertDialog,{open:!!N,onOpenChange:()=>C(null),children:(0,t.jsxs)(c.AlertDialogContent,{children:[(0,t.jsxs)(c.AlertDialogHeader,{children:[(0,t.jsx)(c.AlertDialogTitle,{children:"Delete Tax Code"}),(0,t.jsx)(c.AlertDialogDescription,{children:"Are you sure you want to delete this tax code? Existing transactions using this code will not be affected."})]}),(0,t.jsxs)(c.AlertDialogFooter,{children:[(0,t.jsx)(c.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(c.AlertDialogAction,{onClick:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}e.s(["TaxCodesTable",()=>g],241218)},260291,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(653145),s=e.i(994814),a=e.i(846696),i=e.i(618566),o=e.i(531278),l=e.i(87316),c=e.i(107233),d=e.i(788699),u=e.i(945919),m=e.i(519455),h=e.i(793479),x=e.i(624687),p=e.i(699375),f=e.i(227766),g=e.i(903133),j=e.i(967489),b=e.i(980376),v=e.i(337822),y=e.i(772436),w=e.i(975157),N=e.i(681307);N.z.object({name:N.z.string().min(1).max(100),shortName:N.z.string().max(20).optional(),periodType:N.z.enum(["MONTH","QUARTER","HALF_YEAR","YEAR","CUSTOM"]),fiscalYear:N.z.number().int().min(2e3).max(2100),fiscalPeriod:N.z.number().int().min(1).max(12),startDate:N.z.coerce.date(),endDate:N.z.coerce.date(),status:N.z.enum(["FUTURE","OPEN","CLOSED","LOCKED"]).default("FUTURE"),openedAt:N.z.date().optional(),openedBy:N.z.string().optional(),closedAt:N.z.date().optional(),closedBy:N.z.string().optional(),lockedAt:N.z.date().optional(),lockedBy:N.z.string().optional(),openingBalances:N.z.any().optional(),closingBalances:N.z.any().optional(),yearEndProcessedAt:N.z.date().optional(),yearEndProcessedBy:N.z.string().optional(),isYearEnd:N.z.boolean().default(!1),notes:N.z.string().max(1e3).optional()});let C=N.z.object({name:N.z.string().min(1).max(100),shortName:N.z.string().max(20).optional(),periodType:N.z.enum(["MONTH","QUARTER","HALF_YEAR","YEAR","CUSTOM"]),fiscalYear:N.z.number().int().min(2e3).max(2100),fiscalPeriod:N.z.number().int().min(1).max(12),startDate:N.z.coerce.date(),endDate:N.z.coerce.date(),isYearEnd:N.z.boolean().default(!1),notes:N.z.string().max(1e3).optional()}).refine(e=>e.endDate>e.startDate,{message:"End date must be after start date"});C.extend({id:N.z.uuid()}),N.z.object({id:N.z.uuid()}),N.z.object({id:N.z.uuid(),notes:N.z.string().max(500).optional()}),N.z.object({id:N.z.uuid(),notes:N.z.string().max(500).optional()}),N.z.object({periodId:N.z.uuid(),retainedEarningsAccountId:N.z.uuid(),createBroughtForward:N.z.boolean().default(!0),notes:N.z.string().max(1e3).optional()});var S=e.i(416233),F=e.i(95187);let T=(0,F.createServerReference)("40d53d68950c391dc500b44e5c7ca6c8e8598f3eb2",F.callServer,void 0,F.findSourceMapURL,"updateFinancialPeriod"),D=[{value:"MONTH",label:"Month"},{value:"QUARTER",label:"Quarter"},{value:"HALF_YEAR",label:"Half Year"},{value:"YEAR",label:"Year"},{value:"CUSTOM",label:"Custom"}],M=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],k=new Date().getFullYear(),A=Array.from({length:10},(e,t)=>k-2+t),I=({mode:e,period:c,onSuccess:d,onCancel:b})=>{let N=(0,i.useRouter)(),[F,I]=(0,r.useTransition)(),P=(0,n.useForm)({resolver:(0,s.zodResolver)(C),defaultValues:{name:c?.name??"",shortName:c?.shortName??void 0,periodType:c?.periodType??"MONTH",fiscalYear:c?.fiscalYear??k,fiscalPeriod:c?.fiscalPeriod??1,startDate:c?.startDate??new Date(k,0,1),endDate:c?.endDate??new Date(k,0,31),isYearEnd:c?.isYearEnd??!1,notes:c?.notes??void 0}}),R=P.watch("periodType"),E=P.watch("fiscalPeriod"),L=P.watch("fiscalYear");return r.useEffect(()=>{if("create"===e){let e="",t="";switch(R){case"MONTH":let r=M.find(e=>e.value===E);e=`${r?.label??"Month"} ${L}`,t=`${r?.label?.slice(0,3)??"Mon"}-${String(L).slice(-2)}`;break;case"QUARTER":e=`Q${E} FY${L}`,t=`Q${E}-${String(L).slice(-2)}`;break;case"HALF_YEAR":e=`H${E} FY${L}`,t=`H${E}-${String(L).slice(-2)}`;break;case"YEAR":e=`FY${L}`,t=`FY${String(L).slice(-2)}`;break;default:e=`Period ${E} FY${L}`,t=`P${E}-${String(L).slice(-2)}`}P.setValue("name",e),P.setValue("shortName",t)}},[R,E,L,e,P]),(0,t.jsx)(g.Form,{...P,children:(0,t.jsxs)("form",{onSubmit:P.handleSubmit(t=>{I(async()=>{try{let r={...t,startDate:t.startDate,endDate:t.endDate},n="create"===e?await (0,S.createFinancialPeriod)(r):await T({id:c.id,...r});n.success?(a.toast.success("create"===e?"Period created":"Period updated"),N.refresh(),d?.()):a.toast.error(n.error??"Failed to save period")}catch{a.toast.error("An error occurred")}})}),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Period Configuration"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(g.FormField,{control:P.control,name:"periodType",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Period Type *"}),(0,t.jsxs)(j.Select,{onValueChange:e.onChange,value:e.value,children:[(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(j.SelectTrigger,{children:(0,t.jsx)(j.SelectValue,{placeholder:"Select type"})})}),(0,t.jsx)(j.SelectContent,{children:D.map(e=>(0,t.jsx)(j.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)(g.FormMessage,{})]})}),(0,t.jsx)(g.FormField,{control:P.control,name:"fiscalYear",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Fiscal Year *"}),(0,t.jsxs)(j.Select,{onValueChange:t=>e.onChange(parseInt(t)),value:String(e.value),children:[(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(j.SelectTrigger,{children:(0,t.jsx)(j.SelectValue,{placeholder:"Select year"})})}),(0,t.jsx)(j.SelectContent,{children:A.map(e=>(0,t.jsx)(j.SelectItem,{value:String(e),children:e},e))})]}),(0,t.jsx)(g.FormMessage,{})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(g.FormField,{control:P.control,name:"fiscalPeriod",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Period Number *"}),(0,t.jsxs)(j.Select,{onValueChange:t=>e.onChange(parseInt(t)),value:String(e.value),children:[(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(j.SelectTrigger,{children:(0,t.jsx)(j.SelectValue,{placeholder:"Select period"})})}),(0,t.jsxs)(j.SelectContent,{children:["MONTH"===R&&M.map(e=>(0,t.jsx)(j.SelectItem,{value:String(e.value),children:e.label},e.value)),"QUARTER"===R&&[1,2,3,4].map(e=>(0,t.jsxs)(j.SelectItem,{value:String(e),children:["Quarter ",e]},e)),"HALF_YEAR"===R&&[1,2].map(e=>(0,t.jsxs)(j.SelectItem,{value:String(e),children:["Half ",e]},e)),"YEAR"===R&&(0,t.jsx)(j.SelectItem,{value:"1",children:"Full Year"}),"CUSTOM"===R&&Array.from({length:12},(e,t)=>t+1).map(e=>(0,t.jsxs)(j.SelectItem,{value:String(e),children:["Period ",e]},e))]})]}),(0,t.jsx)(g.FormMessage,{})]})}),(0,t.jsx)(g.FormField,{control:P.control,name:"isYearEnd",render:({field:e})=>(0,t.jsxs)(g.FormItem,{className:"flex items-center justify-between rounded-lg border p-3 mt-6",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(g.FormLabel,{children:"Year-End Period"}),(0,t.jsx)(g.FormDescription,{className:"text-xs",children:"Triggers year-end closing"})]}),(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(p.Switch,{checked:e.value,onCheckedChange:e.onChange})})]})})]})]}),(0,t.jsx)(y.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Period Identity"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(g.FormField,{control:P.control,name:"name",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Period Name *"}),(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(h.Input,{placeholder:"January 2026",...e})}),(0,t.jsx)(g.FormMessage,{})]})}),(0,t.jsx)(g.FormField,{control:P.control,name:"shortName",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Short Name"}),(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(h.Input,{placeholder:"Jan-26",...e})}),(0,t.jsx)(g.FormMessage,{})]})})]})]}),(0,t.jsx)(y.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Date Range"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(g.FormField,{control:P.control,name:"startDate",render:({field:e})=>(0,t.jsxs)(g.FormItem,{className:"flex flex-col",children:[(0,t.jsx)(g.FormLabel,{children:"Start Date *"}),(0,t.jsxs)(v.Popover,{children:[(0,t.jsx)(v.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(g.FormControl,{children:(0,t.jsxs)(m.Button,{variant:"outline",className:(0,w.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,u.format)(e.value,"PPP"):"Pick a date",(0,t.jsx)(l.Calendar,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsx)(v.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(f.Calendar,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),(0,t.jsx)(g.FormMessage,{})]})}),(0,t.jsx)(g.FormField,{control:P.control,name:"endDate",render:({field:e})=>(0,t.jsxs)(g.FormItem,{className:"flex flex-col",children:[(0,t.jsx)(g.FormLabel,{children:"End Date *"}),(0,t.jsxs)(v.Popover,{children:[(0,t.jsx)(v.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(g.FormControl,{children:(0,t.jsxs)(m.Button,{variant:"outline",className:(0,w.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,u.format)(e.value,"PPP"):"Pick a date",(0,t.jsx)(l.Calendar,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsx)(v.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(f.Calendar,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),(0,t.jsx)(g.FormMessage,{})]})})]})]}),(0,t.jsx)(y.Separator,{}),(0,t.jsx)(g.FormField,{control:P.control,name:"notes",render:({field:e})=>(0,t.jsxs)(g.FormItem,{children:[(0,t.jsx)(g.FormLabel,{children:"Notes"}),(0,t.jsx)(g.FormControl,{children:(0,t.jsx)(x.Textarea,{placeholder:"Optional notes about this period...",className:"resize-none",...e})}),(0,t.jsx)(g.FormMessage,{})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[b&&(0,t.jsx)(m.Button,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),(0,t.jsxs)(m.Button,{type:"submit",disabled:F,children:[F&&(0,t.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"create"===e?"Create Period":"Save Changes"]})]})]})})},P=({mode:e,period:n,trigger:s,onSuccess:a})=>{let[i,o]=r.useState(!1);return(0,t.jsxs)(b.Sheet,{open:i,onOpenChange:o,children:[(0,t.jsx)(b.SheetTrigger,{asChild:!0,children:s??(0,t.jsx)(m.Button,{variant:"create"===e?"default":"ghost",size:"create"===e?"sm":"icon",children:"create"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"New Period"]}):(0,t.jsx)(d.Pencil,{className:"h-4 w-4"})})}),(0,t.jsxs)(b.SheetContent,{className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,t.jsxs)(b.SheetHeader,{children:[(0,t.jsx)(b.SheetTitle,{children:"create"===e?"Create Financial Period":`Edit Period: ${n?.name}`}),(0,t.jsx)(b.SheetDescription,{children:"create"===e?"Define a new financial period for accounting":"Modify period details"})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(I,{mode:e,period:n,onSuccess:()=>{o(!1),a?.()},onCancel:()=>o(!1)})})]})]})};e.s(["FiscalPeriodForm",()=>I,"FiscalPeriodFormTrigger",()=>P],260291)}]);