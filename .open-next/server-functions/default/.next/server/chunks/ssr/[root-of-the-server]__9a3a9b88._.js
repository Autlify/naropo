module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},650645,a=>{a.n(a.i(827572))},43619,a=>{a.n(a.i(379962))},13718,a=>{a.n(a.i(685523))},118198,a=>{a.n(a.i(545518))},262212,a=>{a.n(a.i(866114))},636685,a=>{a.n(a.i(88402))},331966,a=>{a.n(a.i(680801))},488095,a=>{a.n(a.i(301323))},635330,a=>{"use strict";var b=a.i(907997),c=a.i(800717),d=a.i(139138);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("bg-card rounded-lg border bg-level-0 text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6 sm:p-8 sm:space-y-2",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("lg:text-2xl font-bold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("from-muted/30 via-muted/20 to-muted/30 border-border/50 relative overflow-hidden rounded-xl border bg-gradient-to-r p-3 sm:p-4",a),...c})).displayName="CardHighlight";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},944331,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/separator.tsx <module evaluation>","Separator")},380323,a=>{"use strict";a.s(["Separator",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/separator.tsx","Separator")},766343,a=>{"use strict";a.i(944331);var b=a.i(380323);a.n(b)},153909,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/circle-progress.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/circle-progress.tsx <module evaluation>","default")},985240,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/circle-progress.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/circle-progress.tsx","default")},127349,a=>{"use strict";a.i(153909);var b=a.i(985240);a.n(b)},831874,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/node_modules/@tremor/react/dist/components/chart-elements/AreaChart/AreaChart.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@tremor/react/dist/components/chart-elements/AreaChart/AreaChart.js <module evaluation>","default")},627541,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/node_modules/@tremor/react/dist/components/chart-elements/AreaChart/AreaChart.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@tremor/react/dist/components/chart-elements/AreaChart/AreaChart.js","default")},56524,a=>{"use strict";a.i(831874);var b=a.i(627541);a.n(b)},846479,176047,692210,911070,752132,a=>{"use strict";var b=a.i(56524);a.s(["AreaChart",()=>b.default],846479);var c=a.i(701269);let d=(0,c.default)("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);a.s(["ClipboardIcon",()=>d],176047);let e=(0,c.default)("contact-round",[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M17.915 22a6 6 0 0 0-12 0",key:"suqz9p"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]]);a.s(["Contact2",()=>e],692210);let f=(0,c.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>f],911070);let g=(0,c.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>g],752132)},444226,a=>{"use strict";a.s(["Progress",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call Progress() from the server but Progress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/progress.tsx <module evaluation>","Progress")},52584,a=>{"use strict";a.s(["Progress",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call Progress() from the server but Progress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/progress.tsx","Progress")},181402,a=>{"use strict";a.i(444226);var b=a.i(52584);a.n(b)},499729,a=>{"use strict";var b=a.i(907997),c=a.i(127349),d=a.i(635330),e=a.i(181402),f=a.i(766343),g=a.i(761469),h=a.i(142338),i=a.i(846479),j=a.i(176047),k=a.i(692210),l=a.i(911070);let m=(0,a.i(701269).default)("goal",[["path",{d:"M12 13V2l8 4-8 4",key:"5wlwwj"}],["path",{d:"M20.561 10.222a9 9 0 1 1-12.55-5.29",key:"1c0wjv"}],["path",{d:"M8.002 9.997a5 5 0 1 0 8.9 2.02",key:"gb1g7m"}]]);var n=a.i(752132),o=a.i(395936);let p=async({params:a})=>{let p,q,r,{agencyId:s}=await a,t="USD",u=0,v=0,w=0,x=new Date().getFullYear(),y=new Date(`${x}-01-01T00:00:00Z`).getTime()/1e3,z=new Date(`${x}-12-31T23:59:59Z`).getTime()/1e3,A=await g.db.agency.findUnique({where:{id:s}});if(!A)return;let B=await g.db.subAccount.findMany({where:{agencyId:s}});if(A.connectAccountId)try{let a=await h.stripe.accounts.retrieve({stripeAccount:A.connectAccountId});t=a.default_currency?.toUpperCase()||"USD";let b=await h.stripe.checkout.sessions.list({created:{gte:y,lte:z},limit:100},{stripeAccount:A.connectAccountId});p=b.data,q=b.data.filter(a=>"complete"===a.status).map(a=>({...a,created:new Date(a.created).toLocaleDateString(),amount_total:a.amount_total?a.amount_total/100:0})),r=b.data.filter(a=>"open"===a.status).map(a=>({...a,created:new Date(a.created).toLocaleDateString(),amount_total:a.amount_total?a.amount_total/100:0})),u=+q.reduce((a,b)=>a+(b.amount_total||0),0).toFixed(2),v=+r.reduce((a,b)=>a+(b.amount_total||0),0).toFixed(2);let c=b.data.length;w=c>0?+(q.length/c*100).toFixed(2):0}catch(a){console.error("Failed to fetch Stripe Connect account data:",a)}return(0,b.jsxs)("div",{className:"relative h-full",children:[!A.connectAccountId&&(0,b.jsx)("div",{className:"absolute -top-10 -left-10 right-0 bottom-0 z-30 flex items-center justify-center backdrop-blur-md bg-background/50",children:(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Connect Your Stripe"}),(0,b.jsx)(d.CardDescription,{children:"You need to connect your stripe account to see metrics"}),(0,b.jsxs)(o.default,{href:`/agency/${A.id}/launchpad`,className:"p-2 w-fit bg-secondary text-white rounded-md flex items-center gap-2",children:[(0,b.jsx)(j.ClipboardIcon,{}),"Launch Pad"]})]})})}),(0,b.jsx)("h1",{className:"text-4xl",children:"Dashboard"}),(0,b.jsx)(f.Separator,{className:" my-6"}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 pb-6",children:[(0,b.jsxs)("div",{className:"flex gap-4 flex-col xl:!flex-row",children:[(0,b.jsxs)(d.Card,{className:"flex-1 relative",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardDescription,{children:"Income"}),(0,b.jsx)(d.CardTitle,{className:"text-4xl",children:u?`${t} ${u.toFixed(2)}`:"$0.00"}),(0,b.jsxs)("small",{className:"text-xs text-muted-foreground",children:["For the year ",x]})]}),(0,b.jsx)(d.CardContent,{className:"text-sm text-muted-foreground",children:"Total revenue generated as reflected in your stripe dashboard."}),(0,b.jsx)(l.DollarSign,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsxs)(d.Card,{className:"flex-1 relative",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardDescription,{children:"Potential Income"}),(0,b.jsx)(d.CardTitle,{className:"text-4xl",children:v?`${t} ${v.toFixed(2)}`:"$0.00"}),(0,b.jsxs)("small",{className:"text-xs text-muted-foreground",children:["For the year ",x]})]}),(0,b.jsx)(d.CardContent,{className:"text-sm text-muted-foreground",children:"This is how much you can close."}),(0,b.jsx)(l.DollarSign,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsxs)(d.Card,{className:"flex-1 relative",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardDescription,{children:"Active Clients"}),(0,b.jsx)(d.CardTitle,{className:"text-4xl",children:B.length})]}),(0,b.jsx)(d.CardContent,{className:"text-sm text-muted-foreground",children:"Reflects the number of sub accounts you own and manage."}),(0,b.jsx)(k.Contact2,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsxs)(d.Card,{className:"flex-1 relative",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Agency Goal"}),(0,b.jsx)(d.CardDescription,{className:"mt-2",children:"Reflects the number of sub accounts you want to own and manage."})]}),(0,b.jsx)(d.CardFooter,{children:(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:["Current: ",B.length]}),(0,b.jsxs)("span",{className:"text-muted-foreground text-sm",children:["Goal: ",A.goal]})]}),(0,b.jsx)(e.Progress,{value:B.length/A.goal*100})]})}),(0,b.jsx)(m,{className:"absolute right-4 top-4 text-muted-foreground"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4 flex-grow",children:[(0,b.jsxs)(d.Card,{className:"col-span-3",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Transaction History"})}),(0,b.jsx)(i.AreaChart,{className:"text-sm stroke-primary",data:[...q||[],...r||[]],index:"created",categories:["amount_total"],colors:["primary"],yAxisWidth:30,showAnimation:!0})]}),(0,b.jsxs)(d.Card,{className:"col-span-1 flex flex-col",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Conversions"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(c.default,{value:w,description:(0,b.jsxs)(b.Fragment,{children:[p&&(0,b.jsxs)("div",{className:"flex flex-col",children:["Abandoned",(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(n.ShoppingCart,{className:"text-rose-700"}),p.length]})]}),q&&(0,b.jsxs)("div",{className:"flex flex-col",children:["Won Carts",(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(n.ShoppingCart,{className:"text-emerald-700"}),q.length]})]})]})})})]})]})]})]})};a.s(["default",0,p],499729)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9a3a9b88._.js.map