module.exports=[572431,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/pipeline-value.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/pipeline-value.tsx <module evaluation>","default")},682364,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/pipeline-value.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/pipeline-value.tsx","default")},477458,a=>{"use strict";a.i(572431);var b=a.i(682364);a.n(b)},860555,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/subaccount-funnel-chart.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/subaccount-funnel-chart.tsx <module evaluation>","default")},980860,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/global/subaccount-funnel-chart.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/global/subaccount-funnel-chart.tsx","default")},517174,a=>{"use strict";a.i(860555);var b=a.i(980860);a.n(b)},810845,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/node_modules/@tremor/react/dist/components/icon-elements/BadgeDelta/BadgeDelta.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@tremor/react/dist/components/icon-elements/BadgeDelta/BadgeDelta.js <module evaluation>","default")},92924,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/node_modules/@tremor/react/dist/components/icon-elements/BadgeDelta/BadgeDelta.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/node_modules/@tremor/react/dist/components/icon-elements/BadgeDelta/BadgeDelta.js","default")},825440,a=>{"use strict";a.i(810845);var b=a.i(92924);a.n(b)},718490,a=>{"use strict";var b=a.i(907997),c=a.i(161018),d=a.i(127349),e=a.i(477458),f=a.i(517174),g=a.i(819637),h=a.i(635330),i=a.i(745310),j=a.i(761469),k=a.i(142338),l=a.i(846479),m=a.i(825440),m=m,n=a.i(176047),o=a.i(692210),p=a.i(911070),q=a.i(752132),r=a.i(395936);let s=async({params:a,searchParams:s})=>{let t,u,v,{subaccountId:w}=await a,{code:x}=await s,y="USD",z=0,A=0,B=0,C=await j.db.subAccount.findUnique({where:{id:w}}),D=new Date().getFullYear(),E=new Date(`${D}-01-01T00:00:00Z`).getTime()/1e3,F=new Date(`${D}-12-31T23:59:59Z`).getTime()/1e3;if(!C)return;if(C.connectAccountId)try{let a=await k.stripe.accounts.retrieve({stripeAccount:C.connectAccountId});y=a.default_currency?.toUpperCase()||"USD";let b=await k.stripe.checkout.sessions.list({created:{gte:E,lte:F},limit:100},{stripeAccount:C.connectAccountId});t=b.data.map(a=>({...a,created:new Date(a.created).toLocaleDateString(),amount_total:a.amount_total?a.amount_total/100:0})),u=b.data.filter(a=>"complete"===a.status).map(a=>({...a,created:new Date(a.created).toLocaleDateString(),amount_total:a.amount_total?a.amount_total/100:0})),v=b.data.filter(a=>"open"===a.status||"expired"===a.status).map(a=>({...a,created:new Date(a.created).toLocaleDateString(),amount_total:a.amount_total?a.amount_total/100:0})),z=+u.reduce((a,b)=>a+(b.amount_total||0),0).toFixed(2),A=+v.reduce((a,b)=>a+(b.amount_total||0),0).toFixed(2);let c=b.data.length;B=c>0?+(u.length/c*100).toFixed(2):0}catch(a){console.error("Failed to fetch Stripe Connect account data:",a)}let G=(await j.db.funnel.findMany({where:{subAccountId:w},include:{FunnelPages:!0}})).map(a=>({...a,totalFunnelVisits:a.FunnelPages.reduce((a,b)=>a+b.visits,0)}));return(0,b.jsx)(c.default,{children:(0,b.jsxs)("div",{className:"relative h-full",children:[!C.connectAccountId&&(0,b.jsx)("div",{className:"absolute -top-10 -left-10 right-0 bottom-0 z-30 flex items-center justify-center backdrop-blur-md bg-background/50",children:(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Connect Your Stripe"}),(0,b.jsx)(h.CardDescription,{children:"You need to connect your stripe account to see metrics"}),(0,b.jsxs)(r.default,{href:`/subaccount/${C.id}/launchpad`,className:"p-2 w-fit bg-secondary text-white rounded-md flex items-center gap-2",children:[(0,b.jsx)(n.ClipboardIcon,{}),"Launch Pad"]})]})})}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 pb-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 items-stretch auto-rows-fr",children:[(0,b.jsxs)(h.Card,{className:"relative h-full",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardDescription,{children:"Income"}),(0,b.jsx)(h.CardTitle,{className:"text-4xl",children:z?`${y} ${z.toFixed(2)}`:"$0.00"}),(0,b.jsxs)("small",{className:"text-xs text-muted-foreground",children:["For the year ",D]})]}),(0,b.jsx)(h.CardContent,{className:"text-sm text-muted-foreground",children:"Total revenue generated as reflected in your stripe dashboard."}),(0,b.jsx)(p.DollarSign,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsxs)(h.Card,{className:"relative h-full",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardDescription,{children:"Potential Income"}),(0,b.jsx)(h.CardTitle,{className:"text-4xl",children:A?`${y} ${A.toFixed(2)}`:"$0.00"}),(0,b.jsxs)("small",{className:"text-xs text-muted-foreground",children:["For the year ",D]})]}),(0,b.jsx)(h.CardContent,{className:"text-sm text-muted-foreground",children:"This is how much you can close."}),(0,b.jsx)(o.Contact2,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsx)(e.default,{subaccountId:w,className:"h-full"}),(0,b.jsx)(h.Card,{className:"h-full",children:(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardDescription,{children:"Conversions"}),(0,b.jsx)(d.default,{value:B,description:(0,b.jsxs)(b.Fragment,{children:[t&&(0,b.jsxs)("div",{className:"flex flex-col",children:["Total Carts Opened",(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(q.ShoppingCart,{className:"text-rose-700"}),t.length]})]}),u&&(0,b.jsxs)("div",{className:"flex flex-col",children:["Won Carts",(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(q.ShoppingCart,{className:"text-emerald-700"}),u.length]})]})]})})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4 flex-grow items-stretch",children:[(0,b.jsxs)(h.Card,{className:"col-span-1 flex flex-col h-full",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardDescription,{children:"Funnel Performance"})}),(0,b.jsxs)(h.CardContent,{className:" text-sm text-muted-foreground flex flex-col gap-12 justify-between ",children:[(0,b.jsx)(f.default,{data:G}),(0,b.jsx)("div",{className:"flex flex-col",children:"Total page visits across all funnels. Hover over to get more details on funnel page performance."})]}),(0,b.jsx)(o.Contact2,{className:"absolute right-4 top-4 text-muted-foreground"})]}),(0,b.jsxs)(h.Card,{className:"col-span-3 h-full",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Checkout Activity"})}),(0,b.jsx)(l.AreaChart,{className:"text-sm stroke-primary",data:t||[],index:"created",categories:["amount_total"],colors:["primary"],yAxisWidth:30,showAnimation:!0})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 flex-grow",children:(0,b.jsx)(h.Card,{className:"p-4 flex-1 h-[450px] overflow-scroll relative",children:(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsxs)(h.CardTitle,{className:"flex items-center gap-2",children:["Transition History",(0,b.jsx)(m.default,{className:"rounded-xl bg-transparent",deltaType:"moderateIncrease",isIncreasePositive:!0,size:"xs",children:"+12.3%"})]}),(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{className:"!sticky !top-0",children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"w-[300px]",children:"Email"}),(0,b.jsx)(i.TableHead,{className:"w-[200px]",children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Created Date"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Value"})]})}),(0,b.jsx)(i.TableBody,{className:"font-medium truncate",children:u&&u.length>0?u.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:a.customer_details?.email||"-"}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(g.Badge,{className:"bg-success text-success-foreground",children:"Paid"})}),(0,b.jsx)(i.TableCell,{children:new Date(a.created).toUTCString()}),(0,b.jsxs)(i.TableCell,{className:"text-right",children:[(0,b.jsx)("small",{children:y})," ",(0,b.jsx)("span",{className:"text-emerald-500",children:a.amount_total})]})]},a.id)):(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:4,className:"text-center text-muted-foreground",children:"No Data"})})})]})]})})})]})]})})};a.s(["default",0,s],718490)}];

//# sourceMappingURL=_54eb6c03._.js.map