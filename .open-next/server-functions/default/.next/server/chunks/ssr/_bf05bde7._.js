module.exports=[238271,218796,a=>{"use strict";var b=a.i(258419);function c(a){let c=(0,b.toDate)(a),d=c.getMonth();return c.setFullYear(c.getFullYear(),d+1,0),c.setHours(23,59,59,999),c}function d(a,c){let d=(0,b.toDate)(a),e=(0,b.toDate)(c);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}a.s(["endOfMonth",()=>c],238271),a.s(["differenceInCalendarMonths",()=>d],218796)},910738,a=>{"use strict";var b=a.i(205483),c=a.i(258419);function d(a,b){let d=(0,c.toDate)(a),e=(0,c.toDate)(b),f=d.getTime()-e.getTime();return f<0?-1:f>0?1:f}var e=a.i(812055),f=a.i(218796),g=a.i(238271),h=a.i(634968),i=a.i(618982),j=a.i(308668);function k(a,k){return function(a,b,k){var l,m,n;let o,p,q,r=(0,i.getDefaultOptions)(),s=k?.locale??r.locale??h.defaultLocale,t=d(a,b);if(isNaN(t))throw RangeError("Invalid time value");let u=Object.assign({},k,{addSuffix:k?.addSuffix,comparison:t});t>0?(o=(0,c.toDate)(b),p=(0,c.toDate)(a)):(o=(0,c.toDate)(a),p=(0,c.toDate)(b));let v=(l=p,m=o,(n=void 0,a=>{let b=(n?Math[n]:Math.trunc)(a);return 0===b?0:b})(((0,c.toDate)(l)-(0,c.toDate)(m))/1e3)),w=Math.round((v-((0,j.getTimezoneOffsetInMilliseconds)(p)-(0,j.getTimezoneOffsetInMilliseconds)(o))/1e3)/60);if(w<2)if(k?.includeSeconds)if(v<5)return s.formatDistance("lessThanXSeconds",5,u);else if(v<10)return s.formatDistance("lessThanXSeconds",10,u);else if(v<20)return s.formatDistance("lessThanXSeconds",20,u);else if(v<40)return s.formatDistance("halfAMinute",0,u);else if(v<60)return s.formatDistance("lessThanXMinutes",1,u);else return s.formatDistance("xMinutes",1,u);else if(0===w)return s.formatDistance("lessThanXMinutes",1,u);else return s.formatDistance("xMinutes",w,u);if(w<45)return s.formatDistance("xMinutes",w,u);if(w<90)return s.formatDistance("aboutXHours",1,u);if(w<e.minutesInDay){let a=Math.round(w/60);return s.formatDistance("aboutXHours",a,u)}if(w<2520)return s.formatDistance("xDays",1,u);else if(w<e.minutesInMonth){let a=Math.round(w/e.minutesInDay);return s.formatDistance("xDays",a,u)}else if(w<2*e.minutesInMonth)return q=Math.round(w/e.minutesInMonth),s.formatDistance("aboutXMonths",q,u);if((q=function(a,b){let e,h=(0,c.toDate)(a),i=(0,c.toDate)(b),j=d(h,i),k=Math.abs((0,f.differenceInCalendarMonths)(h,i));if(k<1)e=0;else{var l;let b,f;1===h.getMonth()&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-j*k);let m=d(h,i)===-j;l=(0,c.toDate)(a),+(b=(0,c.toDate)(l),(f=(0,c.toDate)(b)).setHours(23,59,59,999),f)==+(0,g.endOfMonth)(b)&&1===k&&1===d(a,i)&&(m=!1),e=j*(k-Number(m))}return 0===e?0:e}(p,o))<12){let a=Math.round(w/e.minutesInMonth);return s.formatDistance("xMonths",a,u)}{let a=q%12,b=Math.trunc(q/12);return a<3?s.formatDistance("aboutXYears",b,u):a<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}}(a,(0,b.constructFrom)(a,Date.now()),k)}a.s(["formatDistanceToNow",()=>k],910738)},54917,873935,a=>{"use strict";var b=a.i(405050);let c=(0,b.createServerReference)("6090bcd21259ee87777f75e1ef84a8b891a09f5d13",b.callServer,void 0,b.findSourceMapURL,"approveJournalEntry");a.s(["approveJournalEntry",()=>c],54917);let d=(0,b.createServerReference)("603bb93f0adfe5d5f4b85d60ba0ec3d0e7eb8d671d",b.callServer,void 0,b.findSourceMapURL,"rejectJournalEntry");a.s(["rejectJournalEntry",()=>d],873935)},97177,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(478788),e=a.i(452308),f=a.i(206015),g=a.i(699570),h=a.i(786304),i=a.i(591119),j=a.i(757061),k=a.i(429246),l=a.i(870430),m=a.i(505084),n=a.i(269876),o=a.i(486192),p=a.i(167453),q=a.i(862722),r=a.i(177156),s=a.i(641710),t=a.i(104720);let u=(0,a.i(170106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var v=a.i(596221),w=a.i(732860),x=a.i(823292),y=a.i(50944),z=a.i(372228),A=a.i(910738),B=a.i(54917),C=a.i(873935);let D=({entries:a,agencyId:D})=>{let E=(0,y.useRouter)(),[F,G]=(0,c.useTransition)(),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(null),P=a=>{O(a.id),G(async()=>{let b=await (0,B.approveJournalEntry)(a.id);b.success?(x.toast.success(`Entry ${a.entryNumber} approved and posted`),I(null),E.refresh()):x.toast.error(b.error??"Failed to approve"),O(null)})},Q=a=>a.reduce((a,b)=>a+(b.debitAmount||0),0),R=[{accessorKey:"entryNumber",header:"Entry",cell:({row:a})=>(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)("div",{className:"font-mono font-medium",children:["JE-",a.original.entryNumber]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.original.Period.name})]})},{accessorKey:"description",header:"Description",cell:({row:a})=>(0,b.jsx)("div",{className:"max-w-xs truncate",children:a.original.description})},{id:"amount",header:"Amount",cell:({row:a})=>(0,b.jsxs)("div",{className:"font-mono font-medium tabular-nums",children:["$",Q(a.original.Lines).toLocaleString(void 0,{minimumFractionDigits:2})]})},{id:"submitter",header:"Submitted By",cell:({row:a})=>(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,b.jsx)(u,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.original.submitter?.name||"Unknown"]}),a.original.submittedAt&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(s.Clock,{className:"h-3 w-3"}),(0,A.formatDistanceToNow)(new Date(a.original.submittedAt),{addSuffix:!0})]})]})},{id:"actions",cell:({row:a})=>{let c=a.original,d=N===c.id;return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>I(c),disabled:d,children:(0,b.jsx)(r.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{size:"sm",variant:"outline",className:"text-green-600 hover:bg-green-50 hover:text-green-700 dark:hover:bg-green-950",onClick:()=>P(c),disabled:F,children:d?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p.CheckCircle2,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-950",onClick:()=>{I(c),K(!0)},disabled:F,children:(0,b.jsx)(q.XCircle,{className:"h-4 w-4"})})]})}}],S=(0,d.useReactTable)({data:a,columns:R,getCoreRowModel:(0,e.getCoreRowModel)()});return 0===a.length?(0,b.jsx)(i.Card,{className:"border-dashed",children:(0,b.jsxs)(i.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,b.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,b.jsx)(p.CheckCircle2,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"All caught up!"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No pending approvals at this time."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Card,{className:"border-border/50",children:[(0,b.jsx)(i.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(t.FileText,{className:"h-5 w-5"}),"Journal Entries"]}),(0,b.jsxs)(i.CardDescription,{children:[a.length," pending approval",1!==a.length?"s":""]})]}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-lg px-3",children:a.length})]})}),(0,b.jsx)(i.CardContent,{className:"p-0",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:S.getHeaderGroups().map(a=>(0,b.jsx)(f.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)(f.TableHead,{className:"bg-muted/50",children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(f.TableBody,{children:S.getRowModel().rows.map(a=>(0,b.jsx)(f.TableRow,{className:"cursor-pointer transition-colors",onClick:()=>I(a.original),children:a.getVisibleCells().map(a=>(0,b.jsx)(f.TableCell,{onClick:a=>a.stopPropagation(),children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id))})]})})]}),(0,b.jsx)(j.Sheet,{open:!!H&&!J,onOpenChange:a=>!a&&I(null),children:(0,b.jsx)(j.SheetContent,{className:"w-full sm:max-w-xl overflow-y-auto",children:H&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(j.SheetHeader,{children:[(0,b.jsxs)(j.SheetTitle,{className:"flex items-center gap-2",children:[(0,b.jsxs)(h.Badge,{variant:"outline",className:"font-mono",children:["JE-",H.entryNumber]}),(0,b.jsx)(w.ArrowRight,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Badge,{className:"bg-amber-500/10 text-amber-600 border-amber-500/20",children:"Pending Approval"})]}),(0,b.jsx)(j.SheetDescription,{className:"text-left",children:H.description})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Period"}),(0,b.jsx)("div",{children:H.Period.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Entry Date"}),(0,b.jsx)("div",{children:(0,z.format)(new Date(H.entryDate),"MMM d, yyyy")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Type"}),(0,b.jsx)("div",{children:H.entryType.replace(/_/g," ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Submitted By"}),(0,b.jsx)("div",{children:H.submitter?.name||H.submitter?.email})]})]}),(0,b.jsx)(m.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-3",children:"Line Items"}),(0,b.jsx)(n.ScrollArea,{className:"h-64 rounded border",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{className:"bg-muted/50",children:[(0,b.jsx)(f.TableHead,{children:"Account"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Debit"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Credit"})]})}),(0,b.jsxs)(f.TableBody,{children:[H.Lines.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsxs)(f.TableCell,{children:[(0,b.jsx)("div",{className:"font-mono text-sm",children:a.Account?.code}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.Account?.name})]}),(0,b.jsx)(f.TableCell,{className:"text-right font-mono tabular-nums",children:a.debitAmount>0?`$${a.debitAmount.toLocaleString()}`:"—"}),(0,b.jsx)(f.TableCell,{className:"text-right font-mono tabular-nums",children:a.creditAmount>0?`$${a.creditAmount.toLocaleString()}`:"—"})]},a?.id)),(0,b.jsxs)(f.TableRow,{className:"bg-muted/30 font-medium",children:[(0,b.jsx)(f.TableCell,{children:"Total"}),(0,b.jsxs)(f.TableCell,{className:"text-right font-mono",children:["$",Q(H.Lines).toLocaleString()]}),(0,b.jsxs)(f.TableCell,{className:"text-right font-mono",children:["$",H.Lines.reduce((a,b)=>a+(b.creditAmount||0),0).toLocaleString()]})]})]})]})})]})]}),(0,b.jsxs)(j.SheetFooter,{className:"mt-6 gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",className:"flex-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-950",onClick:()=>K(!0),disabled:F,children:[(0,b.jsx)(q.XCircle,{className:"mr-2 h-4 w-4"}),"Reject"]}),(0,b.jsxs)(g.Button,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>P(H),disabled:F,children:[N===H.id?(0,b.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(p.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Approve & Post"]})]})]})})}),(0,b.jsx)(o.AlertDialog,{open:J,onOpenChange:K,children:(0,b.jsxs)(o.AlertDialogContent,{children:[(0,b.jsxs)(o.AlertDialogHeader,{children:[(0,b.jsx)(o.AlertDialogTitle,{children:"Reject Journal Entry"}),(0,b.jsx)(o.AlertDialogDescription,{children:H&&`Rejecting entry JE-${H.entryNumber}. This action will return the entry to draft status.`})]}),(0,b.jsxs)("div",{className:"py-4",children:[(0,b.jsx)(l.Label,{htmlFor:"reason",children:"Rejection Reason"}),(0,b.jsx)(k.Textarea,{id:"reason",placeholder:"Please provide a reason for rejection...",value:L,onChange:a=>M(a.target.value),className:"mt-2",rows:3})]}),(0,b.jsxs)(o.AlertDialogFooter,{children:[(0,b.jsx)(o.AlertDialogCancel,{onClick:()=>M(""),children:"Cancel"}),(0,b.jsxs)(o.AlertDialogAction,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{H&&L.trim()&&(O(H.id),G(async()=>{let a=await (0,C.rejectJournalEntry)(H.id,L);a.success?(x.toast.success(`Entry ${H.entryNumber} rejected`),I(null),K(!1),M(""),E.refresh()):x.toast.error(a.error??"Failed to reject"),O(null)}))},disabled:!L.trim()||F,children:[F?(0,b.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Reject Entry"]})]})]})})]})};a.s(["ApprovalQueue",()=>D],97177)},809941,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);a.s(["ArrowUpDown",()=>b],809941)},636037,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(478788),e=a.i(452308),f=a.i(206015),g=a.i(866718),h=a.i(699570),i=a.i(786304),j=a.i(580701),k=a.i(757061),l=a.i(591119),m=a.i(269876),n=a.i(505084),o=a.i(809941),p=a.i(587532),q=a.i(177156),r=a.i(613749),s=a.i(50522),t=a.i(669520),u=a.i(941675),v=a.i(596221),w=a.i(910738),x=a.i(372228),y=a.i(405050);let z=(0,y.createServerReference)("40a98229cb3511534b217e290203e86f927b0f9f2e",y.callServer,void 0,y.findSourceMapURL,"searchAuditTrail");var A=a.i(368114);let B={CREATE:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",UPDATE:"bg-blue-500/10 text-blue-500 border-blue-500/20",DELETE:"bg-red-500/10 text-red-500 border-red-500/20",SUBMIT:"bg-purple-500/10 text-purple-500 border-purple-500/20",APPROVE:"bg-green-500/10 text-green-500 border-green-500/20",REJECT:"bg-orange-500/10 text-orange-500 border-orange-500/20",POST:"bg-cyan-500/10 text-cyan-500 border-cyan-500/20",REVERSE:"bg-amber-500/10 text-amber-500 border-amber-500/20",VOID:"bg-rose-500/10 text-rose-500 border-rose-500/20",CLOSE:"bg-slate-500/10 text-slate-500 border-slate-500/20",LOCK:"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",CONSOLIDATE:"bg-indigo-500/10 text-indigo-500 border-indigo-500/20",ELIMINATE:"bg-fuchsia-500/10 text-fuchsia-500 border-fuchsia-500/20"},C=["CREATE","UPDATE","DELETE","SUBMIT","APPROVE","REJECT","POST","REVERSE","VOID","CLOSE","LOCK","CONSOLIDATE","ELIMINATE"],D=({agencyId:a,entityTypes:y,initialData:D})=>{let[E,F]=(0,c.useTransition)(),[G,H]=(0,c.useState)(D?.items??[]),[I,J]=(0,c.useState)(D?.total??0),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(1),W=(0,c.useCallback)(()=>{F(async()=>{let b=await z({agencyId:a,search:O||void 0,entityType:Q||void 0,action:S||void 0,page:U,pageSize:25});b.success&&b.data&&(H(b.data.items),J(b.data.total))})},[a,O,Q,S,U]),X=()=>{V(1),W()},Y=[{accessorKey:"timestamp",header:({column:a})=>(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-3",children:[(0,b.jsx)(u.Calendar,{className:"mr-2 h-4 w-4"}),"Time",(0,b.jsx)(o.ArrowUpDown,{className:"ml-2 h-3 w-3"})]}),cell:({row:a})=>{let c=new Date(a.getValue("timestamp"));return(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:(0,x.format)(c,"MMM d, yyyy")}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,x.format)(c,"HH:mm:ss")})]})}},{accessorKey:"action",header:"Action",cell:({row:a})=>{let c=a.getValue("action");return(0,b.jsx)(i.Badge,{variant:"outline",className:(0,A.cn)("font-medium",B[c]),children:c})}},{accessorKey:"entityType",header:"Entity",cell:({row:a})=>(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"font-medium",children:a.getValue("entityType")}),(0,b.jsxs)("div",{className:"font-mono text-xs text-muted-foreground truncate max-w-32",children:[a.original.entityId.slice(0,8),"..."]})]})},{accessorKey:"userName",header:"User",cell:({row:a})=>(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"font-medium",children:a.original.userName||"Unknown"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground truncate max-w-40",children:a.original.userEmail})]})},{accessorKey:"reason",header:"Notes",cell:({row:a})=>{let c=a.original.reason;return c?(0,b.jsx)("div",{className:"max-w-48 truncate text-sm",children:c}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"—"})}},{id:"actions",cell:({row:a})=>(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>N(a.original),children:(0,b.jsx)(q.Eye,{className:"h-4 w-4"})})}],Z=(0,d.useReactTable)({data:G,columns:Y,getCoreRowModel:(0,e.getCoreRowModel)(),getSortedRowModel:(0,e.getSortedRowModel)(),onSortingChange:L,state:{sorting:K}}),$=Math.ceil(I/25);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-64",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search by ID, email, user, or notes...",value:O,onChange:a=>P(a.target.value),onKeyDown:a=>"Enter"===a.key&&X(),className:"pl-10 bg-background"})]}),(0,b.jsxs)(j.Select,{value:Q,onValueChange:R,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-48 bg-background",children:(0,b.jsx)(j.SelectValue,{placeholder:"Entity Type"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All entities"}),y.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(j.Select,{value:S,onValueChange:T,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-36 bg-background",children:(0,b.jsx)(j.SelectValue,{placeholder:"Action"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All actions"}),C.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(h.Button,{onClick:X,disabled:E,children:[E?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p.Search,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"ml-2",children:"Search"})]}),(0,b.jsx)(h.Button,{variant:"outline",size:"icon",onClick:W,disabled:E,children:(0,b.jsx)(t.RefreshCw,{className:(0,A.cn)("h-4 w-4",E&&"animate-spin")})})]})})}),(0,b.jsxs)(l.Card,{className:"border-border/50",children:[(0,b.jsx)("div",{className:"rounded-md",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:Z.getHeaderGroups().map(a=>(0,b.jsx)(f.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)(f.TableHead,{className:"bg-muted/50",children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(f.TableBody,{children:E?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:Y.length,className:"h-32 text-center",children:(0,b.jsx)(v.Loader2,{className:"mx-auto h-6 w-6 animate-spin text-muted-foreground"})})}):Z.getRowModel().rows?.length?Z.getRowModel().rows.map(a=>(0,b.jsx)(f.TableRow,{className:"cursor-pointer transition-colors hover:bg-muted/50",onClick:()=>N(a.original),children:a.getVisibleCells().map(a=>(0,b.jsx)(f.TableCell,{children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:Y.length,className:"h-32 text-center text-muted-foreground",children:"No audit records found."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t bg-muted/30",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:I>0?(0,b.jsxs)(b.Fragment,{children:["Showing ",(U-1)*25+1,"-",Math.min(25*U,I)," of ",I]}):"No results"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>V(a=>Math.max(1,a-1)),disabled:1===U||E,children:(0,b.jsx)(r.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-sm font-medium px-2",children:[U," / ",$||1]}),(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>V(a=>Math.min($,a+1)),disabled:U>=$||E,children:(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})})]})]})]}),(0,b.jsx)(k.Sheet,{open:!!M,onOpenChange:a=>!a&&N(null),children:(0,b.jsx)(k.SheetContent,{className:"w-full sm:max-w-xl overflow-y-auto",children:M&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(k.SheetHeader,{children:[(0,b.jsxs)(k.SheetTitle,{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Badge,{variant:"outline",className:(0,A.cn)("font-medium",B[M.action]),children:M.action}),M.entityType]}),(0,b.jsx)(k.SheetDescription,{children:(0,w.formatDistanceToNow)(new Date(M.timestamp),{addSuffix:!0})})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Entity ID"}),(0,b.jsx)("div",{className:"font-mono text-sm break-all bg-muted/50 p-2 rounded",children:M.entityId})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Timestamp"}),(0,b.jsx)("div",{className:"text-sm",children:(0,x.format)(new Date(M.timestamp),"PPpp")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"User"}),(0,b.jsx)("div",{className:"text-sm",children:M.userName||"Unknown"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:M.userEmail})]}),M.ipAddress&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"IP Address"}),(0,b.jsx)("div",{className:"font-mono text-sm",children:M.ipAddress})]})]}),M.reason&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Reason / Notes"}),(0,b.jsx)("div",{className:"bg-muted/50 p-3 rounded text-sm",children:M.reason})]}),(0,b.jsx)(n.Separator,{}),M.previousValues&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Previous Values"}),(0,b.jsx)(m.ScrollArea,{className:"h-40 rounded border bg-zinc-950",children:(0,b.jsx)("pre",{className:"p-3 text-xs text-zinc-100",children:JSON.stringify(M.previousValues,null,2)})})]}),M.newValues&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"New Values"}),(0,b.jsx)(m.ScrollArea,{className:"h-40 rounded border bg-zinc-950",children:(0,b.jsx)("pre",{className:"p-3 text-xs text-zinc-100",children:JSON.stringify(M.newValues,null,2)})})]})]})]})})})]})};a.s(["AuditTrailViewer",()=>D],636037)},85145,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(478788),e=a.i(452308),f=a.i(206015),g=a.i(866718),h=a.i(699570),i=a.i(335732),j=a.i(786304),k=a.i(417755),l=a.i(809941),m=a.i(824569),n=a.i(781560),o=a.i(238246),p=a.i(50944),q=a.i(823292),r=a.i(405050);let s=(0,r.createServerReference)("60d461cd45231654778902549efec93dbc25a5862c",r.callServer,void 0,r.findSourceMapURL,"archiveAccount"),t=({accounts:a,agencyId:r})=>{let t=(0,p.useRouter)(),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),y=[{accessorKey:"code",header:({column:a})=>(0,b.jsxs)(h.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Code",(0,b.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{let c=a.original.level,d="  ".repeat(c);return(0,b.jsxs)("div",{className:"font-mono",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:d}),a.getValue("code")]})}},{accessorKey:"name",header:"Account Name",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.getValue("name")}),a.original.isSystemAccount&&(0,b.jsx)(j.Badge,{variant:"secondary",className:"text-xs",children:"System"})]})},{accessorKey:"category",header:"Category",cell:({row:a})=>{let c=a.getValue("category");return(0,b.jsx)(j.Badge,{variant:"outline",children:c})}},{accessorKey:"accountType",header:"Type",cell:({row:a})=>{let c=a.getValue("accountType");return(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:c.replace(/_/g," ")})}},{accessorKey:"isActive",header:"Status",cell:({row:a})=>{let c=a.getValue("isActive");return(0,b.jsx)(j.Badge,{variant:c?"default":"secondary",children:c?"Active":"Inactive"})}},{id:"actions",cell:({row:a})=>{let c=a.original,d=!c.isSystemAccount;return(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(k.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(i.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(o.default,{href:`/agency/${r}/fi/general-ledger/chart-of-accounts/${c.id}`,children:[(0,b.jsx)(m.Edit,{className:"mr-2 h-4 w-4"}),"View Details"]})}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-destructive",onClick:async()=>{if(confirm("Are you sure you want to archive this account? This action cannot be undone if the account has transactions.")){let a=await s(c.id,"Archived by user");a.success?(q.toast.success("Account archived"),t.refresh()):q.toast.error(a.error??"Failed to archive account")}},children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Archive"]})]})]})]})}}],z=(0,d.useReactTable)({data:a,columns:y,getCoreRowModel:(0,e.getCoreRowModel)(),getSortedRowModel:(0,e.getSortedRowModel)(),getFilteredRowModel:(0,e.getFilteredRowModel)(),onSortingChange:v,onColumnFiltersChange:x,state:{sorting:u,columnFilters:w}});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)(g.Input,{placeholder:"Filter by code or name...",value:z.getColumn("code")?.getFilterValue()??"",onChange:a=>z.getColumn("code")?.setFilterValue(a.target.value),className:"max-w-sm"})}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:z.getHeaderGroups().map(a=>(0,b.jsx)(f.TableRow,{children:a.headers.map(a=>(0,b.jsx)(f.TableHead,{children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(f.TableBody,{children:z.getRowModel().rows?.length?z.getRowModel().rows.map(a=>(0,b.jsx)(f.TableRow,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(a=>(0,b.jsx)(f.TableCell,{children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:y.length,className:"h-24 text-center",children:"No accounts found."})})})]})})]})};a.s(["ChartOfAccountsTable",()=>t],85145)},325015,a=>{"use strict";let b=(0,a.i(170106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],325015)},624722,a=>{"use strict";let b=(0,a.i(170106).default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);a.s(["FileSpreadsheet",()=>b],624722)},64321,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(478788),e=a.i(452308),f=a.i(206015),g=a.i(866718),h=a.i(699570),i=a.i(786304),j=a.i(591119),k=a.i(757061),l=a.i(441921),m=a.i(580701),n=a.i(429246),o=a.i(335732),p=a.i(486192),q=a.i(915618),r=a.i(417755),s=a.i(177156),t=a.i(816201),u=a.i(325015),v=a.i(717545),w=a.i(596221),x=a.i(624722),y=a.i(267900),z=a.i(669922),A=a.i(823292),B=a.i(50944),C=a.i(695245),D=a.i(159501),E=a.i(156757),F=a.i(372228),G=a.i(405050);let H=(0,G.createServerReference)("4021556c29f8593c8b75447c9af1abcbe108470c15",G.callServer,void 0,G.findSourceMapURL,"createConsolidationSnapshot"),I=(0,G.createServerReference)("40ff69c2b7071d42a0ac39643163f8e24c7910106e",G.callServer,void 0,G.findSourceMapURL,"finalizeConsolidation"),J=(0,G.createServerReference)("40502f5db05f8ea11eb3073d476edcbc4c686157f2",G.callServer,void 0,G.findSourceMapURL,"detectIntercompanyTransactions");var K=a.i(368114);let L={DRAFT:"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",IN_PROGRESS:"bg-amber-500/10 text-amber-600 border-amber-500/20",COMPLETED:"bg-blue-500/10 text-blue-600 border-blue-500/20",APPROVED:"bg-green-500/10 text-green-600 border-green-500/20"},M=[{value:"FULL",label:"Full Consolidation (100%)"},{value:"PROPORTIONAL",label:"Proportional Consolidation"},{value:"EQUITY",label:"Equity Method"}],N=E.z.object({name:E.z.string().min(1,"Name is required").max(100),description:E.z.string().max(500).optional(),periodId:E.z.string().min(1,"Period is required"),consolidationMethod:E.z.enum(["FULL","PROPORTIONAL","EQUITY"])});function O({snapshots:a,periods:E,agencyId:G,canManage:O}){let P=(0,B.useRouter)(),[Q,R]=(0,c.useTransition)(),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),Y=(0,C.useForm)({resolver:(0,D.zodResolver)(N),defaultValues:{name:"",description:"",periodId:"",consolidationMethod:"FULL"}}),Z=[{accessorKey:"snapshotNumber",header:"Snapshot",cell:({row:a})=>(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("div",{className:"font-mono font-medium",children:a.original.snapshotNumber}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.original.name})]})},{accessorKey:"Period",header:"Period",cell:({row:a})=>(0,b.jsx)(i.Badge,{variant:"outline",children:a.original.Period.name})},{accessorKey:"consolidationMethod",header:"Method",cell:({row:a})=>(0,b.jsx)("span",{className:"text-sm",children:a.original.consolidationMethod})},{id:"counts",header:"Details",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex gap-3 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[a.original._count.WorksheetLines," lines"]}),(0,b.jsxs)("span",{children:[a.original._count.Adjustments," adj"]}),(0,b.jsxs)("span",{children:[a.original._count.Eliminations," elim"]})]})},{accessorKey:"status",header:"Status",cell:({row:a})=>(0,b.jsx)(i.Badge,{variant:"outline",className:(0,K.cn)("font-medium",L[a.original.status]),children:a.original.status.replace(/_/g," ")})},{accessorKey:"createdAt",header:"Created",cell:({row:a})=>(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,F.format)(new Date(a.original.createdAt),"MMM d, yyyy")})},{id:"actions",cell:({row:a})=>{let c=a.original;return(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>P.push(`/agency/${G}/fi/general-ledger/consolidation/${c.id}`),children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>{R(async()=>{let a=await J(c.id);a.success?(A.toast.success(`Detected ${a.data?.detected??0} intercompany transactions`),P.refresh()):A.toast.error(a.error??"Failed to detect IC transactions")})},disabled:"APPROVED"===c.status,children:[(0,b.jsx)(z.Link2,{className:"mr-2 h-4 w-4"}),"Detect IC Transactions"]}),O&&"APPROVED"!==c.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>{V(c),X(!0)},children:[(0,b.jsx)(t.CheckCircle,{className:"mr-2 h-4 w-4"}),"Finalize"]})]})]})]})}}],$=(0,d.useReactTable)({data:a,columns:Z,getCoreRowModel:(0,e.getCoreRowModel)()});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Total Snapshots"}),(0,b.jsx)(x.FileSpreadsheet,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(j.Card,{className:"border-green-500/20 bg-green-500/5",children:[(0,b.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Approved"}),(0,b.jsx)(t.CheckCircle,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.filter(a=>"APPROVED"===a.status).length})})]}),(0,b.jsxs)(j.Card,{className:"border-amber-500/20 bg-amber-500/5",children:[(0,b.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,b.jsx)(u.Play,{className:"h-4 w-4 text-amber-500"})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:a.filter(a=>"IN_PROGRESS"===a.status||"DRAFT"===a.status).length})})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(j.CardTitle,{className:"text-sm font-medium",children:"Open Periods"}),(0,b.jsx)(y.Building2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:E.length})})]})]}),(0,b.jsxs)(j.Card,{className:"border-border/50",children:[(0,b.jsx)(j.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(j.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(v.Layers,{className:"h-5 w-5"}),"Consolidation Snapshots"]}),(0,b.jsx)(j.CardDescription,{children:"Multi-entity financial consolidation with eliminations"})]}),O&&(0,b.jsxs)(h.Button,{onClick:()=>{Y.reset({name:`Consolidation ${(0,F.format)(new Date,"MMM yyyy")}`,description:"",periodId:"",consolidationMethod:"FULL"}),T(!0)},children:[(0,b.jsx)(q.Plus,{className:"mr-2 h-4 w-4"}),"New Consolidation"]})]})}),(0,b.jsx)(j.CardContent,{className:"p-0",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:$.getHeaderGroups().map(a=>(0,b.jsx)(f.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)(f.TableHead,{className:"bg-muted/50",children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(f.TableBody,{children:$.getRowModel().rows?.length?$.getRowModel().rows.map(a=>(0,b.jsx)(f.TableRow,{children:a.getVisibleCells().map(a=>(0,b.jsx)(f.TableCell,{children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:Z.length,className:"h-32 text-center text-muted-foreground",children:"No consolidation snapshots yet."})})})]})})]}),(0,b.jsx)(k.Sheet,{open:S,onOpenChange:T,children:(0,b.jsxs)(k.SheetContent,{className:"w-full sm:max-w-md overflow-y-auto",children:[(0,b.jsxs)(k.SheetHeader,{children:[(0,b.jsx)(k.SheetTitle,{children:"New Consolidation"}),(0,b.jsx)(k.SheetDescription,{children:"Create a consolidation snapshot to combine entity financials"})]}),(0,b.jsx)(l.Form,{...Y,children:(0,b.jsxs)("form",{onSubmit:Y.handleSubmit(a=>{R(async()=>{let b=await H({name:a.name,description:a.description,periodId:a.periodId,consolidationMethod:a.consolidationMethod,subAccountIds:[]});b.success?(A.toast.success("Consolidation snapshot created"),T(!1),P.refresh()):A.toast.error(b.error??"Failed to create snapshot")})}),className:"mt-6 space-y-4",children:[(0,b.jsx)(l.FormField,{control:Y.control,name:"name",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"Name"}),(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(g.Input,{...a,placeholder:"Q4 2025 Consolidation"})}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:Y.control,name:"periodId",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"Period"}),(0,b.jsxs)(m.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{placeholder:"Select period"})})}),(0,b.jsx)(m.SelectContent,{children:E.map(a=>(0,b.jsx)(m.SelectItem,{value:a.id,children:a.name},a.id))})]}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:Y.control,name:"consolidationMethod",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"Consolidation Method"}),(0,b.jsxs)(m.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(m.SelectTrigger,{children:(0,b.jsx)(m.SelectValue,{})})}),(0,b.jsx)(m.SelectContent,{children:M.map(a=>(0,b.jsx)(m.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(l.FormDescription,{children:"How to combine subsidiary financials"}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:Y.control,name:"description",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"Description"}),(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(n.Textarea,{...a,placeholder:"Optional notes...",rows:2})}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(k.SheetFooter,{className:"pt-4",children:(0,b.jsxs)(h.Button,{type:"submit",className:"w-full",disabled:Q,children:[Q&&(0,b.jsx)(w.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Consolidation"]})})]})})]})}),(0,b.jsx)(p.AlertDialog,{open:W,onOpenChange:X,children:(0,b.jsxs)(p.AlertDialogContent,{children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{children:"Finalize Consolidation"}),(0,b.jsx)(p.AlertDialogDescription,{children:U&&`Finalizing "${U.name}" will lock all adjustments and eliminations. This action cannot be undone.`})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,b.jsxs)(p.AlertDialogAction,{onClick:()=>{U&&R(async()=>{let a=await I(U.id);a.success?(A.toast.success("Consolidation finalized"),X(!1),P.refresh()):A.toast.error(a.error??"Failed to finalize")})},disabled:Q,children:[Q&&(0,b.jsx)(w.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Finalize"]})]})]})})]})}a.s(["ConsolidationDashboard",()=>O],64321)},897701,a=>{"use strict";var b,c,d="0123456789abcdef",e="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",g={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},h=!0,i="[DecimalError] ",j=i+"Invalid argument: ",k=i+"Precision limit exceeded",l=i+"crypto unavailable",m="[object Decimal]",n=Math.floor,o=Math.pow,p=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,q=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,r=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,s=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,t=e.length-1,u=f.length-1,v={toStringTag:m};function w(a){var b,c,d,e=a.length-1,f="",g=a[0];if(e>0){for(f+=g,b=1;b<e;b++)(c=7-(d=a[b]+"").length)&&(f+=H(c)),f+=d;(c=7-(d=(g=a[b])+"").length)&&(f+=H(c))}else if(0===g)return"0";for(;g%10==0;)g/=10;return f+g}function x(a,b,c){if(a!==~~a||a<b||a>c)throw Error(j+a)}function y(a,b,c,d){var e,f,g,h;for(f=a[0];f>=10;f/=10)--b;return--b<0?(b+=7,e=0):(e=Math.ceil((b+1)/7),b%=7),f=o(10,7-b),h=a[e]%f|0,null==d?b<3?(0==b?h=h/100|0:1==b&&(h=h/10|0),g=c<4&&99999==h||c>3&&49999==h||5e4==h||0==h):g=(c<4&&h+1==f||c>3&&h+1==f/2)&&(a[e+1]/f/100|0)==o(10,b-2)-1||(h==f/2||0==h)&&(a[e+1]/f/100|0)==0:b<4?(0==b?h=h/1e3|0:1==b?h=h/100|0:2==b&&(h=h/10|0),g=(d||c<4)&&9999==h||!d&&c>3&&4999==h):g=((d||c<4)&&h+1==f||!d&&c>3&&h+1==f/2)&&(a[e+1]/f/1e3|0)==o(10,b-3)-1,g}function z(a,b,c){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;)g[f]*=b;for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(void 0===g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}v.absoluteValue=v.abs=function(){var a=new this.constructor(this);return a.s<0&&(a.s=1),B(a)},v.ceil=function(){return B(new this.constructor(this),this.e+1,2)},v.clampedTo=v.clamp=function(a,b){var c=this.constructor;if(a=new c(a),b=new c(b),!a.s||!b.s)return new c(NaN);if(a.gt(b))throw Error(j+b);return 0>this.cmp(a)?a:this.cmp(b)>0?b:new c(this)},v.comparedTo=v.cmp=function(a){var b,c,d,e,f=this.d,g=(a=new this.constructor(a)).d,h=this.s,i=a.s;if(!f||!g)return h&&i?h!==i?h:f===g?0:!f^h<0?1:-1:NaN;if(!f[0]||!g[0])return f[0]?h:g[0]?-i:0;if(h!==i)return h;if(this.e!==a.e)return this.e>a.e^h<0?1:-1;for(b=0,c=(d=f.length)<(e=g.length)?d:e;b<c;++b)if(f[b]!==g[b])return f[b]>g[b]^h<0?1:-1;return d===e?0:d>e^h<0?1:-1},v.cosine=v.cos=function(){var a,b,d=this,e=d.constructor;return d.d?d.d[0]?(a=e.precision,b=e.rounding,e.precision=a+Math.max(d.e,d.sd())+7,e.rounding=1,d=function(a,b){var c,d,e;if(b.isZero())return b;(d=b.d.length)<32?e=(1/Q(4,c=Math.ceil(d/3))).toString():(c=16,e="2.3283064365386962890625e-10"),a.precision+=c,b=P(a,1,b.times(e),new a(1));for(var f=c;f--;){var g=b.times(b);b=g.times(g).minus(g).times(8).plus(1)}return a.precision-=c,b}(e,R(e,d)),e.precision=a,e.rounding=b,B(2==c||3==c?d.neg():d,a,b,!0)):new e(1):new e(NaN)},v.cubeRoot=v.cbrt=function(){var a,b,c,d,e,f,g,i,j,k,l=this.constructor;if(!this.isFinite()||this.isZero())return new l(this);for(h=!1,(f=this.s*o(this.s*this,1/3))&&Math.abs(f)!=1/0?d=new l(f.toString()):(c=w(this.d),(f=((a=this.e)-c.length+1)%3)&&(c+=1==f||-2==f?"0":"00"),f=o(c,1/3),a=n((a+1)/3)-(a%3==(a<0?-1:2)),(d=new l(c=f==1/0?"5e"+a:(c=f.toExponential()).slice(0,c.indexOf("e")+1)+a)).s=this.s),g=(a=l.precision)+3;;)if(d=A((k=(j=(i=d).times(i).times(i)).plus(this)).plus(this).times(i),k.plus(j),g+2,1),w(i.d).slice(0,g)===(c=w(d.d)).slice(0,g)){if("9999"!=(c=c.slice(g-3,g+1))&&(e||"4999"!=c)){+c&&(+c.slice(1)||"5"!=c.charAt(0))||(B(d,a+1,1),b=!d.times(d).times(d).eq(this));break}if(!e&&(B(i,a+1,0),i.times(i).times(i).eq(this))){d=i;break}g+=4,e=1}return h=!0,B(d,a,l.rounding,b)},v.decimalPlaces=v.dp=function(){var a,b=this.d,c=NaN;if(b){if(c=((a=b.length-1)-n(this.e/7))*7,a=b[a])for(;a%10==0;a/=10)c--;c<0&&(c=0)}return c},v.dividedBy=v.div=function(a){return A(this,new this.constructor(a))},v.dividedToIntegerBy=v.divToInt=function(a){var b=this.constructor;return B(A(this,new b(a),0,1,1),b.precision,b.rounding)},v.equals=v.eq=function(a){return 0===this.cmp(a)},v.floor=function(){return B(new this.constructor(this),this.e+1,3)},v.greaterThan=v.gt=function(a){return this.cmp(a)>0},v.greaterThanOrEqualTo=v.gte=function(a){var b=this.cmp(a);return 1==b||0===b},v.hyperbolicCosine=v.cosh=function(){var a,b,c,d,e,f=this,g=f.constructor,h=new g(1);if(!f.isFinite())return new g(f.s?1/0:NaN);if(f.isZero())return h;c=g.precision,d=g.rounding,g.precision=c+Math.max(f.e,f.sd())+4,g.rounding=1,(e=f.d.length)<32?b=(1/Q(4,a=Math.ceil(e/3))).toString():(a=16,b="2.3283064365386962890625e-10"),f=P(g,1,f.times(b),new g(1),!0);for(var i,j=a,k=new g(8);j--;)i=f.times(f),f=h.minus(i.times(k.minus(i.times(k))));return B(f,g.precision=c,g.rounding=d,!0)},v.hyperbolicSine=v.sinh=function(){var a,b,c,d,e=this,f=e.constructor;if(!e.isFinite()||e.isZero())return new f(e);if(b=f.precision,c=f.rounding,f.precision=b+Math.max(e.e,e.sd())+4,f.rounding=1,(d=e.d.length)<3)e=P(f,2,e,e,!0);else{a=(a=1.4*Math.sqrt(d))>16?16:0|a,e=P(f,2,e=e.times(1/Q(5,a)),e,!0);for(var g,h=new f(5),i=new f(16),j=new f(20);a--;)g=e.times(e),e=e.times(h.plus(g.times(i.times(g).plus(j))))}return f.precision=b,f.rounding=c,B(e,b,c,!0)},v.hyperbolicTangent=v.tanh=function(){var a,b,c=this.constructor;return this.isFinite()?this.isZero()?new c(this):(a=c.precision,b=c.rounding,c.precision=a+7,c.rounding=1,A(this.sinh(),this.cosh(),c.precision=a,c.rounding=b)):new c(this.s)},v.inverseCosine=v.acos=function(){var a=this,b=a.constructor,c=a.abs().cmp(1),d=b.precision,e=b.rounding;return -1!==c?0===c?a.isNeg()?F(b,d,e):new b(0):new b(NaN):a.isZero()?F(b,d+4,e).times(.5):(b.precision=d+6,b.rounding=1,a=new b(1).minus(a).div(a.plus(1)).sqrt().atan(),b.precision=d,b.rounding=e,a.times(2))},v.inverseHyperbolicCosine=v.acosh=function(){var a,b,c=this,d=c.constructor;return c.lte(1)?new d(c.eq(1)?0:NaN):c.isFinite()?(a=d.precision,b=d.rounding,d.precision=a+Math.max(Math.abs(c.e),c.sd())+4,d.rounding=1,h=!1,c=c.times(c).minus(1).sqrt().plus(c),h=!0,d.precision=a,d.rounding=b,c.ln()):new d(c)},v.inverseHyperbolicSine=v.asinh=function(){var a,b,c=this,d=c.constructor;return!c.isFinite()||c.isZero()?new d(c):(a=d.precision,b=d.rounding,d.precision=a+2*Math.max(Math.abs(c.e),c.sd())+6,d.rounding=1,h=!1,c=c.times(c).plus(1).sqrt().plus(c),h=!0,d.precision=a,d.rounding=b,c.ln())},v.inverseHyperbolicTangent=v.atanh=function(){var a,b,c,d,e=this,f=e.constructor;return e.isFinite()?e.e>=0?new f(e.abs().eq(1)?e.s/0:e.isZero()?e:NaN):(a=f.precision,b=f.rounding,Math.max(d=e.sd(),a)<-(2*e.e)-1)?B(new f(e),a,b,!0):(f.precision=c=d-e.e,e=A(e.plus(1),new f(1).minus(e),c+a,1),f.precision=a+4,f.rounding=1,e=e.ln(),f.precision=a,f.rounding=b,e.times(.5)):new f(NaN)},v.inverseSine=v.asin=function(){var a,b,c,d,e=this,f=e.constructor;return e.isZero()?new f(e):(b=e.abs().cmp(1),c=f.precision,d=f.rounding,-1!==b)?0===b?((a=F(f,c+4,d).times(.5)).s=e.s,a):new f(NaN):(f.precision=c+6,f.rounding=1,e=e.div(new f(1).minus(e.times(e)).sqrt().plus(1)).atan(),f.precision=c,f.rounding=d,e.times(2))},v.inverseTangent=v.atan=function(){var a,b,c,d,e,f,g,i,j,k=this,l=k.constructor,m=l.precision,n=l.rounding;if(k.isFinite()){if(k.isZero())return new l(k);else if(k.abs().eq(1)&&m+4<=u)return(g=F(l,m+4,n).times(.25)).s=k.s,g}else{if(!k.s)return new l(NaN);if(m+4<=u)return(g=F(l,m+4,n).times(.5)).s=k.s,g}for(l.precision=i=m+10,l.rounding=1,a=c=Math.min(28,i/7+2|0);a;--a)k=k.div(k.times(k).plus(1).sqrt().plus(1));for(h=!1,b=Math.ceil(i/7),d=1,j=k.times(k),g=new l(k),e=k;-1!==a;)if(e=e.times(j),f=g.minus(e.div(d+=2)),e=e.times(j),void 0!==(g=f.plus(e.div(d+=2))).d[b])for(a=b;g.d[a]===f.d[a]&&a--;);return c&&(g=g.times(2<<c-1)),h=!0,B(g,l.precision=m,l.rounding=n,!0)},v.isFinite=function(){return!!this.d},v.isInteger=v.isInt=function(){return!!this.d&&n(this.e/7)>this.d.length-2},v.isNaN=function(){return!this.s},v.isNegative=v.isNeg=function(){return this.s<0},v.isPositive=v.isPos=function(){return this.s>0},v.isZero=function(){return!!this.d&&0===this.d[0]},v.lessThan=v.lt=function(a){return 0>this.cmp(a)},v.lessThanOrEqualTo=v.lte=function(a){return 1>this.cmp(a)},v.logarithm=v.log=function(a){var b,c,d,e,f,g,i,j=this.constructor,k=j.precision,l=j.rounding;if(null==a)a=new j(10),b=!0;else{if(c=(a=new j(a)).d,a.s<0||!c||!c[0]||a.eq(1))return new j(NaN);b=a.eq(10)}if(c=this.d,this.s<0||!c||!c[0]||this.eq(1))return new j(c&&!c[0]?-1/0:1!=this.s?NaN:c?0:1/0);if(b)if(c.length>1)e=!0;else{for(d=c[0];d%10==0;)d/=10;e=1!==d}if(h=!1,y((i=A(f=M(this,g=k+5),b?E(j,g+10):M(a,g),g,1)).d,d=k,l))do if(g+=10,i=A(f=M(this,g),b?E(j,g+10):M(a,g),g,1),!e){+w(i.d).slice(d+1,d+15)+1==1e14&&(i=B(i,k+1,0));break}while(y(i.d,d+=10,l))return h=!0,B(i,k,l)},v.minus=v.sub=function(a){var b,c,d,e,f,g,i,j,k,l,m,o,p=this.constructor;if(a=new p(a),!this.d||!a.d)return this.s&&a.s?this.d?a.s=-a.s:a=new p(a.d||this.s!==a.s?this:NaN):a=new p(NaN),a;if(this.s!=a.s)return a.s=-a.s,this.plus(a);if(k=this.d,o=a.d,i=p.precision,j=p.rounding,!k[0]||!o[0]){if(o[0])a.s=-a.s;else{if(!k[0])return new p(3===j?-0:0);a=new p(this)}return h?B(a,i,j):a}if(c=n(a.e/7),l=n(this.e/7),k=k.slice(),f=l-c){for((m=f<0)?(b=k,f=-f,g=o.length):(b=o,c=l,g=k.length),f>(d=Math.max(Math.ceil(i/7),g)+2)&&(f=d,b.length=1),b.reverse(),d=f;d--;)b.push(0);b.reverse()}else{for((m=(d=k.length)<(g=o.length))&&(g=d),d=0;d<g;d++)if(k[d]!=o[d]){m=k[d]<o[d];break}f=0}for(m&&(b=k,k=o,o=b,a.s=-a.s),g=k.length,d=o.length-g;d>0;--d)k[g++]=0;for(d=o.length;d>f;){if(k[--d]<o[d]){for(e=d;e&&0===k[--e];)k[e]=1e7-1;--k[e],k[d]+=1e7}k[d]-=o[d]}for(;0===k[--g];)k.pop();for(;0===k[0];k.shift())--c;return k[0]?(a.d=k,a.e=D(k,c),h?B(a,i,j):a):new p(3===j?-0:0)},v.modulo=v.mod=function(a){var b,c=this.constructor;return(a=new c(a),this.d&&a.s&&(!a.d||a.d[0]))?a.d&&(!this.d||this.d[0])?(h=!1,9==c.modulo?(b=A(this,a.abs(),0,3,1),b.s*=a.s):b=A(this,a,0,c.modulo,1),b=b.times(a),h=!0,this.minus(b)):B(new c(this),c.precision,c.rounding):new c(NaN)},v.naturalExponential=v.exp=function(){return L(this)},v.naturalLogarithm=v.ln=function(){return M(this)},v.negated=v.neg=function(){var a=new this.constructor(this);return a.s=-a.s,B(a)},v.plus=v.add=function(a){var b,c,d,e,f,g,i,j,k,l,m=this.constructor;if(a=new m(a),!this.d||!a.d)return this.s&&a.s?this.d||(a=new m(a.d||this.s===a.s?this:NaN)):a=new m(NaN),a;if(this.s!=a.s)return a.s=-a.s,this.minus(a);if(k=this.d,l=a.d,i=m.precision,j=m.rounding,!k[0]||!l[0])return l[0]||(a=new m(this)),h?B(a,i,j):a;if(f=n(this.e/7),d=n(a.e/7),k=k.slice(),e=f-d){for(e<0?(c=k,e=-e,g=l.length):(c=l,d=f,g=k.length),e>(g=(f=Math.ceil(i/7))>g?f+1:g+1)&&(e=g,c.length=1),c.reverse();e--;)c.push(0);c.reverse()}for((g=k.length)-(e=l.length)<0&&(e=g,c=l,l=k,k=c),b=0;e;)b=(k[--e]=k[e]+l[e]+b)/1e7|0,k[e]%=1e7;for(b&&(k.unshift(b),++d),g=k.length;0==k[--g];)k.pop();return a.d=k,a.e=D(k,d),h?B(a,i,j):a},v.precision=v.sd=function(a){var b;if(void 0!==a&&!!a!==a&&1!==a&&0!==a)throw Error(j+a);return this.d?(b=G(this.d),a&&this.e+1>b&&(b=this.e+1)):b=NaN,b},v.round=function(){var a=this.constructor;return B(new a(this),this.e+1,a.rounding)},v.sine=v.sin=function(){var a,b,d=this,e=d.constructor;return d.isFinite()?d.isZero()?new e(d):(a=e.precision,b=e.rounding,e.precision=a+Math.max(d.e,d.sd())+7,e.rounding=1,d=function(a,b){var c,d=b.d.length;if(d<3)return b.isZero()?b:P(a,2,b,b);c=(c=1.4*Math.sqrt(d))>16?16:0|c,b=P(a,2,b=b.times(1/Q(5,c)),b);for(var e,f=new a(5),g=new a(16),h=new a(20);c--;)e=b.times(b),b=b.times(f.plus(e.times(g.times(e).minus(h))));return b}(e,R(e,d)),e.precision=a,e.rounding=b,B(c>2?d.neg():d,a,b,!0)):new e(NaN)},v.squareRoot=v.sqrt=function(){var a,b,c,d,e,f,g=this.d,i=this.e,j=this.s,k=this.constructor;if(1!==j||!g||!g[0])return new k(!j||j<0&&(!g||g[0])?NaN:g?this:1/0);for(h=!1,0==(j=Math.sqrt(+this))||j==1/0?(((b=w(g)).length+i)%2==0&&(b+="0"),j=Math.sqrt(b),i=n((i+1)/2)-(i<0||i%2),d=new k(b=j==1/0?"5e"+i:(b=j.toExponential()).slice(0,b.indexOf("e")+1)+i)):d=new k(j.toString()),c=(i=k.precision)+3;;)if(d=(f=d).plus(A(this,f,c+2,1)).times(.5),w(f.d).slice(0,c)===(b=w(d.d)).slice(0,c)){if("9999"!=(b=b.slice(c-3,c+1))&&(e||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(B(d,i+1,1),a=!d.times(d).eq(this));break}if(!e&&(B(f,i+1,0),f.times(f).eq(this))){d=f;break}c+=4,e=1}return h=!0,B(d,i,k.rounding,a)},v.tangent=v.tan=function(){var a,b,d=this,e=d.constructor;return d.isFinite()?d.isZero()?new e(d):(a=e.precision,b=e.rounding,e.precision=a+10,e.rounding=1,(d=d.sin()).s=1,d=A(d,new e(1).minus(d.times(d)).sqrt(),a+10,0),e.precision=a,e.rounding=b,B(2==c||4==c?d.neg():d,a,b,!0)):new e(NaN)},v.times=v.mul=function(a){var b,c,d,e,f,g,i,j,k,l=this.constructor,m=this.d,o=(a=new l(a)).d;if(a.s*=this.s,!m||!m[0]||!o||!o[0])return new l(!a.s||m&&!m[0]&&!o||o&&!o[0]&&!m?NaN:!m||!o?a.s/0:0*a.s);for(c=n(this.e/7)+n(a.e/7),(j=m.length)<(k=o.length)&&(f=m,m=o,o=f,g=j,j=k,k=g),f=[],d=g=j+k;d--;)f.push(0);for(d=k;--d>=0;){for(b=0,e=j+d;e>d;)i=f[e]+o[d]*m[e-d-1]+b,f[e--]=i%1e7|0,b=i/1e7|0;f[e]=(f[e]+b)%1e7|0}for(;!f[--g];)f.pop();return b?++c:f.shift(),a.d=f,a.e=D(f,c),h?B(a,l.precision,l.rounding):a},v.toBinary=function(a,b){return S(this,2,a,b)},v.toDecimalPlaces=v.toDP=function(a,b){var c=this,d=c.constructor;return(c=new d(c),void 0===a)?c:(x(a,0,1e9),void 0===b?b=d.rounding:x(b,0,8),B(c,a+c.e+1,b))},v.toExponential=function(a,b){var c,d=this,e=d.constructor;return void 0===a?c=C(d,!0):(x(a,0,1e9),void 0===b?b=e.rounding:x(b,0,8),c=C(d=B(new e(d),a+1,b),!0,a+1)),d.isNeg()&&!d.isZero()?"-"+c:c},v.toFixed=function(a,b){var c,d,e=this.constructor;return void 0===a?c=C(this):(x(a,0,1e9),void 0===b?b=e.rounding:x(b,0,8),c=C(d=B(new e(this),a+this.e+1,b),!1,a+d.e+1)),this.isNeg()&&!this.isZero()?"-"+c:c},v.toFraction=function(a){var b,c,d,e,f,g,i,k,l,m,n,p,q=this.d,r=this.constructor;if(!q)return new r(this);if(l=c=new r(1),d=k=new r(0),g=(f=(b=new r(d)).e=G(q)-this.e-1)%7,b.d[0]=o(10,g<0?7+g:g),null==a)a=f>0?b:l;else{if(!(i=new r(a)).isInt()||i.lt(l))throw Error(j+i);a=i.gt(b)?f>0?b:l:i}for(h=!1,i=new r(w(q)),m=r.precision,r.precision=f=7*q.length*2;n=A(i,b,0,1,1),1!=(e=c.plus(n.times(d))).cmp(a);)c=d,d=e,e=l,l=k.plus(n.times(e)),k=e,e=b,b=i.minus(n.times(e)),i=e;return e=A(a.minus(c),d,0,1,1),k=k.plus(e.times(l)),c=c.plus(e.times(d)),k.s=l.s=this.s,p=1>A(l,d,f,1).minus(this).abs().cmp(A(k,c,f,1).minus(this).abs())?[l,d]:[k,c],r.precision=m,h=!0,p},v.toHexadecimal=v.toHex=function(a,b){return S(this,16,a,b)},v.toNearest=function(a,b){var c=this,d=c.constructor;if(c=new d(c),null==a){if(!c.d)return c;a=new d(1),b=d.rounding}else{if(a=new d(a),void 0===b?b=d.rounding:x(b,0,8),!c.d)return a.s?c:a;if(!a.d)return a.s&&(a.s=c.s),a}return a.d[0]?(h=!1,c=A(c,a,0,b,1).times(a),h=!0,B(c)):(a.s=c.s,c=a),c},v.toNumber=function(){return+this},v.toOctal=function(a,b){return S(this,8,a,b)},v.toPower=v.pow=function(a){var b,c,d,e,f,g,i=this,j=i.constructor,k=+(a=new j(a));if(!i.d||!a.d||!i.d[0]||!a.d[0])return new j(o(+i,k));if((i=new j(i)).eq(1))return i;if(d=j.precision,f=j.rounding,a.eq(1))return B(i,d,f);if((b=n(a.e/7))>=a.d.length-1&&(c=k<0?-k:k)<=0x1fffffffffffff)return e=I(j,i,c,d),a.s<0?new j(1).div(e):B(e,d,f);if((g=i.s)<0){if(b<a.d.length-1)return new j(NaN);if((1&a.d[b])==0&&(g=1),0==i.e&&1==i.d[0]&&1==i.d.length)return i.s=g,i}return(b=0!=(c=o(+i,k))&&isFinite(c)?new j(c+"").e:n(k*(Math.log("0."+w(i.d))/Math.LN10+i.e+1)))>j.maxE+1||b<j.minE-1?new j(b>0?g/0:0):(h=!1,j.rounding=i.s=1,c=Math.min(12,(b+"").length),(e=L(a.times(M(i,d+c)),d)).d&&y((e=B(e,d+5,1)).d,d,f)&&(b=d+10,+w((e=B(L(a.times(M(i,b+c)),b),b+5,1)).d).slice(d+1,d+15)+1==1e14&&(e=B(e,d+1,0))),e.s=g,h=!0,j.rounding=f,B(e,d,f))},v.toPrecision=function(a,b){var c,d=this,e=d.constructor;return void 0===a?c=C(d,d.e<=e.toExpNeg||d.e>=e.toExpPos):(x(a,1,1e9),void 0===b?b=e.rounding:x(b,0,8),c=C(d=B(new e(d),a,b),a<=d.e||d.e<=e.toExpNeg,a)),d.isNeg()&&!d.isZero()?"-"+c:c},v.toSignificantDigits=v.toSD=function(a,b){var c=this.constructor;return void 0===a?(a=c.precision,b=c.rounding):(x(a,1,1e9),void 0===b?b=c.rounding:x(b,0,8)),B(new c(this),a,b)},v.toString=function(){var a=this.constructor,b=C(this,this.e<=a.toExpNeg||this.e>=a.toExpPos);return this.isNeg()&&!this.isZero()?"-"+b:b},v.truncated=v.trunc=function(){return B(new this.constructor(this),this.e+1,1)},v.valueOf=v.toJSON=function(){var a=this.constructor,b=C(this,this.e<=a.toExpNeg||this.e>=a.toExpPos);return this.isNeg()?"-"+b:b};var A=function(){function a(a,b,c){var d,e=0,f=a.length;for(a=a.slice();f--;)d=a[f]*b+e,a[f]=d%c|0,e=d/c|0;return e&&a.unshift(e),a}function c(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function d(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;)a.shift()}return function(e,f,g,h,i,j){var k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,C,D,E,F,G=e.constructor,H=e.s==f.s?1:-1,I=e.d,J=f.d;if(!I||!I[0]||!J||!J[0])return new G(!e.s||!f.s||(I?J&&I[0]==J[0]:!J)?NaN:I&&0==I[0]||!J?0*H:H/0);for(j?(p=1,l=e.e-f.e):(j=1e7,p=7,l=n(e.e/p)-n(f.e/p)),E=J.length,C=I.length,u=(t=new G(H)).d=[],m=0;J[m]==(I[m]||0);m++);if(J[m]>(I[m]||0)&&l--,null==g?(y=g=G.precision,h=G.rounding):y=i?g+(e.e-f.e)+1:g,y<0)u.push(1),q=!0;else{if(y=y/p+2|0,m=0,1==E){for(o=0,J=J[0],y++;(m<C||o)&&y--;m++)z=o*j+(I[m]||0),u[m]=z/J|0,o=z%J|0;q=o||m<C}else{for((o=j/(J[0]+1)|0)>1&&(J=a(J,o,j),I=a(I,o,j),E=J.length,C=I.length),A=E,w=(v=I.slice(0,E)).length;w<E;)v[w++]=0;(F=J.slice()).unshift(0),D=J[0],J[1]>=j/2&&++D;do o=0,(k=c(J,v,E,w))<0?(x=v[0],E!=w&&(x=x*j+(v[1]||0)),(o=x/D|0)>1?(o>=j&&(o=j-1),s=(r=a(J,o,j)).length,w=v.length,1==(k=c(r,v,s,w))&&(o--,d(r,E<s?F:J,s,j))):(0==o&&(k=o=1),r=J.slice()),(s=r.length)<w&&r.unshift(0),d(v,r,w,j),-1==k&&(w=v.length,(k=c(J,v,E,w))<1&&(o++,d(v,E<w?F:J,w,j))),w=v.length):0===k&&(o++,v=[0]),u[m++]=o,k&&v[0]?v[w++]=I[A]||0:(v=[I[A]],w=1);while((A++<C||void 0!==v[0])&&y--)q=void 0!==v[0]}u[0]||u.shift()}if(1==p)t.e=l,b=q;else{for(m=1,o=u[0];o>=10;o/=10)m++;t.e=m+l*p-1,B(t,i?g+t.e+1:g,h,q)}return t}}();function B(a,b,c,d){var e,f,g,i,j,k,l,m,n,p=a.constructor;a:if(null!=b){if(!(m=a.d))return a;for(e=1,i=m[0];i>=10;i/=10)e++;if((f=b-e)<0)f+=7,g=b,j=(l=m[n=0])/o(10,e-g-1)%10|0;else if((n=Math.ceil((f+1)/7))>=(i=m.length))if(d){for(;i++<=n;)m.push(0);l=j=0,e=1,f%=7,g=f-7+1}else break a;else{for(e=1,l=i=m[n];i>=10;i/=10)e++;f%=7,j=(g=f-7+e)<0?0:l/o(10,e-g-1)%10|0}if(d=d||b<0||void 0!==m[n+1]||(g<0?l:l%o(10,e-g-1)),k=c<4?(j||d)&&(0==c||c==(a.s<0?3:2)):j>5||5==j&&(4==c||d||6==c&&(f>0?g>0?l/o(10,e-g):0:m[n-1])%10&1||c==(a.s<0?8:7)),b<1||!m[0])return m.length=0,k?(b-=a.e+1,m[0]=o(10,(7-b%7)%7),a.e=-b||0):m[0]=a.e=0,a;if(0==f?(m.length=n,i=1,n--):(m.length=n+1,i=o(10,7-f),m[n]=g>0?(l/o(10,e-g)%o(10,g)|0)*i:0),k)for(;;)if(0==n){for(f=1,g=m[0];g>=10;g/=10)f++;for(g=m[0]+=i,i=1;g>=10;g/=10)i++;f!=i&&(a.e++,1e7==m[0]&&(m[0]=1));break}else{if(m[n]+=i,1e7!=m[n])break;m[n--]=0,i=1}for(f=m.length;0===m[--f];)m.pop()}return h&&(a.e>p.maxE?(a.d=null,a.e=NaN):a.e<p.minE&&(a.e=0,a.d=[0])),a}function C(a,b,c){if(!a.isFinite())return N(a);var d,e=a.e,f=w(a.d),g=f.length;return b?(c&&(d=c-g)>0?f=f.charAt(0)+"."+f.slice(1)+H(d):g>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(a.e<0?"e":"e+")+a.e):e<0?(f="0."+H(-e-1)+f,c&&(d=c-g)>0&&(f+=H(d))):e>=g?(f+=H(e+1-g),c&&(d=c-e-1)>0&&(f=f+"."+H(d))):((d=e+1)<g&&(f=f.slice(0,d)+"."+f.slice(d)),c&&(d=c-g)>0&&(e+1===g&&(f+="."),f+=H(d))),f}function D(a,b){var c=a[0];for(b*=7;c>=10;c/=10)b++;return b}function E(a,b,c){if(b>t)throw h=!0,c&&(a.precision=c),Error(k);return B(new a(e),b,1,!0)}function F(a,b,c){if(b>u)throw Error(k);return B(new a(f),b,c,!0)}function G(a){var b=a.length-1,c=7*b+1;if(b=a[b]){for(;b%10==0;b/=10)c--;for(b=a[0];b>=10;b/=10)c++}return c}function H(a){for(var b="";a--;)b+="0";return b}function I(a,b,c,d){var e,f=new a(1),g=Math.ceil(d/7+4);for(h=!1;;){if(c%2&&T((f=f.times(b)).d,g)&&(e=!0),0===(c=n(c/2))){c=f.d.length-1,e&&0===f.d[c]&&++f.d[c];break}T((b=b.times(b)).d,g)}return h=!0,f}function J(a){return 1&a.d[a.d.length-1]}function K(a,b,c){for(var d,e,f=new a(b[0]),g=0;++g<b.length;){if(!(e=new a(b[g])).s){f=e;break}((d=f.cmp(e))===c||0===d&&f.s===c)&&(f=e)}return f}function L(a,b){var c,d,e,f,g,i,j,k=0,l=0,m=0,n=a.constructor,p=n.rounding,q=n.precision;if(!a.d||!a.d[0]||a.e>17)return new n(a.d?!a.d[0]?1:a.s<0?0:1/0:a.s?a.s<0?0:a:0/0);for(null==b?(h=!1,j=q):j=b,i=new n(.03125);a.e>-2;)a=a.times(i),m+=5;for(j+=d=Math.log(o(2,m))/Math.LN10*2+5|0,c=f=g=new n(1),n.precision=j;;){if(f=B(f.times(a),j,1),c=c.times(++l),w((i=g.plus(A(f,c,j,1))).d).slice(0,j)===w(g.d).slice(0,j)){for(e=m;e--;)g=B(g.times(g),j,1);if(null!=b)return n.precision=q,g;if(!(k<3&&y(g.d,j-d,p,k)))return B(g,n.precision=q,p,h=!0);n.precision=j+=10,c=f=i=new n(1),l=0,k++}g=i}}function M(a,b){var c,d,e,f,g,i,j,k,l,m,n,o=1,p=a,q=p.d,r=p.constructor,s=r.rounding,t=r.precision;if(p.s<0||!q||!q[0]||!p.e&&1==q[0]&&1==q.length)return new r(q&&!q[0]?-1/0:1!=p.s?NaN:q?0:p);if(null==b?(h=!1,l=t):l=b,r.precision=l+=10,d=(c=w(q)).charAt(0),!(15e14>Math.abs(f=p.e)))return k=E(r,l+2,t).times(f+""),p=M(new r(d+"."+c.slice(1)),l-10).plus(k),r.precision=t,null==b?B(p,t,s,h=!0):p;for(;d<7&&1!=d||1==d&&c.charAt(1)>3;)d=(c=w((p=p.times(a)).d)).charAt(0),o++;for(f=p.e,d>1?(p=new r("0."+c),f++):p=new r(d+"."+c.slice(1)),m=p,j=g=p=A(p.minus(1),p.plus(1),l,1),n=B(p.times(p),l,1),e=3;;){if(g=B(g.times(n),l,1),w((k=j.plus(A(g,new r(e),l,1))).d).slice(0,l)===w(j.d).slice(0,l)){if(j=j.times(2),0!==f&&(j=j.plus(E(r,l+2,t).times(f+""))),j=A(j,new r(o),l,1),null!=b)return r.precision=t,j;if(!y(j.d,l-10,s,i))return B(j,r.precision=t,s,h=!0);r.precision=l+=10,k=g=p=A(m.minus(1),m.plus(1),l,1),n=B(p.times(p),l,1),e=i=1}j=k,e+=2}}function N(a){return String(a.s*a.s/0)}function O(a,b){var c,d,e;for((c=b.indexOf("."))>-1&&(b=b.replace(".","")),(d=b.search(/e/i))>0?(c<0&&(c=d),c+=+b.slice(d+1),b=b.substring(0,d)):c<0&&(c=b.length),d=0;48===b.charCodeAt(d);d++);for(e=b.length;48===b.charCodeAt(e-1);--e);if(b=b.slice(d,e)){if(e-=d,a.e=c=c-d-1,a.d=[],d=(c+1)%7,c<0&&(d+=7),d<e){for(d&&a.d.push(+b.slice(0,d)),e-=7;d<e;)a.d.push(+b.slice(d,d+=7));d=7-(b=b.slice(d)).length}else d-=e;for(;d--;)b+="0";a.d.push(+b),h&&(a.e>a.constructor.maxE?(a.d=null,a.e=NaN):a.e<a.constructor.minE&&(a.e=0,a.d=[0]))}else a.e=0,a.d=[0];return a}function P(a,b,c,d,e){var f,g,i,j,k=a.precision,l=Math.ceil(k/7);for(h=!1,j=c.times(c),i=new a(d);;){if(g=A(i.times(j),new a(b++*b++),k,1),i=e?d.plus(g):d.minus(g),d=A(g.times(j),new a(b++*b++),k,1),void 0!==(g=i.plus(d)).d[l]){for(f=l;g.d[f]===i.d[f]&&f--;);if(-1==f)break}f=i,i=d,d=g,g=f}return h=!0,g.d.length=l+1,g}function Q(a,b){for(var c=a;--b;)c*=a;return c}function R(a,b){var d,e=b.s<0,f=F(a,a.precision,1),g=f.times(.5);if((b=b.abs()).lte(g))return c=e?4:1,b;if((d=b.divToInt(f)).isZero())c=e?3:2;else{if((b=b.minus(d.times(f))).lte(g))return c=J(d)?e?2:3:e?4:1,b;c=J(d)?e?1:4:e?3:2}return b.minus(f).abs()}function S(a,c,e,f){var g,h,i,j,k,l,m,n,o,p=a.constructor,q=void 0!==e;if(q?(x(e,1,1e9),void 0===f?f=p.rounding:x(f,0,8)):(e=p.precision,f=p.rounding),a.isFinite()){for(i=(m=C(a)).indexOf("."),q?(g=2,16==c?e=4*e-3:8==c&&(e=3*e-2)):g=c,i>=0&&(m=m.replace(".",""),(o=new p(1)).e=m.length-i,o.d=z(C(o),10,g),o.e=o.d.length),h=k=(n=z(m,10,g)).length;0==n[--k];)n.pop();if(n[0]){if(i<0?h--:((a=new p(a)).d=n,a.e=h,n=(a=A(a,o,e,f,0,g)).d,h=a.e,l=b),i=n[e],j=g/2,l=l||void 0!==n[e+1],l=f<4?(void 0!==i||l)&&(0===f||f===(a.s<0?3:2)):i>j||i===j&&(4===f||l||6===f&&1&n[e-1]||f===(a.s<0?8:7)),n.length=e,l)for(;++n[--e]>g-1;)n[e]=0,e||(++h,n.unshift(1));for(k=n.length;!n[k-1];--k);for(i=0,m="";i<k;i++)m+=d.charAt(n[i]);if(q){if(k>1)if(16==c||8==c){for(i=16==c?4:3,--k;k%i;k++)m+="0";for(k=(n=z(m,g,c)).length;!n[k-1];--k);for(i=1,m="1.";i<k;i++)m+=d.charAt(n[i])}else m=m.charAt(0)+"."+m.slice(1);m=m+(h<0?"p":"p+")+h}else if(h<0){for(;++h;)m="0"+m;m="0."+m}else if(++h>k)for(h-=k;h--;)m+="0";else h<k&&(m=m.slice(0,h)+"."+m.slice(h))}else m=q?"0p+0":"0";m=(16==c?"0x":2==c?"0b":8==c?"0o":"")+m}else m=N(a);return a.s<0?"-"+m:m}function T(a,b){if(a.length>b)return a.length=b,!0}function U(a){return new this(a).abs()}function V(a){return new this(a).acos()}function W(a){return new this(a).acosh()}function X(a,b){return new this(a).plus(b)}function Y(a){return new this(a).asin()}function Z(a){return new this(a).asinh()}function $(a){return new this(a).atan()}function _(a){return new this(a).atanh()}function aa(a,b){a=new this(a),b=new this(b);var c,d=this.precision,e=this.rounding,f=d+4;return a.s&&b.s?a.d||b.d?!b.d||a.isZero()?(c=b.s<0?F(this,d,e):new this(0)).s=a.s:!a.d||b.isZero()?(c=F(this,f,1).times(.5)).s=a.s:b.s<0?(this.precision=f,this.rounding=1,c=this.atan(A(a,b,f,1)),b=F(this,f,1),this.precision=d,this.rounding=e,c=a.s<0?c.minus(b):c.plus(b)):c=this.atan(A(a,b,f,1)):(c=F(this,f,1).times(b.s>0?.25:.75)).s=a.s:c=new this(NaN),c}function ab(a){return new this(a).cbrt()}function ac(a){return B(a=new this(a),a.e+1,2)}function ad(a,b,c){return new this(a).clamp(b,c)}function ae(a){if(!a||"object"!=typeof a)throw Error(i+"Object expected");var b,c,d,e=!0===a.defaults,f=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(b=0;b<f.length;b+=3)if(c=f[b],e&&(this[c]=g[c]),void 0!==(d=a[c]))if(n(d)===d&&d>=f[b+1]&&d<=f[b+2])this[c]=d;else throw Error(j+c+": "+d);if(c="crypto",e&&(this[c]=g[c]),void 0!==(d=a[c]))if(!0===d||!1===d||0===d||1===d)if(d)if("u">typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[c]=!0;else throw Error(l);else this[c]=!1;else throw Error(j+c+": "+d);return this}function af(a){return new this(a).cos()}function ag(a){return new this(a).cosh()}function ah(a,b){return new this(a).div(b)}function ai(a){return new this(a).exp()}function aj(a){return B(a=new this(a),a.e+1,3)}function ak(){var a,b,c=new this(0);for(a=0,h=!1;a<arguments.length;)if(b=new this(arguments[a++]),b.d)c.d&&(c=c.plus(b.times(b)));else{if(b.s)return h=!0,new this(1/0);c=b}return h=!0,c.sqrt()}function al(a){return a instanceof aG||a&&a.toStringTag===m||!1}function am(a){return new this(a).ln()}function an(a,b){return new this(a).log(b)}function ao(a){return new this(a).log(2)}function ap(a){return new this(a).log(10)}function aq(){return K(this,arguments,-1)}function ar(){return K(this,arguments,1)}function as(a,b){return new this(a).mod(b)}function at(a,b){return new this(a).mul(b)}function au(a,b){return new this(a).pow(b)}function av(a){var b,c,d,e,f=0,g=new this(1),h=[];if(void 0===a?a=this.precision:x(a,1,1e9),d=Math.ceil(a/7),this.crypto)if(crypto.getRandomValues)for(b=crypto.getRandomValues(new Uint32Array(d));f<d;)(e=b[f])>=429e7?b[f]=crypto.getRandomValues(new Uint32Array(1))[0]:h[f++]=e%1e7;else if(crypto.randomBytes){for(b=crypto.randomBytes(d*=4);f<d;)(e=b[f]+(b[f+1]<<8)+(b[f+2]<<16)+((127&b[f+3])<<24))>=214e7?crypto.randomBytes(4).copy(b,f):(h.push(e%1e7),f+=4);f=d/4}else throw Error(l);else for(;f<d;)h[f++]=1e7*Math.random()|0;for(d=h[--f],a%=7,d&&a&&(e=o(10,7-a),h[f]=(d/e|0)*e);0===h[f];f--)h.pop();if(f<0)c=0,h=[0];else{for(c=-1;0===h[0];c-=7)h.shift();for(d=1,e=h[0];e>=10;e/=10)d++;d<7&&(c-=7-d)}return g.e=c,g.d=h,g}function aw(a){return B(a=new this(a),a.e+1,this.rounding)}function ax(a){return(a=new this(a)).d?a.d[0]?a.s:0*a.s:a.s||NaN}function ay(a){return new this(a).sin()}function az(a){return new this(a).sinh()}function aA(a){return new this(a).sqrt()}function aB(a,b){return new this(a).sub(b)}function aC(){var a=0,b=arguments,c=new this(b[0]);for(h=!1;c.s&&++a<b.length;)c=c.plus(b[a]);return h=!0,B(c,this.precision,this.rounding)}function aD(a){return new this(a).tan()}function aE(a){return new this(a).tanh()}function aF(a){return B(a=new this(a),a.e+1,1)}v[Symbol.for("nodejs.util.inspect.custom")]=v.toString,v[Symbol.toStringTag]="Decimal";var aG=v.constructor=function a(b){var c,d,e;function f(a){var b,c,d;if(!(this instanceof f))return new f(a);if(this.constructor=f,al(a)){this.s=a.s,h?!a.d||a.e>f.maxE?(this.e=NaN,this.d=null):a.e<f.minE?(this.e=0,this.d=[0]):(this.e=a.e,this.d=a.d.slice()):(this.e=a.e,this.d=a.d?a.d.slice():a.d);return}if("number"==(d=typeof a)){if(0===a){this.s=1/a<0?-1:1,this.e=0,this.d=[0];return}if(a<0?(a=-a,this.s=-1):this.s=1,a===~~a&&a<1e7){for(b=0,c=a;c>=10;c/=10)b++;h?b>f.maxE?(this.e=NaN,this.d=null):b<f.minE?(this.e=0,this.d=[0]):(this.e=b,this.d=[a]):(this.e=b,this.d=[a]);return}if(0*a!=0){a||(this.s=NaN),this.e=NaN,this.d=null;return}return O(this,a.toString())}if("string"===d)return 45===(c=a.charCodeAt(0))?(a=a.slice(1),this.s=-1):(43===c&&(a=a.slice(1)),this.s=1),s.test(a)?O(this,a):function(a,b){var c,d,e,f,g,i,k,l,m;if(b.indexOf("_")>-1){if(b=b.replace(/(\d)_(?=\d)/g,"$1"),s.test(b))return O(a,b)}else if("Infinity"===b||"NaN"===b)return+b||(a.s=NaN),a.e=NaN,a.d=null,a;if(q.test(b))c=16,b=b.toLowerCase();else if(p.test(b))c=2;else if(r.test(b))c=8;else throw Error(j+b);for((f=b.search(/p/i))>0?(k=+b.slice(f+1),b=b.substring(2,f)):b=b.slice(2),g=(f=b.indexOf("."))>=0,d=a.constructor,g&&(f=(i=(b=b.replace(".","")).length)-f,e=I(d,new d(c),f,2*f)),f=m=(l=z(b,c,1e7)).length-1;0===l[f];--f)l.pop();return f<0?new d(0*a.s):(a.e=D(l,m),a.d=l,h=!1,g&&(a=A(a,e,4*i)),k&&(a=a.times(54>Math.abs(k)?o(2,k):aG.pow(2,k))),h=!0,a)}(this,a);if("bigint"===d)return a<0?(a=-a,this.s=-1):this.s=1,O(this,a.toString());throw Error(j+a)}if(f.prototype=v,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.EUCLID=9,f.config=f.set=ae,f.clone=a,f.isDecimal=al,f.abs=U,f.acos=V,f.acosh=W,f.add=X,f.asin=Y,f.asinh=Z,f.atan=$,f.atanh=_,f.atan2=aa,f.cbrt=ab,f.ceil=ac,f.clamp=ad,f.cos=af,f.cosh=ag,f.div=ah,f.exp=ai,f.floor=aj,f.hypot=ak,f.ln=am,f.log=an,f.log10=ap,f.log2=ao,f.max=aq,f.min=ar,f.mod=as,f.mul=at,f.pow=au,f.random=av,f.round=aw,f.sign=ax,f.sin=ay,f.sinh=az,f.sqrt=aA,f.sub=aB,f.sum=aC,f.tan=aD,f.tanh=aE,f.trunc=aF,void 0===b&&(b={}),b&&!0!==b.defaults)for(c=0,e=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];c<e.length;)b.hasOwnProperty(d=e[c++])||(b[d]=this[d]);return f.config(b),f}(g);function aH(a,b="USD",c="en-US"){let d="string"==typeof a?parseFloat(a):a;return new Intl.NumberFormat(c,{style:"currency",currency:b,minimumFractionDigits:2,maximumFractionDigits:2}).format(d)}function aI(a,b="medium"){return new Intl.DateTimeFormat("en-US","short"===b?{month:"numeric",day:"numeric",year:"2-digit"}:"medium"===b?{month:"short",day:"numeric",year:"numeric"}:{month:"long",day:"numeric",year:"numeric"}).format(a)}e=new aG(e),f=new aG(f),a.s(["formatCurrency",()=>aH,"formatDate",()=>aI],897701)},780137,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(478788),e=a.i(452308),f=a.i(206015),g=a.i(866718),h=a.i(699570),i=a.i(335732),j=a.i(786304),k=a.i(417755),l=a.i(809941),m=a.i(104720),n=a.i(816201),o=a.i(862722),p=a.i(238246),q=a.i(50944),r=a.i(823292),s=a.i(405050);let t=(0,s.createServerReference)("4094967d55cba38eaae53d16ca7af28cdac68939ad",s.callServer,void 0,s.findSourceMapURL,"submitJournalEntry");var u=a.i(54917),v=a.i(873935),w=a.i(897701);let x={DRAFT:"secondary",PENDING_APPROVAL:"outline",APPROVED:"default",REJECTED:"destructive"},y=({entries:a,agencyId:s})=>{let y=(0,q.useRouter)(),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),D=[{accessorKey:"entryNumber",header:({column:a})=>(0,b.jsxs)(h.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Entry #",(0,b.jsx)(l.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"font-mono",children:["JE-",a.getValue("entryNumber")]})},{accessorKey:"entryDate",header:"Date",cell:({row:a})=>(0,w.formatDate)(new Date(a.getValue("entryDate")),"short")},{accessorKey:"description",header:"Description",cell:({row:a})=>(0,b.jsx)("div",{className:"max-w-md truncate",children:a.getValue("description")})},{accessorKey:"entryType",header:"Type",cell:({row:a})=>{let c=a.getValue("entryType");return(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:c.replace(/_/g," ")})}},{id:"amount",header:"Amount",cell:({row:a})=>{let c=a.original.Lines.reduce((a,b)=>a+b.debitAmount,0);return(0,b.jsxs)("div",{className:"font-mono",children:["$",c.toFixed(2)]})}},{accessorKey:"status",header:"Status",cell:({row:a})=>{let c=a.getValue("status");return(0,b.jsx)(j.Badge,{variant:x[c]||"outline",children:c.replace(/_/g," ")})}},{id:"actions",cell:({row:a})=>{let c=a.original;return(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(k.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(i.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(p.default,{href:`/agency/${s}/fi/general-ledger/journal-entries/${c.id}`,children:[(0,b.jsx)(m.FileText,{className:"mr-2 h-4 w-4"}),"View Details"]})}),"DRAFT"===c.status&&(0,b.jsxs)(i.DropdownMenuItem,{onClick:async()=>{let a=await t(c.id);a.success?(r.toast.success("Entry submitted for approval"),y.refresh()):r.toast.error(a.error??"Failed to submit entry")},children:[(0,b.jsx)(n.CheckCircle,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]}),"PENDING_APPROVAL"===c.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:async()=>{let a=await (0,u.approveJournalEntry)(c.id);a.success?(r.toast.success("Entry approved and posted"),y.refresh()):r.toast.error(a.error??"Failed to approve entry")},children:[(0,b.jsx)(n.CheckCircle,{className:"mr-2 h-4 w-4 text-green-600"}),"Approve"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:async()=>{let a=prompt("Reason for rejection:");if(a){let b=await (0,v.rejectJournalEntry)(c.id,a);b.success?(r.toast.success("Entry rejected"),y.refresh()):r.toast.error(b.error??"Failed to reject entry")}},children:[(0,b.jsx)(o.XCircle,{className:"mr-2 h-4 w-4 text-red-600"}),"Reject"]})]})]})]})}}],E=(0,d.useReactTable)({data:a,columns:D,getCoreRowModel:(0,e.getCoreRowModel)(),getSortedRowModel:(0,e.getSortedRowModel)(),getFilteredRowModel:(0,e.getFilteredRowModel)(),onSortingChange:A,onColumnFiltersChange:C,state:{sorting:z,columnFilters:B}});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)(g.Input,{placeholder:"Filter by description...",value:E.getColumn("description")?.getFilterValue()??"",onChange:a=>E.getColumn("description")?.setFilterValue(a.target.value),className:"max-w-sm"})}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:E.getHeaderGroups().map(a=>(0,b.jsx)(f.TableRow,{children:a.headers.map(a=>(0,b.jsx)(f.TableHead,{children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(f.TableBody,{children:E.getRowModel().rows?.length?E.getRowModel().rows.map(a=>(0,b.jsx)(f.TableRow,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(a=>(0,b.jsx)(f.TableCell,{children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:D.length,className:"h-24 text-center",children:"No journal entries found."})})})]})})]})};a.s(["JournalEntriesTable",()=>y],780137)},730769,a=>{"use strict";var b=a.i(667937);a.s(["CalendarIcon",()=>b.default])},320146,a=>{"use strict";var b,c,d=a.i(187924),e=a.i(613749),f=a.i(50522),g=a.i(572131),h=a.i(372228),i=a.i(258419);function j(a){let b=(0,i.toDate)(a);return b.setDate(1),b.setHours(0,0,0,0),b}var k=a.i(238271),l=a.i(858623),m=a.i(205483);function n(a,b){let c,d,e,f,g=(0,i.toDate)(a),h=g.getFullYear(),j=g.getDate(),k=(0,m.constructFrom)(a,0);k.setFullYear(h,b,15),k.setHours(0,0,0,0);let l=(d=(c=(0,i.toDate)(k)).getFullYear(),e=c.getMonth(),(f=(0,m.constructFrom)(k,0)).setFullYear(d,e+1,0),f.setHours(0,0,0,0),f.getDate());return g.setMonth(b,Math.min(j,l)),g}function o(a,b){let c=(0,i.toDate)(a);return isNaN(+c)?(0,m.constructFrom)(a,NaN):(c.setFullYear(b),c)}var p=a.i(260530),q=a.i(218796);function r(a,b){let c=(0,i.toDate)(a);if(isNaN(b))return(0,m.constructFrom)(a,NaN);if(!b)return c;let d=c.getDate(),e=(0,m.constructFrom)(a,c.getTime());return(e.setMonth(c.getMonth()+b+1,0),d>=e.getDate())?e:(c.setFullYear(e.getFullYear(),e.getMonth(),d),c)}function s(a,b){let c=(0,i.toDate)(a),d=(0,i.toDate)(b);return c.getFullYear()===d.getFullYear()&&c.getMonth()===d.getMonth()}function t(a,b){return+(0,i.toDate)(a)<+(0,i.toDate)(b)}var u=a.i(771666),v=a.i(527778);function w(a,b){let c=(0,i.toDate)(a);return isNaN(b)?(0,m.constructFrom)(a,NaN):(b&&c.setDate(c.getDate()+b),c)}function x(a,b){return+(0,l.startOfDay)(a)==+(0,l.startOfDay)(b)}function y(a,b){let c=(0,i.toDate)(a),d=(0,i.toDate)(b);return c.getTime()>d.getTime()}var z=a.i(748532),A=a.i(703378);function B(a,b){return w(a,7*b)}function C(a,b){return r(a,12*b)}var D=a.i(618982);function E(a,b){let c=(0,D.getDefaultOptions)(),d=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??c.weekStartsOn??c.locale?.options?.weekStartsOn??0,e=(0,i.toDate)(a),f=e.getDay();return e.setDate(e.getDate()+((f<d?-7:0)+6-(f-d))),e.setHours(23,59,59,999),e}function F(a){return E(a,{weekStartsOn:1})}var G=a.i(647809),H=a.i(593770),I=a.i(812055),J=a.i(308668);a.i(634968),a.i(351867),a.i(964300);class K{subPriority=0;validate(a,b){return!0}}class L extends K{constructor(a,b,c,d,e){super(),this.value=a,this.validateValue=b,this.setValue=c,this.priority=d,e&&(this.subPriority=e)}validate(a,b){return this.validateValue(a,this.value,b)}set(a,b,c){return this.setValue(a,b,this.value,c)}}class M{run(a,b,c,d){let e=this.parse(a,b,c,d);return e?{setter:new L(e.value,this.validate,this.set,this.priority,this.subPriority),rest:e.rest}:null}validate(a,b,c){return!0}}let N=/^(1[0-2]|0?\d)/,O=/^(3[0-1]|[0-2]?\d)/,P=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Q=/^(5[0-3]|[0-4]?\d)/,R=/^(2[0-3]|[0-1]?\d)/,S=/^(2[0-4]|[0-1]?\d)/,T=/^(1[0-1]|0?\d)/,U=/^(1[0-2]|0?\d)/,V=/^[0-5]?\d/,W=/^[0-5]?\d/,X=/^\d/,Y=/^\d{1,2}/,Z=/^\d{1,3}/,$=/^\d{1,4}/,_=/^-?\d+/,aa=/^-?\d/,ab=/^-?\d{1,2}/,ac=/^-?\d{1,3}/,ad=/^-?\d{1,4}/,ae=/^([+-])(\d{2})(\d{2})?|Z/,af=/^([+-])(\d{2})(\d{2})|Z/,ag=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ah=/^([+-])(\d{2}):(\d{2})|Z/,ai=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function aj(a,b){return a?{value:b(a.value),rest:a.rest}:a}function ak(a,b){let c=b.match(a);return c?{value:parseInt(c[0],10),rest:b.slice(c[0].length)}:null}function al(a,b){let c=b.match(a);if(!c)return null;if("Z"===c[0])return{value:0,rest:b.slice(1)};let d="+"===c[1]?1:-1,e=c[2]?parseInt(c[2],10):0,f=c[3]?parseInt(c[3],10):0,g=c[5]?parseInt(c[5],10):0;return{value:d*(e*I.millisecondsInHour+f*I.millisecondsInMinute+g*I.millisecondsInSecond),rest:b.slice(c[0].length)}}function am(a,b){switch(a){case 1:return ak(X,b);case 2:return ak(Y,b);case 3:return ak(Z,b);case 4:return ak($,b);default:return ak(RegExp("^\\d{1,"+a+"}"),b)}}function an(a,b){switch(a){case 1:return ak(aa,b);case 2:return ak(ab,b);case 3:return ak(ac,b);case 4:return ak(ad,b);default:return ak(RegExp("^-?\\d{1,"+a+"}"),b)}}function ao(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ap(a,b){let c,d=b>0,e=d?b:1-b;if(e<=50)c=a||100;else{let b=e+50;c=a+100*Math.trunc(b/100)-100*(a>=b%100)}return d?c:1-c}function aq(a){return a%400==0||a%4==0&&a%100!=0}var ar=a.i(176407);let as=[31,28,31,30,31,30,31,31,30,31,30,31],at=[31,29,31,30,31,30,31,31,30,31,30,31];function au(a,b,c){let d=(0,D.getDefaultOptions)(),e=c?.weekStartsOn??c?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,f=(0,i.toDate)(a),g=f.getDay(),h=7-e;return w(f,b<0||b>6?b-(g+h)%7:((b%7+7)%7+h)%7-(g+h)%7)}new class extends M{priority=140;parse(a,b,c){switch(b){case"G":case"GG":case"GGG":return c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"});case"GGGGG":return c.era(a,{width:"narrow"});default:return c.era(a,{width:"wide"})||c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"})}}set(a,b,c){return b.era=c,a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["R","u","t","T"]},new class extends M{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"yy"===b});switch(b){case"y":return aj(am(4,a),d);case"yo":return aj(c.ordinalNumber(a,{unit:"year"}),d);default:return aj(am(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c){let d=a.getFullYear();if(c.isTwoDigitYear){let b=ap(c.year,d);return a.setFullYear(b,0,1),a.setHours(0,0,0,0),a}let e="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(e,0,1),a.setHours(0,0,0,0),a}},new class extends M{priority=130;parse(a,b,c){let d=a=>({year:a,isTwoDigitYear:"YY"===b});switch(b){case"Y":return aj(am(4,a),d);case"Yo":return aj(c.ordinalNumber(a,{unit:"year"}),d);default:return aj(am(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c,d){let e=(0,ar.getWeekYear)(a,d);if(c.isTwoDigitYear){let b=ap(c.year,e);return a.setFullYear(b,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),(0,v.startOfWeek)(a,d)}let f="era"in b&&1!==b.era?1-c.year:c.year;return a.setFullYear(f,0,d.firstWeekContainsDate),a.setHours(0,0,0,0),(0,v.startOfWeek)(a,d)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},new class extends M{priority=130;parse(a,b){return"R"===b?an(4,a):an(b.length,a)}set(a,b,c){let d=(0,m.constructFrom)(a,0);return d.setFullYear(c,0,4),d.setHours(0,0,0,0),(0,u.startOfISOWeek)(d)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},new class extends M{priority=130;parse(a,b){return"u"===b?an(4,a):an(b.length,a)}set(a,b,c){return a.setFullYear(c,0,1),a.setHours(0,0,0,0),a}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},new class extends M{priority=120;parse(a,b,c){switch(b){case"Q":case"QQ":return am(b.length,a);case"Qo":return c.ordinalNumber(a,{unit:"quarter"});case"QQQ":return c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return c.quarter(a,{width:"narrow",context:"formatting"});default:return c.quarter(a,{width:"wide",context:"formatting"})||c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends M{priority=120;parse(a,b,c){switch(b){case"q":case"qq":return am(b.length,a);case"qo":return c.ordinalNumber(a,{unit:"quarter"});case"qqq":return c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return c.quarter(a,{width:"narrow",context:"standalone"});default:return c.quarter(a,{width:"wide",context:"standalone"})||c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setMonth((c-1)*3,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},new class extends M{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"M":return aj(ak(N,a),d);case"MM":return aj(am(2,a),d);case"Mo":return aj(c.ordinalNumber(a,{unit:"month"}),d);case"MMM":return c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(a,{width:"narrow",context:"formatting"});default:return c.month(a,{width:"wide",context:"formatting"})||c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}},new class extends M{priority=110;parse(a,b,c){let d=a=>a-1;switch(b){case"L":return aj(ak(N,a),d);case"LL":return aj(am(2,a),d);case"Lo":return aj(c.ordinalNumber(a,{unit:"month"}),d);case"LLL":return c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(a,{width:"narrow",context:"standalone"});default:return c.month(a,{width:"wide",context:"standalone"})||c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setMonth(c,1),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},new class extends M{priority=100;parse(a,b,c){switch(b){case"w":return ak(Q,a);case"wo":return c.ordinalNumber(a,{unit:"week"});default:return am(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c,d){let e,f;return(0,v.startOfWeek)((e=(0,i.toDate)(a),f=(0,H.getWeek)(e,d)-c,e.setDate(e.getDate()-7*f),e),d)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},new class extends M{priority=100;parse(a,b,c){switch(b){case"I":return ak(Q,a);case"Io":return c.ordinalNumber(a,{unit:"week"});default:return am(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c){let d,e;return(0,u.startOfISOWeek)((d=(0,i.toDate)(a),e=(0,G.getISOWeek)(d)-c,d.setDate(d.getDate()-7*e),d))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},new class extends M{priority=90;subPriority=1;parse(a,b,c){switch(b){case"d":return ak(O,a);case"do":return c.ordinalNumber(a,{unit:"date"});default:return am(b.length,a)}}validate(a,b){let c=aq(a.getFullYear()),d=a.getMonth();return c?b>=1&&b<=at[d]:b>=1&&b<=as[d]}set(a,b,c){return a.setDate(c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},new class extends M{priority=90;subpriority=1;parse(a,b,c){switch(b){case"D":case"DD":return ak(P,a);case"Do":return c.ordinalNumber(a,{unit:"date"});default:return am(b.length,a)}}validate(a,b){return aq(a.getFullYear())?b>=1&&b<=366:b>=1&&b<=365}set(a,b,c){return a.setMonth(0,c),a.setHours(0,0,0,0),a}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},new class extends M{priority=90;parse(a,b,c){switch(b){case"E":case"EE":case"EEE":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return c.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=au(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["D","i","e","c","t","T"]},new class extends M{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"e":case"ee":return aj(am(b.length,a),e);case"eo":return aj(c.ordinalNumber(a,{unit:"day"}),e);case"eee":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"eeeee":return c.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=au(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},new class extends M{priority=90;parse(a,b,c,d){let e=a=>{let b=7*Math.floor((a-1)/7);return(a+d.weekStartsOn+6)%7+b};switch(b){case"c":case"cc":return aj(am(b.length,a),e);case"co":return aj(c.ordinalNumber(a,{unit:"day"}),e);case"ccc":return c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});case"ccccc":return c.day(a,{width:"narrow",context:"standalone"});case"cccccc":return c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});default:return c.day(a,{width:"wide",context:"standalone"})||c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=au(a,c,d)).setHours(0,0,0,0),a}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},new class extends M{priority=90;parse(a,b,c){let d=a=>0===a?7:a;switch(b){case"i":case"ii":return am(b.length,a);case"io":return c.ordinalNumber(a,{unit:"day"});case"iii":return aj(c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiii":return aj(c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiiii":return aj(c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);default:return aj(c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d)}}validate(a,b){return b>=1&&b<=7}set(a,b,c){var d;let e,f;return d=a,e=(0,i.toDate)(d),0===(f=(0,i.toDate)(e).getDay())&&(f=7),(a=w(e,c-f)).setHours(0,0,0,0),a}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},new class extends M{priority=80;parse(a,b,c){switch(b){case"a":case"aa":case"aaa":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(ao(c),0,0,0),a}incompatibleTokens=["b","B","H","k","t","T"]},new class extends M{priority=80;parse(a,b,c){switch(b){case"b":case"bb":case"bbb":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(ao(c),0,0,0),a}incompatibleTokens=["a","B","H","k","t","T"]},new class extends M{priority=80;parse(a,b,c){switch(b){case"B":case"BB":case"BBB":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setHours(ao(c),0,0,0),a}incompatibleTokens=["a","b","t","T"]},new class extends M{priority=70;parse(a,b,c){switch(b){case"h":return ak(U,a);case"ho":return c.ordinalNumber(a,{unit:"hour"});default:return am(b.length,a)}}validate(a,b){return b>=1&&b<=12}set(a,b,c){let d=a.getHours()>=12;return d&&c<12?a.setHours(c+12,0,0,0):d||12!==c?a.setHours(c,0,0,0):a.setHours(0,0,0,0),a}incompatibleTokens=["H","K","k","t","T"]},new class extends M{priority=70;parse(a,b,c){switch(b){case"H":return ak(R,a);case"Ho":return c.ordinalNumber(a,{unit:"hour"});default:return am(b.length,a)}}validate(a,b){return b>=0&&b<=23}set(a,b,c){return a.setHours(c,0,0,0),a}incompatibleTokens=["a","b","h","K","k","t","T"]},new class extends M{priority=70;parse(a,b,c){switch(b){case"K":return ak(T,a);case"Ko":return c.ordinalNumber(a,{unit:"hour"});default:return am(b.length,a)}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.getHours()>=12&&c<12?a.setHours(c+12,0,0,0):a.setHours(c,0,0,0),a}incompatibleTokens=["h","H","k","t","T"]},new class extends M{priority=70;parse(a,b,c){switch(b){case"k":return ak(S,a);case"ko":return c.ordinalNumber(a,{unit:"hour"});default:return am(b.length,a)}}validate(a,b){return b>=1&&b<=24}set(a,b,c){return a.setHours(c<=24?c%24:c,0,0,0),a}incompatibleTokens=["a","b","h","H","K","t","T"]},new class extends M{priority=60;parse(a,b,c){switch(b){case"m":return ak(V,a);case"mo":return c.ordinalNumber(a,{unit:"minute"});default:return am(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setMinutes(c,0,0),a}incompatibleTokens=["t","T"]},new class extends M{priority=50;parse(a,b,c){switch(b){case"s":return ak(W,a);case"so":return c.ordinalNumber(a,{unit:"second"});default:return am(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setSeconds(c,0),a}incompatibleTokens=["t","T"]},new class extends M{priority=30;parse(a,b){return aj(am(b.length,a),a=>Math.trunc(a*Math.pow(10,-b.length+3)))}set(a,b,c){return a.setMilliseconds(c),a}incompatibleTokens=["t","T"]},new class extends M{priority=10;parse(a,b){switch(b){case"X":return al(ae,a);case"XX":return al(af,a);case"XXXX":return al(ag,a);case"XXXXX":return al(ai,a);default:return al(ah,a)}}set(a,b,c){return b.timestampIsSet?a:(0,m.constructFrom)(a,a.getTime()-(0,J.getTimezoneOffsetInMilliseconds)(a)-c)}incompatibleTokens=["t","T","x"]},new class extends M{priority=10;parse(a,b){switch(b){case"x":return al(ae,a);case"xx":return al(af,a);case"xxxx":return al(ag,a);case"xxxxx":return al(ai,a);default:return al(ah,a)}}set(a,b,c){return b.timestampIsSet?a:(0,m.constructFrom)(a,a.getTime()-(0,J.getTimezoneOffsetInMilliseconds)(a)-c)}incompatibleTokens=["t","T","X"]},new class extends M{priority=40;parse(a){return ak(_,a)}set(a,b,c){return[(0,m.constructFrom)(a,1e3*c),{timestampIsSet:!0}]}incompatibleTokens="*"},new class extends M{priority=20;parse(a){return ak(_,a)}set(a,b,c){return[(0,m.constructFrom)(a,c),{timestampIsSet:!0}]}incompatibleTokens="*"};var av=a.i(555266),aw=function(){return(aw=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function ax(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function ay(a){return"multiple"===a.mode}function az(a){return"range"===a.mode}function aA(a){return"single"===a.mode}"function"==typeof SuppressedError&&SuppressedError;var aB={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"},aC=Object.freeze({__proto__:null,formatCaption:function(a,b){return(0,h.format)(a,"LLLL y",b)},formatDay:function(a,b){return(0,h.format)(a,"d",b)},formatMonthCaption:function(a,b){return(0,h.format)(a,"LLLL",b)},formatWeekNumber:function(a){return"".concat(a)},formatWeekdayName:function(a,b){return(0,h.format)(a,"cccccc",b)},formatYearCaption:function(a,b){return(0,h.format)(a,"yyyy",b)}}),aD=Object.freeze({__proto__:null,labelDay:function(a,b,c){return(0,h.format)(a,"do MMMM (EEEE)",c)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(a){return"Week n. ".concat(a)},labelWeekday:function(a,b){return(0,h.format)(a,"cccc",b)},labelYearDropdown:function(){return"Year: "}}),aE=(0,g.createContext)(void 0);function aF(a){var b,c,e,f,g,h,i,m,n=a.initialProps,o={captionLayout:"buttons",classNames:aB,formatters:aC,labels:aD,locale:av.enUS,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},p=(b=n.fromYear,c=n.toYear,e=n.fromMonth,f=n.toMonth,g=n.fromDate,h=n.toDate,e?g=j(e):b&&(g=new Date(b,0,1)),f?h=(0,k.endOfMonth)(f):c&&(h=new Date(c,11,31)),{fromDate:g?(0,l.startOfDay)(g):void 0,toDate:h?(0,l.startOfDay)(h):void 0}),q=p.fromDate,r=p.toDate,s=null!=(i=n.captionLayout)?i:o.captionLayout;"buttons"===s||q&&r||(s="buttons"),(aA(n)||ay(n)||az(n))&&(m=n.onSelect);var t=aw(aw(aw({},o),n),{captionLayout:s,classNames:aw(aw({},o.classNames),n.classNames),components:aw({},n.components),formatters:aw(aw({},o.formatters),n.formatters),fromDate:q,labels:aw(aw({},o.labels),n.labels),mode:n.mode||o.mode,modifiers:aw(aw({},o.modifiers),n.modifiers),modifiersClassNames:aw(aw({},o.modifiersClassNames),n.modifiersClassNames),onSelect:m,styles:aw(aw({},o.styles),n.styles),toDate:r});return(0,d.jsx)(aE.Provider,{value:t,children:a.children})}function aG(){var a=(0,g.useContext)(aE);if(!a)throw Error("useDayPicker must be used within a DayPickerProvider.");return a}function aH(a){var b=aG(),c=b.locale,e=b.classNames,f=b.styles,g=b.formatters.formatCaption;return(0,d.jsx)("div",{className:e.caption_label,style:f.caption_label,"aria-live":"polite",role:"presentation",id:a.id,children:g(a.displayMonth,{locale:c})})}function aI(a){return(0,d.jsx)("svg",aw({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},a,{children:(0,d.jsx)("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aJ(a){var b,c,e=a.onChange,f=a.value,g=a.children,h=a.caption,i=a.className,j=a.style,k=aG(),l=null!=(c=null==(b=k.components)?void 0:b.IconDropdown)?c:aI;return(0,d.jsxs)("div",{className:i,style:j,children:[(0,d.jsx)("span",{className:k.classNames.vhidden,children:a["aria-label"]}),(0,d.jsx)("select",{name:a.name,"aria-label":a["aria-label"],className:k.classNames.dropdown,style:k.styles.dropdown,value:f,onChange:e,children:g}),(0,d.jsxs)("div",{className:k.classNames.caption_label,style:k.styles.caption_label,"aria-hidden":"true",children:[h,(0,d.jsx)(l,{className:k.classNames.dropdown_icon,style:k.styles.dropdown_icon})]})]})}function aK(a){let b,c;var e,f=aG(),g=f.fromDate,h=f.toDate,k=f.styles,l=f.locale,m=f.formatters.formatMonthCaption,o=f.classNames,p=f.components,q=f.labels.labelMonthDropdown;if(!g||!h)return(0,d.jsx)(d.Fragment,{});var r=[];if(b=(0,i.toDate)(g),c=(0,i.toDate)(h),b.getFullYear()===c.getFullYear())for(var s=j(g),t=g.getMonth();t<=h.getMonth();t++)r.push(n(s,t));else for(var s=j(new Date),t=0;t<=11;t++)r.push(n(s,t));var u=null!=(e=null==p?void 0:p.Dropdown)?e:aJ;return(0,d.jsx)(u,{name:"months","aria-label":q(),className:o.dropdown_month,style:k.dropdown_month,onChange:function(b){var c=Number(b.target.value),d=n(j(a.displayMonth),c);a.onChange(d)},value:a.displayMonth.getMonth(),caption:m(a.displayMonth,{locale:l}),children:r.map(function(a){return(0,d.jsx)("option",{value:a.getMonth(),children:m(a,{locale:l})},a.getMonth())})})}function aL(a){var b,c=a.displayMonth,e=aG(),f=e.fromDate,g=e.toDate,h=e.locale,i=e.styles,k=e.classNames,l=e.components,m=e.formatters.formatYearCaption,n=e.labels.labelYearDropdown,q=[];if(!f||!g)return(0,d.jsx)(d.Fragment,{});for(var r=f.getFullYear(),s=g.getFullYear(),t=r;t<=s;t++)q.push(o((0,p.startOfYear)(new Date),t));var u=null!=(b=null==l?void 0:l.Dropdown)?b:aJ;return(0,d.jsx)(u,{name:"years","aria-label":n(),className:k.dropdown_year,style:i.dropdown_year,onChange:function(b){var d=o(j(c),Number(b.target.value));a.onChange(d)},value:c.getFullYear(),caption:m(c,{locale:h}),children:q.map(function(a){return(0,d.jsx)("option",{value:a.getFullYear(),children:m(a,{locale:h})},a.getFullYear())})})}var aM=(0,g.createContext)(void 0);function aN(a){var b,c,e,f,h,i,k,l,m,n,o,p,u,v,w,x,y=aG(),z=(w=(e=(c=b=aG()).month,f=c.defaultMonth,h=c.today,i=e||f||h||new Date,k=c.toDate,l=c.fromDate,m=c.numberOfMonths,k&&0>(0,q.differenceInCalendarMonths)(k,i)&&(i=r(k,-1*((void 0===m?1:m)-1))),l&&0>(0,q.differenceInCalendarMonths)(i,l)&&(i=l),n=j(i),o=b.month,u=(p=(0,g.useState)(n))[0],v=[void 0===o?u:o,p[1]])[0],x=v[1],[w,function(a){if(!b.disableNavigation){var c,d=j(a);x(d),null==(c=b.onMonthChange)||c.call(b,d)}}]),A=z[0],B=z[1],C=function(a,b){for(var c=b.reverseMonths,d=b.numberOfMonths,e=j(a),f=j(r(e,d)),g=(0,q.differenceInCalendarMonths)(f,e),h=[],i=0;i<g;i++){var k=r(e,i);h.push(k)}return c&&(h=h.reverse()),h}(A,y),D=function(a,b){if(!b.disableNavigation){var c=b.toDate,d=b.pagedNavigation,e=b.numberOfMonths,f=void 0===e?1:e,g=j(a);if(!c||!((0,q.differenceInCalendarMonths)(c,a)<f))return r(g,d?f:1)}}(A,y),E=function(a,b){if(!b.disableNavigation){var c=b.fromDate,d=b.pagedNavigation,e=b.numberOfMonths,f=j(a);if(!c||!(0>=(0,q.differenceInCalendarMonths)(f,c)))return r(f,-(d?void 0===e?1:e:1))}}(A,y),F=function(a){return C.some(function(b){return s(a,b)})};return(0,d.jsx)(aM.Provider,{value:{currentMonth:A,displayMonths:C,goToMonth:B,goToDate:function(a,b){F(a)||(b&&t(a,b)?B(r(a,1+-1*y.numberOfMonths)):B(a))},previousMonth:E,nextMonth:D,isDateDisplayed:F},children:a.children})}function aO(){var a=(0,g.useContext)(aM);if(!a)throw Error("useNavigation must be used within a NavigationProvider");return a}function aP(a){var b,c=aG(),e=c.classNames,f=c.styles,g=c.components,h=aO().goToMonth,i=function(b){h(r(b,a.displayIndex?-a.displayIndex:0))},j=null!=(b=null==g?void 0:g.CaptionLabel)?b:aH,k=(0,d.jsx)(j,{id:a.id,displayMonth:a.displayMonth});return(0,d.jsxs)("div",{className:e.caption_dropdowns,style:f.caption_dropdowns,children:[(0,d.jsx)("div",{className:e.vhidden,children:k}),(0,d.jsx)(aK,{onChange:i,displayMonth:a.displayMonth}),(0,d.jsx)(aL,{onChange:i,displayMonth:a.displayMonth})]})}function aQ(a){return(0,d.jsx)("svg",aw({width:"16px",height:"16px",viewBox:"0 0 120 120"},a,{children:(0,d.jsx)("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aR(a){return(0,d.jsx)("svg",aw({width:"16px",height:"16px",viewBox:"0 0 120 120"},a,{children:(0,d.jsx)("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var aS=(0,g.forwardRef)(function(a,b){var c=aG(),e=c.classNames,f=c.styles,g=[e.button_reset,e.button];a.className&&g.push(a.className);var h=g.join(" "),i=aw(aw({},f.button_reset),f.button);return a.style&&Object.assign(i,a.style),(0,d.jsx)("button",aw({},a,{ref:b,type:"button",className:h,style:i}))});function aT(a){var b,c,e=aG(),f=e.dir,g=e.locale,h=e.classNames,i=e.styles,j=e.labels,k=j.labelPrevious,l=j.labelNext,m=e.components;if(!a.nextMonth&&!a.previousMonth)return(0,d.jsx)(d.Fragment,{});var n=k(a.previousMonth,{locale:g}),o=[h.nav_button,h.nav_button_previous].join(" "),p=l(a.nextMonth,{locale:g}),q=[h.nav_button,h.nav_button_next].join(" "),r=null!=(b=null==m?void 0:m.IconRight)?b:aR,s=null!=(c=null==m?void 0:m.IconLeft)?c:aQ;return(0,d.jsxs)("div",{className:h.nav,style:i.nav,children:[!a.hidePrevious&&(0,d.jsx)(aS,{name:"previous-month","aria-label":n,className:o,style:i.nav_button_previous,disabled:!a.previousMonth,onClick:a.onPreviousClick,children:"rtl"===f?(0,d.jsx)(r,{className:h.nav_icon,style:i.nav_icon}):(0,d.jsx)(s,{className:h.nav_icon,style:i.nav_icon})}),!a.hideNext&&(0,d.jsx)(aS,{name:"next-month","aria-label":p,className:q,style:i.nav_button_next,disabled:!a.nextMonth,onClick:a.onNextClick,children:"rtl"===f?(0,d.jsx)(s,{className:h.nav_icon,style:i.nav_icon}):(0,d.jsx)(r,{className:h.nav_icon,style:i.nav_icon})})]})}function aU(a){var b=aG().numberOfMonths,c=aO(),e=c.previousMonth,f=c.nextMonth,g=c.goToMonth,h=c.displayMonths,i=h.findIndex(function(b){return s(a.displayMonth,b)}),j=0===i,k=i===h.length-1;return(0,d.jsx)(aT,{displayMonth:a.displayMonth,hideNext:b>1&&(j||!k),hidePrevious:b>1&&(k||!j),nextMonth:f,previousMonth:e,onPreviousClick:function(){e&&g(e)},onNextClick:function(){f&&g(f)}})}function aV(a){var b,c,e=aG(),f=e.classNames,g=e.disableNavigation,h=e.styles,i=e.captionLayout,j=e.components,k=null!=(b=null==j?void 0:j.CaptionLabel)?b:aH;return c=g?(0,d.jsx)(k,{id:a.id,displayMonth:a.displayMonth}):"dropdown"===i?(0,d.jsx)(aP,{displayMonth:a.displayMonth,id:a.id}):"dropdown-buttons"===i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aP,{displayMonth:a.displayMonth,displayIndex:a.displayIndex,id:a.id}),(0,d.jsx)(aU,{displayMonth:a.displayMonth,displayIndex:a.displayIndex,id:a.id})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k,{id:a.id,displayMonth:a.displayMonth,displayIndex:a.displayIndex}),(0,d.jsx)(aU,{displayMonth:a.displayMonth,id:a.id})]}),(0,d.jsx)("div",{className:f.caption,style:h.caption,children:c})}function aW(a){var b=aG(),c=b.footer,e=b.styles,f=b.classNames.tfoot;return c?(0,d.jsx)("tfoot",{className:f,style:e.tfoot,children:(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:8,children:c})})}):(0,d.jsx)(d.Fragment,{})}function aX(){var a=aG(),b=a.classNames,c=a.styles,e=a.showWeekNumber,f=a.locale,g=a.weekStartsOn,h=a.ISOWeek,i=a.formatters.formatWeekdayName,j=a.labels.labelWeekday,k=function(a,b,c){for(var d=c?(0,u.startOfISOWeek)(new Date):(0,v.startOfWeek)(new Date,{locale:a,weekStartsOn:b}),e=[],f=0;f<7;f++){var g=w(d,f);e.push(g)}return e}(f,g,h);return(0,d.jsxs)("tr",{style:c.head_row,className:b.head_row,children:[e&&(0,d.jsx)("td",{style:c.head_cell,className:b.head_cell}),k.map(function(a,e){return(0,d.jsx)("th",{scope:"col",className:b.head_cell,style:c.head_cell,"aria-label":j(a,{locale:f}),children:i(a,{locale:f})},e)})]})}function aY(){var a,b=aG(),c=b.classNames,e=b.styles,f=b.components,g=null!=(a=null==f?void 0:f.HeadRow)?a:aX;return(0,d.jsx)("thead",{style:e.head,className:c.head,children:(0,d.jsx)(g,{})})}function aZ(a){var b=aG(),c=b.locale,e=b.formatters.formatDay;return(0,d.jsx)(d.Fragment,{children:e(a.date,{locale:c})})}var a$=(0,g.createContext)(void 0);function a_(a){return ay(a.initialProps)?(0,d.jsx)(a0,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(a$.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:a.children})}function a0(a){var b=a.initialProps,c=a.children,e=b.selected,f=b.min,g=b.max,h={disabled:[]};return e&&h.disabled.push(function(a){var b=g&&e.length>g-1,c=e.some(function(b){return x(b,a)});return!!(b&&!c)}),(0,d.jsx)(a$.Provider,{value:{selected:e,onDayClick:function(a,c,d){var h,i;if((null==(h=b.onDayClick)||h.call(b,a,c,d),!c.selected||!f||(null==e?void 0:e.length)!==f)&&!(!c.selected&&g&&(null==e?void 0:e.length)===g)){var j=e?ax([],e,!0):[];if(c.selected){var k=j.findIndex(function(b){return x(a,b)});j.splice(k,1)}else j.push(a);null==(i=b.onSelect)||i.call(b,j,a,c,d)}},modifiers:h},children:c})}function a1(){var a=(0,g.useContext)(a$);if(!a)throw Error("useSelectMultiple must be used within a SelectMultipleProvider");return a}var a2=(0,g.createContext)(void 0);function a3(a){return az(a.initialProps)?(0,d.jsx)(a4,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(a2.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:a.children})}function a4(a){var b=a.initialProps,c=a.children,e=b.selected,f=e||{},g=f.from,h=f.to,i=b.min,j=b.max,k={range_start:[],range_end:[],range_middle:[],disabled:[]};if(g?(k.range_start=[g],h?(k.range_end=[h],x(g,h)||(k.range_middle=[{after:g,before:h}])):k.range_end=[g]):h&&(k.range_start=[h],k.range_end=[h]),i&&(g&&!h&&k.disabled.push({after:w(g,-(i-1)),before:w(g,i-1)}),g&&h&&k.disabled.push({after:g,before:w(g,i-1)}),!g&&h&&k.disabled.push({after:w(h,-(i-1)),before:w(h,i-1)})),j){if(g&&!h&&(k.disabled.push({before:w(g,-j+1)}),k.disabled.push({after:w(g,j-1)})),g&&h){var l=j-((0,z.differenceInCalendarDays)(h,g)+1);k.disabled.push({before:w(g,-l)}),k.disabled.push({after:w(h,l)})}!g&&h&&(k.disabled.push({before:w(h,-j+1)}),k.disabled.push({after:w(h,j-1)}))}return(0,d.jsx)(a2.Provider,{value:{selected:e,onDayClick:function(a,c,d){null==(j=b.onDayClick)||j.call(b,a,c,d);var f,g,h,i,j,k,l=(f=a,h=(g=e||{}).from,i=g.to,h&&i?x(i,f)&&x(h,f)?void 0:x(i,f)?{from:i,to:void 0}:x(h,f)?void 0:y(h,f)?{from:f,to:i}:{from:h,to:f}:i?y(f,i)?{from:i,to:f}:{from:f,to:i}:h?t(f,h)?{from:f,to:h}:{from:h,to:f}:{from:f,to:void 0});null==(k=b.onSelect)||k.call(b,l,a,c,d)},modifiers:k},children:c})}function a5(){var a=(0,g.useContext)(a2);if(!a)throw Error("useSelectRange must be used within a SelectRangeProvider");return a}function a6(a){return Array.isArray(a)?ax([],a,!0):void 0!==a?[a]:[]}(b=c||(c={})).Outside="outside",b.Disabled="disabled",b.Selected="selected",b.Hidden="hidden",b.Today="today",b.RangeStart="range_start",b.RangeEnd="range_end",b.RangeMiddle="range_middle";var a7=c.Selected,a8=c.Disabled,a9=c.Hidden,ba=c.Today,bb=c.RangeEnd,bc=c.RangeMiddle,bd=c.RangeStart,be=c.Outside,bf=(0,g.createContext)(void 0);function bg(a){var b,c,e,f,g=aG(),h=a1(),i=a5(),j=((b={})[a7]=a6(g.selected),b[a8]=a6(g.disabled),b[a9]=a6(g.hidden),b[ba]=[g.today],b[bb]=[],b[bc]=[],b[bd]=[],b[be]=[],c=b,g.fromDate&&c[a8].push({before:g.fromDate}),g.toDate&&c[a8].push({after:g.toDate}),ay(g)?c[a8]=c[a8].concat(h.modifiers[a8]):az(g)&&(c[a8]=c[a8].concat(i.modifiers[a8]),c[bd]=i.modifiers[bd],c[bc]=i.modifiers[bc],c[bb]=i.modifiers[bb]),c),k=(e=g.modifiers,f={},Object.entries(e).forEach(function(a){var b=a[0],c=a[1];f[b]=a6(c)}),f),l=aw(aw({},j),k);return(0,d.jsx)(bf.Provider,{value:l,children:a.children})}function bh(){var a=(0,g.useContext)(bf);if(!a)throw Error("useModifiers must be used within a ModifiersProvider");return a}function bi(a,b,c){var d=Object.keys(b).reduce(function(c,d){return b[d].some(function(b){if("boolean"==typeof b)return b;if((0,A.isDate)(b))return x(a,b);if(Array.isArray(b)&&b.every(A.isDate))return b.includes(a);if(b&&"object"==typeof b&&"from"in b)return d=b.from,e=b.to,d&&e?(0>(0,z.differenceInCalendarDays)(e,d)&&(d=(c=[e,d])[0],e=c[1]),(0,z.differenceInCalendarDays)(a,d)>=0&&(0,z.differenceInCalendarDays)(e,a)>=0):e?x(e,a):!!d&&x(d,a);if(b&&"object"==typeof b&&"dayOfWeek"in b)return b.dayOfWeek.includes(a.getDay());if(b&&"object"==typeof b&&"before"in b&&"after"in b){var c,d,e,f=(0,z.differenceInCalendarDays)(b.before,a),g=(0,z.differenceInCalendarDays)(b.after,a),h=f>0,i=g<0;return y(b.before,b.after)?i&&h:h||i}return b&&"object"==typeof b&&"after"in b?(0,z.differenceInCalendarDays)(a,b.after)>0:b&&"object"==typeof b&&"before"in b?(0,z.differenceInCalendarDays)(b.before,a)>0:"function"==typeof b&&b(a)})&&c.push(d),c},[]),e={};return d.forEach(function(a){return e[a]=!0}),c&&!s(a,c)&&(e.outside=!0),e}var bj=(0,g.createContext)(void 0);function bk(a){var b=aO(),c=bh(),e=(0,g.useState)(),f=e[0],h=e[1],l=(0,g.useState)(),m=l[0],n=l[1],o=function(a,b){for(var c,d,e=j(a[0]),f=(0,k.endOfMonth)(a[a.length-1]),g=e;g<=f;){var h=bi(g,b);if(!(!h.disabled&&!h.hidden)){g=w(g,1);continue}if(h.selected)return g;h.today&&!d&&(d=g),c||(c=g),g=w(g,1)}return d||c}(b.displayMonths,c),p=(null!=f?f:m&&b.isDateDisplayed(m))?m:o,q=function(a){h(a)},s=aG(),t=function(a,d){if(f){var e=function a(b,c){var d=c.moveBy,e=c.direction,f=c.context,g=c.modifiers,h=c.retry,j=void 0===h?{count:0,lastFocused:b}:h,k=f.weekStartsOn,l=f.fromDate,m=f.toDate,n=f.locale,o=({day:w,week:B,month:r,year:C,startOfWeek:function(a){return f.ISOWeek?(0,u.startOfISOWeek)(a):(0,v.startOfWeek)(a,{locale:n,weekStartsOn:k})},endOfWeek:function(a){return f.ISOWeek?F(a):E(a,{locale:n,weekStartsOn:k})}})[d](b,"after"===e?1:-1);if("before"===e&&l){let a;[l,o].forEach(function(b){let c=(0,i.toDate)(b);(void 0===a||a<c||isNaN(Number(c)))&&(a=c)}),o=a||new Date(NaN)}else{let a;"after"===e&&m&&([m,o].forEach(b=>{let c=(0,i.toDate)(b);(!a||a>c||isNaN(+c))&&(a=c)}),o=a||new Date(NaN))}var p=!0;if(g){var q=bi(o,g);p=!q.disabled&&!q.hidden}return p?o:j.count>365?j.lastFocused:a(o,{moveBy:d,direction:e,context:f,modifiers:g,retry:aw(aw({},j),{count:j.count+1})})}(f,{moveBy:a,direction:d,context:s,modifiers:c});x(f,e)||(b.goToDate(e,f),q(e))}};return(0,d.jsx)(bj.Provider,{value:{focusedDay:f,focusTarget:p,blur:function(){n(f),h(void 0)},focus:q,focusDayAfter:function(){return t("day","after")},focusDayBefore:function(){return t("day","before")},focusWeekAfter:function(){return t("week","after")},focusWeekBefore:function(){return t("week","before")},focusMonthBefore:function(){return t("month","before")},focusMonthAfter:function(){return t("month","after")},focusYearBefore:function(){return t("year","before")},focusYearAfter:function(){return t("year","after")},focusStartOfWeek:function(){return t("startOfWeek","before")},focusEndOfWeek:function(){return t("endOfWeek","after")}},children:a.children})}function bl(){var a=(0,g.useContext)(bj);if(!a)throw Error("useFocusContext must be used within a FocusProvider");return a}var bm=(0,g.createContext)(void 0);function bn(a){return aA(a.initialProps)?(0,d.jsx)(bo,{initialProps:a.initialProps,children:a.children}):(0,d.jsx)(bm.Provider,{value:{selected:void 0},children:a.children})}function bo(a){var b=a.initialProps,c=a.children,e={selected:b.selected,onDayClick:function(a,c,d){var e,f,g;if(null==(e=b.onDayClick)||e.call(b,a,c,d),c.selected&&!b.required){null==(f=b.onSelect)||f.call(b,void 0,a,c,d);return}null==(g=b.onSelect)||g.call(b,a,a,c,d)}};return(0,d.jsx)(bm.Provider,{value:e,children:c})}function bp(){var a=(0,g.useContext)(bm);if(!a)throw Error("useSelectSingle must be used within a SelectSingleProvider");return a}function bq(a){var b,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=(0,g.useRef)(null),W=(b=a.date,e=a.displayMonth,j=aG(),k=bl(),l=bi(b,bh(),e),m=aG(),n=bp(),o=a1(),p=a5(),r=(q=bl()).focusDayAfter,s=q.focusDayBefore,t=q.focusWeekAfter,u=q.focusWeekBefore,v=q.blur,w=q.focus,y=q.focusMonthBefore,z=q.focusMonthAfter,A=q.focusYearBefore,B=q.focusYearAfter,C=q.focusStartOfWeek,D=q.focusEndOfWeek,E={onClick:function(a){var c,d,e,f;aA(m)?null==(c=n.onDayClick)||c.call(n,b,l,a):ay(m)?null==(d=o.onDayClick)||d.call(o,b,l,a):az(m)?null==(e=p.onDayClick)||e.call(p,b,l,a):null==(f=m.onDayClick)||f.call(m,b,l,a)},onFocus:function(a){var c;w(b),null==(c=m.onDayFocus)||c.call(m,b,l,a)},onBlur:function(a){var c;v(),null==(c=m.onDayBlur)||c.call(m,b,l,a)},onKeyDown:function(a){var c;switch(a.key){case"ArrowLeft":a.preventDefault(),a.stopPropagation(),"rtl"===m.dir?r():s();break;case"ArrowRight":a.preventDefault(),a.stopPropagation(),"rtl"===m.dir?s():r();break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),t();break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),u();break;case"PageUp":a.preventDefault(),a.stopPropagation(),a.shiftKey?A():y();break;case"PageDown":a.preventDefault(),a.stopPropagation(),a.shiftKey?B():z();break;case"Home":a.preventDefault(),a.stopPropagation(),C();break;case"End":a.preventDefault(),a.stopPropagation(),D()}null==(c=m.onDayKeyDown)||c.call(m,b,l,a)},onKeyUp:function(a){var c;null==(c=m.onDayKeyUp)||c.call(m,b,l,a)},onMouseEnter:function(a){var c;null==(c=m.onDayMouseEnter)||c.call(m,b,l,a)},onMouseLeave:function(a){var c;null==(c=m.onDayMouseLeave)||c.call(m,b,l,a)},onPointerEnter:function(a){var c;null==(c=m.onDayPointerEnter)||c.call(m,b,l,a)},onPointerLeave:function(a){var c;null==(c=m.onDayPointerLeave)||c.call(m,b,l,a)},onTouchCancel:function(a){var c;null==(c=m.onDayTouchCancel)||c.call(m,b,l,a)},onTouchEnd:function(a){var c;null==(c=m.onDayTouchEnd)||c.call(m,b,l,a)},onTouchMove:function(a){var c;null==(c=m.onDayTouchMove)||c.call(m,b,l,a)},onTouchStart:function(a){var c;null==(c=m.onDayTouchStart)||c.call(m,b,l,a)}},F=aG(),G=bp(),H=a1(),I=a5(),J=aA(F)?G.selected:ay(F)?H.selected:az(F)?I.selected:void 0,K=!!(j.onDayClick||"default"!==j.mode),(0,g.useEffect)(function(){var a;l.outside||!k.focusedDay||K&&x(k.focusedDay,b)&&(null==(a=V.current)||a.focus())},[k.focusedDay,b,V,K,l.outside]),M=(L=[j.classNames.day],Object.keys(l).forEach(function(a){var b=j.modifiersClassNames[a];if(b)L.push(b);else if(Object.values(c).includes(a)){var d=j.classNames["day_".concat(a)];d&&L.push(d)}}),L).join(" "),N=aw({},j.styles.day),Object.keys(l).forEach(function(a){var b;N=aw(aw({},N),null==(b=j.modifiersStyles)?void 0:b[a])}),O=N,P=!!(l.outside&&!j.showOutsideDays||l.hidden),Q=null!=(i=null==(h=j.components)?void 0:h.DayContent)?i:aZ,R={style:O,className:M,children:(0,d.jsx)(Q,{date:b,displayMonth:e,activeModifiers:l}),role:"gridcell"},S=k.focusTarget&&x(k.focusTarget,b)&&!l.outside,T=k.focusedDay&&x(k.focusedDay,b),U=aw(aw(aw({},R),((f={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,f.tabIndex=T||S?0:-1,f)),E),{isButton:K,isHidden:P,activeModifiers:l,selectedDays:J,buttonProps:U,divProps:R});return W.isHidden?(0,d.jsx)("div",{role:"gridcell"}):W.isButton?(0,d.jsx)(aS,aw({name:"day",ref:V},W.buttonProps)):(0,d.jsx)("div",aw({},W.divProps))}function br(a){var b=a.number,c=a.dates,e=aG(),f=e.onWeekNumberClick,g=e.styles,h=e.classNames,i=e.locale,j=e.labels.labelWeekNumber,k=(0,e.formatters.formatWeekNumber)(Number(b),{locale:i});if(!f)return(0,d.jsx)("span",{className:h.weeknumber,style:g.weeknumber,children:k});var l=j(Number(b),{locale:i});return(0,d.jsx)(aS,{name:"week-number","aria-label":l,className:h.weeknumber,style:g.weeknumber,onClick:function(a){f(b,c,a)},children:k})}function bs(a){var b,c,e,f=aG(),g=f.styles,h=f.classNames,j=f.showWeekNumber,k=f.components,l=null!=(b=null==k?void 0:k.Day)?b:bq,m=null!=(c=null==k?void 0:k.WeekNumber)?c:br;return j&&(e=(0,d.jsx)("td",{className:h.cell,style:g.cell,children:(0,d.jsx)(m,{number:a.weekNumber,dates:a.dates})})),(0,d.jsxs)("tr",{className:h.row,style:g.row,children:[e,a.dates.map(function(b){return(0,d.jsx)("td",{className:h.cell,style:g.cell,role:"presentation",children:(0,d.jsx)(l,{displayMonth:a.displayMonth,date:b})},Math.trunc((0,i.toDate)(b)/1e3))})]})}function bt(a,b,c){for(var d=(null==c?void 0:c.ISOWeek)?F(b):E(b,c),e=(null==c?void 0:c.ISOWeek)?(0,u.startOfISOWeek)(a):(0,v.startOfWeek)(a,c),f=(0,z.differenceInCalendarDays)(d,e),g=[],h=0;h<=f;h++)g.push(w(e,h));return g.reduce(function(a,b){var d=(null==c?void 0:c.ISOWeek)?(0,G.getISOWeek)(b):(0,H.getWeek)(b,c),e=a.find(function(a){return a.weekNumber===d});return e?e.dates.push(b):a.push({weekNumber:d,dates:[b]}),a},[])}function bu(a){var b,c,e,f=aG(),g=f.locale,h=f.classNames,l=f.styles,m=f.hideHead,n=f.fixedWeeks,o=f.components,p=f.weekStartsOn,q=f.firstWeekContainsDate,r=f.ISOWeek,s=function(a,b){var c=bt(j(a),(0,k.endOfMonth)(a),b);if(null==b?void 0:b.useFixedWeeks){let k,n,o,p;var d,e,f=(n=(k=(0,i.toDate)(a)).getMonth(),k.setFullYear(k.getFullYear(),n+1,0),k.setHours(0,0,0,0),d=k,e=j(a),o=(0,v.startOfWeek)(d,b),p=(0,v.startOfWeek)(e,b),Math.round((o-(0,J.getTimezoneOffsetInMilliseconds)(o)-(p-(0,J.getTimezoneOffsetInMilliseconds)(p)))/I.millisecondsInWeek)+1);if(f<6){var g=c[c.length-1],h=g.dates[g.dates.length-1],l=B(h,6-f),m=bt(B(h,1),l,b);c.push.apply(c,m)}}return c}(a.displayMonth,{useFixedWeeks:!!n,ISOWeek:r,locale:g,weekStartsOn:p,firstWeekContainsDate:q}),t=null!=(b=null==o?void 0:o.Head)?b:aY,u=null!=(c=null==o?void 0:o.Row)?c:bs,w=null!=(e=null==o?void 0:o.Footer)?e:aW;return(0,d.jsxs)("table",{id:a.id,className:h.table,style:l.table,role:"grid","aria-labelledby":a["aria-labelledby"],children:[!m&&(0,d.jsx)(t,{}),(0,d.jsx)("tbody",{className:h.tbody,style:l.tbody,children:s.map(function(b){return(0,d.jsx)(u,{displayMonth:a.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),(0,d.jsx)(w,{displayMonth:a.displayMonth})]})}var bv=g.useEffect,bw=!1,bx=0;function by(){return"react-day-picker-".concat(++bx)}function bz(a){var b,c,e,f,h,i,j,k,l=aG(),m=l.dir,n=l.classNames,o=l.styles,p=l.components,q=aO().displayMonths,r=(e=null!=(b=l.id?"".concat(l.id,"-").concat(a.displayIndex):void 0)?b:bw?by():null,h=(f=(0,g.useState)(e))[0],i=f[1],bv(function(){null===h&&i(by())},[]),(0,g.useEffect)(function(){!1===bw&&(bw=!0)},[]),null!=(c=null!=b?b:h)?c:void 0),s=l.id?"".concat(l.id,"-grid-").concat(a.displayIndex):void 0,t=[n.month],u=o.month,v=0===a.displayIndex,w=a.displayIndex===q.length-1,x=!v&&!w;"rtl"===m&&(w=(j=[v,w])[0],v=j[1]),v&&(t.push(n.caption_start),u=aw(aw({},u),o.caption_start)),w&&(t.push(n.caption_end),u=aw(aw({},u),o.caption_end)),x&&(t.push(n.caption_between),u=aw(aw({},u),o.caption_between));var y=null!=(k=null==p?void 0:p.Caption)?k:aV;return(0,d.jsxs)("div",{className:t.join(" "),style:u,children:[(0,d.jsx)(y,{id:r,displayMonth:a.displayMonth,displayIndex:a.displayIndex}),(0,d.jsx)(bu,{id:s,"aria-labelledby":r,displayMonth:a.displayMonth})]},a.displayIndex)}function bA(a){var b=aG(),c=b.classNames,e=b.styles;return(0,d.jsx)("div",{className:c.months,style:e.months,children:a.children})}function bB(a){var b,c,e=a.initialProps,f=aG(),h=bl(),i=aO(),j=(0,g.useState)(!1),k=j[0],l=j[1];(0,g.useEffect)(function(){f.initialFocus&&h.focusTarget&&(k||(h.focus(h.focusTarget),l(!0)))},[f.initialFocus,k,h.focus,h.focusTarget,h]);var m=[f.classNames.root,f.className];f.numberOfMonths>1&&m.push(f.classNames.multiple_months),f.showWeekNumber&&m.push(f.classNames.with_weeknumber);var n=aw(aw({},f.styles.root),f.style),o=Object.keys(e).filter(function(a){return a.startsWith("data-")}).reduce(function(a,b){var c;return aw(aw({},a),((c={})[b]=e[b],c))},{}),p=null!=(c=null==(b=e.components)?void 0:b.Months)?c:bA;return(0,d.jsx)("div",aw({className:m.join(" "),style:n,dir:f.dir,id:f.id,nonce:e.nonce,title:e.title,lang:e.lang},o,{children:(0,d.jsx)(p,{children:i.displayMonths.map(function(a,b){return(0,d.jsx)(bz,{displayIndex:b,displayMonth:a},b)})})}))}function bC(a){var b=a.children,c=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}(a,["children"]);return(0,d.jsx)(aF,{initialProps:c,children:(0,d.jsx)(aN,{children:(0,d.jsx)(bn,{initialProps:c,children:(0,d.jsx)(a_,{initialProps:c,children:(0,d.jsx)(a3,{initialProps:c,children:(0,d.jsx)(bg,{children:(0,d.jsx)(bk,{children:b})})})})})})})}function bD(a){return(0,d.jsx)(bC,aw({},a,{children:(0,d.jsx)(bB,{initialProps:a})}))}var bE=a.i(368114),bF=a.i(699570);function bG({className:a,classNames:b,showOutsideDays:c=!0,...g}){return(0,d.jsx)(bD,{showOutsideDays:c,className:(0,bE.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,bE.cn)((0,bF.buttonVariants)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,bE.cn)((0,bF.buttonVariants)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...b},components:{IconLeft:({...a})=>(0,d.jsx)(e.ChevronLeft,{className:"h-4 w-4"}),IconRight:({...a})=>(0,d.jsx)(f.ChevronRight,{className:"h-4 w-4"})},...g})}bG.displayName="Calendar",a.s(["Calendar",()=>bG],320146)},150589,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(695245),f=a.i(159501),g=a.i(156757),h=a.i(372228),i=a.i(730769),j=a.i(915618),k=a.i(781560),l=a.i(596221),m=a.i(699570),n=a.i(866718),o=a.i(429246),p=a.i(320146),q=a.i(441921),r=a.i(580701),s=a.i(599209),t=a.i(206015),u=a.i(786304),v=a.i(505084),w=a.i(823292),x=a.i(368114),y=a.i(405050);let z=(0,y.createServerReference)("40e3beed1dc4ea30a08f2fc2b8b23dc9ce34a1128a",y.callServer,void 0,y.findSourceMapURL,"createJournalEntry"),A=g.z.object({periodId:g.z.string().uuid({message:"Please select a period"}),entryDate:g.z.date(),entryType:g.z.enum(["NORMAL","ADJUSTMENT","REVERSAL"]),description:g.z.string().min(1,"Description is required").max(1e3),notes:g.z.string().max(2e3).optional(),currencyCode:g.z.string().length(3),exchangeRate:g.z.number().positive(),lines:g.z.array(g.z.object({lineNumber:g.z.number().int().min(1),accountId:g.z.string().uuid({message:"Please select an account"}),description:g.z.string().max(500).optional(),debitAmount:g.z.number().min(0),creditAmount:g.z.number().min(0),dimension1:g.z.string().optional(),dimension2:g.z.string().optional()})).min(2,"At least 2 lines required")});function B({agencyId:a,accounts:g,periods:y}){let B=(0,d.useRouter)(),[C,D]=(0,c.useTransition)(),[E,F]=(0,c.useState)(!1),G=(0,e.useForm)({resolver:(0,f.zodResolver)(A),defaultValues:{periodId:"",entryDate:new Date,entryType:"NORMAL",description:"",notes:"",currencyCode:"MYR",exchangeRate:1,lines:[{lineNumber:1,accountId:"",description:"",debitAmount:0,creditAmount:0,dimension1:void 0,dimension2:void 0},{lineNumber:2,accountId:"",description:"",debitAmount:0,creditAmount:0,dimension1:void 0,dimension2:void 0}]}}),{fields:H,append:I,remove:J}=(0,e.useFieldArray)({control:G.control,name:"lines"}),K=G.watch("lines"),L=K.reduce((a,b)=>a+(b.debitAmount||0),0),M=K.reduce((a,b)=>a+(b.creditAmount||0),0),N=.01>Math.abs(L-M),O=L-M,P=async b=>{if(!N)return void w.toast.error("Entry is not balanced. Total debits must equal total credits.");F(!0);try{({...b,entryDate:b.entryDate.toISOString()});let c=await z({periodId:b.periodId,entryDate:b.entryDate,entryType:b.entryType,sourceModule:"MANUAL",description:b.description,currencyCode:b.currencyCode,exchangeRate:b.exchangeRate,lines:b.lines.map(a=>({lineNumber:a.lineNumber||0,accountId:a.accountId||"",description:a.description||void 0,debitAmount:a.debitAmount||0,creditAmount:a.creditAmount||0,dimension1:a.dimension1||void 0,dimension2:a.dimension2||void 0,subledgerType:"NONE",isIntercompany:!1}))});c.success?(w.toast.success("Journal entry created successfully"),D(()=>{B.push(`/agency/${a}/fi/general-ledger/journal-entries`),B.refresh()})):w.toast.error(c.error??"Failed to create journal entry")}catch{w.toast.error("An unexpected error occurred")}finally{F(!1)}};return(0,b.jsx)(q.Form,{...G,children:(0,b.jsxs)("form",{onSubmit:G.handleSubmit(P),className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,b.jsx)(q.FormField,{control:G.control,name:"periodId",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Period *"}),(0,b.jsxs)(r.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select period"})})}),(0,b.jsx)(r.SelectContent,{children:y.map(a=>(0,b.jsx)(r.SelectItem,{value:a.id,children:a.name},a.id))})]}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:G.control,name:"entryDate",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Entry Date *"}),(0,b.jsxs)(s.Popover,{children:[(0,b.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(q.FormControl,{children:(0,b.jsxs)(m.Button,{variant:"outline",className:(0,x.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,h.format)(a.value,"PPP"):(0,b.jsx)("span",{children:"Pick a date"}),(0,b.jsx)(i.CalendarIcon,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,b.jsx)(s.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(p.Calendar,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:G.control,name:"entryType",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Entry Type"}),(0,b.jsxs)(r.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select type"})})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"NORMAL",children:"Normal"}),(0,b.jsx)(r.SelectItem,{value:"ADJUSTMENT",children:"Adjustment"}),(0,b.jsx)(r.SelectItem,{value:"REVERSAL",children:"Reversal"})]})]}),(0,b.jsx)(q.FormMessage,{})]})})]}),(0,b.jsx)(q.FormField,{control:G.control,name:"description",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Description *"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(n.Input,{placeholder:"Enter journal entry description",...a})}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:G.control,name:"notes",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Notes"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(o.Textarea,{placeholder:"Additional notes (optional)",className:"resize-none",...a})}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-medium",children:"Journal Lines"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add debit and credit entries. Total must balance."})]}),(0,b.jsxs)(m.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{I({lineNumber:H.length+1,accountId:"",description:"",debitAmount:0,creditAmount:0})},children:[(0,b.jsx)(j.Plus,{className:"h-4 w-4 mr-2"}),"Add Line"]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(t.Table,{children:[(0,b.jsx)(t.TableHeader,{children:(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableHead,{className:"w-12",children:"#"}),(0,b.jsx)(t.TableHead,{className:"min-w-[200px]",children:"Account"}),(0,b.jsx)(t.TableHead,{className:"min-w-[150px]",children:"Description"}),(0,b.jsx)(t.TableHead,{className:"w-32 text-right",children:"Debit"}),(0,b.jsx)(t.TableHead,{className:"w-32 text-right",children:"Credit"}),(0,b.jsx)(t.TableHead,{className:"w-12"})]})}),(0,b.jsx)(t.TableBody,{children:H.map((a,c)=>(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableCell,{className:"font-medium",children:c+1}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(q.FormField,{control:G.control,name:`lines.${c}.accountId`,render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"space-y-0",children:[(0,b.jsxs)(r.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.SelectTrigger,{className:"h-9",children:(0,b.jsx)(r.SelectValue,{placeholder:"Select account"})})}),(0,b.jsx)(r.SelectContent,{children:g.map(a=>(0,b.jsxs)(r.SelectItem,{value:a?.id,children:[a?.code," - ",a?.name]},a?.id))})]}),(0,b.jsx)(q.FormMessage,{})]})})}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(q.FormField,{control:G.control,name:`lines.${c}.description`,render:({field:a})=>(0,b.jsx)(q.FormItem,{className:"space-y-0",children:(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(n.Input,{className:"h-9",placeholder:"Line description",...a})})})})}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(q.FormField,{control:G.control,name:`lines.${c}.debitAmount`,render:({field:a})=>(0,b.jsx)(q.FormItem,{className:"space-y-0",children:(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(n.Input,{type:"number",step:"0.01",min:"0",className:"h-9 text-right",placeholder:"0.00",...a,onChange:b=>{let d=parseFloat(b.target.value)||0;a.onChange(d),d>0&&G.setValue(`lines.${c}.creditAmount`,0)}})})})})}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(q.FormField,{control:G.control,name:`lines.${c}.creditAmount`,render:({field:a})=>(0,b.jsx)(q.FormItem,{className:"space-y-0",children:(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(n.Input,{type:"number",step:"0.01",min:"0",className:"h-9 text-right",placeholder:"0.00",...a,onChange:b=>{let d=parseFloat(b.target.value)||0;a.onChange(d),d>0&&G.setValue(`lines.${c}.debitAmount`,0)}})})})})}),(0,b.jsx)(t.TableCell,{children:(0,b.jsx)(m.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{H.length<=2?w.toast.error("Minimum 2 lines required for double-entry"):(J(c),G.getValues("lines").forEach((a,b)=>{G.setValue(`lines.${b}.lineNumber`,b+1)}))},disabled:H.length<=2,children:(0,b.jsx)(k.Trash2,{className:"h-4 w-4 text-destructive"})})})]},a.id))}),(0,b.jsxs)(t.TableFooter,{children:[(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableCell,{colSpan:3,className:"text-right font-medium",children:"Totals"}),(0,b.jsx)(t.TableCell,{className:"text-right font-medium",children:L.toFixed(2)}),(0,b.jsx)(t.TableCell,{className:"text-right font-medium",children:M.toFixed(2)}),(0,b.jsx)(t.TableCell,{})]}),(0,b.jsxs)(t.TableRow,{children:[(0,b.jsx)(t.TableCell,{colSpan:3,className:"text-right",children:"Balance Status"}),(0,b.jsx)(t.TableCell,{colSpan:2,className:"text-center",children:N?(0,b.jsx)(u.Badge,{variant:"default",className:"bg-green-600",children:"Balanced"}):(0,b.jsxs)(u.Badge,{variant:"destructive",children:["Unbalanced (",O>0?"+":"",O.toFixed(2),")"]})}),(0,b.jsx)(t.TableCell,{})]})]})]})})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>B.push(`/agency/${a}/fi/general-ledger/journal-entries`),disabled:E,children:"Cancel"}),(0,b.jsxs)(m.Button,{type:"submit",disabled:E||!N,children:[E&&(0,b.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Entry"]})]})]})})}a.s(["JournalEntryForm",()=>B],150589)},905412,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(372228),f=a.i(320146),g=a.i(699570),h=a.i(580701),i=a.i(599209),j=a.i(730769),k=a.i(587532),l=a.i(368114);let m=({reportType:a,periods:m,selectedPeriodId:n,selectedAsOfDate:o,selectedFromDate:p,selectedToDate:q,basePath:r})=>{let s=(0,d.useRouter)(),[t,u]=(0,c.useState)(n?"period":p?"range":"date"),[v,w]=(0,c.useState)(n??""),[x,y]=(0,c.useState)(o?new Date(o):void 0),[z,A]=(0,c.useState)(p?new Date(p):void 0),[B,C]=(0,c.useState)(q?new Date(q):void 0);return(0,b.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Filter By"}),(0,b.jsxs)(h.Select,{value:t,onValueChange:a=>u(a),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"period",children:"Financial Period"}),(0,b.jsx)(h.SelectItem,{value:"date",children:"As of Date"}),("general-ledger"===a||"journal-register"===a)&&(0,b.jsx)(h.SelectItem,{value:"range",children:"Date Range"})]})]})]}),"period"===t&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Period"}),(0,b.jsxs)(h.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[250px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select period"})}),(0,b.jsx)(h.SelectContent,{children:m.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),"date"===t&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"As of Date"}),(0,b.jsxs)(i.Popover,{children:[(0,b.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:(0,l.cn)("w-[250px] justify-start text-left font-normal",!x&&"text-muted-foreground"),children:[(0,b.jsx)(j.CalendarIcon,{className:"mr-2 h-4 w-4"}),x?(0,e.format)(x,"PPP"):"Pick a date"]})}),(0,b.jsx)(i.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(f.Calendar,{mode:"single",selected:x,onSelect:y,initialFocus:!0})})]})]}),"range"===t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"From Date"}),(0,b.jsxs)(i.Popover,{children:[(0,b.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:(0,l.cn)("w-[180px] justify-start text-left font-normal",!z&&"text-muted-foreground"),children:[(0,b.jsx)(j.CalendarIcon,{className:"mr-2 h-4 w-4"}),z?(0,e.format)(z,"PP"):"Start"]})}),(0,b.jsx)(i.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(f.Calendar,{mode:"single",selected:z,onSelect:A,initialFocus:!0})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"To Date"}),(0,b.jsxs)(i.Popover,{children:[(0,b.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:(0,l.cn)("w-[180px] justify-start text-left font-normal",!B&&"text-muted-foreground"),children:[(0,b.jsx)(j.CalendarIcon,{className:"mr-2 h-4 w-4"}),B?(0,e.format)(B,"PP"):"End"]})}),(0,b.jsx)(i.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(f.Calendar,{mode:"single",selected:B,onSelect:C,initialFocus:!0})})]})]})]}),(0,b.jsxs)(g.Button,{onClick:()=>{let a=new URLSearchParams;"period"===t&&v?a.set("periodId",v):"date"===t&&x?a.set("asOfDate",(0,e.format)(x,"yyyy-MM-dd")):"range"===t&&z&&B&&(a.set("fromDate",(0,e.format)(z,"yyyy-MM-dd")),a.set("toDate",(0,e.format)(B,"yyyy-MM-dd"))),s.push(`${r}?${a.toString()}`)},children:[(0,b.jsx)(k.Search,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})};a.s(["ReportFilters",()=>m])},771931,a=>{"use strict";let b=(0,a.i(170106).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);a.s(["Printer",()=>b],771931)},341764,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(591119),e=a.i(699570),f=a.i(206015),g=a.i(335732),h=a.i(284505),i=a.i(624722),j=a.i(104720),k=a.i(771931),l=a.i(596221),m=a.i(823292),n=a.i(897701);function o({data:a,agencyId:o,periodId:p,asOfDate:q}){let[r,s]=(0,c.useTransition)(),[t,u]=(0,c.useState)(null),v=a=>{u(a),s(async()=>{try{let b=new URLSearchParams;b.set("format",a),p&&b.set("periodId",p),q&&b.set("asOfDate",q);let c=await fetch(`/api/fi/general-ledger/reports/trial-balance/export?${b.toString()}`);if(!c.ok)throw Error("Export failed");let d=await c.blob(),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`trial-balance-${p??q}.${a}`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(e),document.body.removeChild(f),m.toast.success(`Report exported as ${a.toUpperCase()}`)}catch(a){m.toast.error("Failed to export report")}finally{u(null)}})},w=.01>Math.abs(a.totals.debit-a.totals.credit);return(0,b.jsxs)(d.Card,{className:"print:shadow-none print:border-none",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between print:hidden",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"Trial Balance"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.metadata?.periodName??`As of ${a.metadata?.asOfDate}`})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},children:[(0,b.jsx)(k.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",disabled:r,children:[r&&t?(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(g.DropdownMenuItem,{onClick:()=>v("csv"),children:[(0,b.jsx)(j.FileText,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,b.jsxs)(g.DropdownMenuItem,{onClick:()=>v("xlsx"),children:[(0,b.jsx)(i.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),(0,b.jsxs)(g.DropdownMenuItem,{onClick:()=>v("pdf"),children:[(0,b.jsx)(j.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})]})]}),(0,b.jsxs)("div",{className:"hidden print:block text-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Trial Balance"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a.metadata?.periodName??`As of ${a.metadata?.asOfDate}`}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Generated: ",new Date(a.metadata?.generatedAt).toLocaleString()]})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{className:"w-[100px]",children:"Account Code"}),(0,b.jsx)(f.TableHead,{children:"Account Name"}),(0,b.jsx)(f.TableHead,{children:"Type"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Debit"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Credit"})]})}),(0,b.jsx)(f.TableBody,{children:a.accounts.map(c=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-mono",children:c.accountCode}),(0,b.jsx)(f.TableCell,{children:c.accountName}),(0,b.jsx)(f.TableCell,{className:"capitalize",children:c.accountType.toLowerCase().replace("_"," ")}),(0,b.jsx)(f.TableCell,{className:"text-right",children:c.debit>0?(0,n.formatCurrency)(c.debit,a.metadata?.currency):"-"}),(0,b.jsx)(f.TableCell,{className:"text-right",children:c.credit>0?(0,n.formatCurrency)(c.credit,a.metadata?.currency):"-"})]},c.accountCode))}),(0,b.jsx)(f.TableFooter,{children:(0,b.jsxs)(f.TableRow,{className:"font-bold",children:[(0,b.jsx)(f.TableCell,{colSpan:3,children:"Total"}),(0,b.jsx)(f.TableCell,{className:"text-right",children:(0,n.formatCurrency)(a.totals.debit,a.metadata?.currency)}),(0,b.jsx)(f.TableCell,{className:"text-right",children:(0,n.formatCurrency)(a.totals.credit,a.metadata?.currency)})]})})]}),(0,b.jsx)("div",{className:`mt-4 p-4 rounded-lg ${w?"bg-green-50 dark:bg-green-950":"bg-red-50 dark:bg-red-950"}`,children:(0,b.jsx)("p",{className:`text-sm font-medium ${w?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:w?"✓ Trial balance is balanced (debits = credits)":`⚠ Trial balance is out of balance by ${(0,n.formatCurrency)(Math.abs(a.totals.debit-a.totals.credit),a.metadata?.currency)}`})})]})]})}a.s(["TrialBalanceReport",()=>o])},547484,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(335732),f=a.i(284505),g=a.i(624722),h=a.i(104720),i=a.i(771931),j=a.i(596221),k=a.i(823292);let l=({exportEndpoint:a,reportName:l,params:m={},showPrint:n=!0,disabled:o=!1})=>{let[p,q]=(0,c.useTransition)(),[r,s]=(0,c.useState)(null),t=b=>{s(b),q(async()=>{try{let c=new URLSearchParams;c.set("format",b),Object.entries(m).forEach(([a,b])=>{b&&c.set(a,b)});let d=await fetch(`${a}?${c.toString()}`);if(!d.ok){let a=await d.json().catch(()=>({error:"Export failed"}));throw Error(a.error||"Export failed")}let e=await d.blob(),f=window.URL.createObjectURL(e),g=document.createElement("a");g.href=f;let h=new Date().toISOString().split("T")[0];g.download=`${l.toLowerCase().replace(/\s+/g,"-")}-${h}.${b}`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(f),document.body.removeChild(g),k.toast.success(`Report exported as ${b.toUpperCase()}`)}catch(a){k.toast.error(a instanceof Error?a.message:"Failed to export report")}finally{s(null)}})};return(0,b.jsxs)("div",{className:"flex gap-2 print:hidden",children:[n&&(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},disabled:o,children:[(0,b.jsx)(i.Printer,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,b.jsxs)(e.DropdownMenu,{children:[(0,b.jsx)(e.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",disabled:o||p,children:[p&&r?(0,b.jsx)(j.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(f.Download,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,b.jsxs)(e.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(e.DropdownMenuItem,{onClick:()=>t("csv"),children:[(0,b.jsx)(h.FileText,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),(0,b.jsxs)(e.DropdownMenuItem,{onClick:()=>t("xlsx"),children:[(0,b.jsx)(g.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Export as Excel"]}),(0,b.jsxs)(e.DropdownMenuItem,{onClick:()=>t("pdf"),children:[(0,b.jsx)(h.FileText,{className:"h-4 w-4 mr-2"}),"Export as PDF"]})]})]})]})},m=({title:a,subtitle:c,exportEndpoint:d,reportName:e,params:f})=>(0,b.jsxs)("div",{className:"flex flex-row items-center justify-between print:hidden",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:a}),c&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c})]}),(0,b.jsx)(l,{exportEndpoint:d,reportName:e,params:f})]}),n=({title:a,subtitle:c,generatedAt:d})=>{let e=d?new Date(d).toLocaleString():new Date().toLocaleString();return(0,b.jsxs)("div",{className:"hidden print:block text-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:a}),c&&(0,b.jsx)("p",{className:"text-muted-foreground",children:c}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Generated: ",e]})]})};a.s(["ReportExportButton",()=>l,"ReportHeader",()=>m,"ReportPrintHeader",()=>n])},570108,a=>{"use strict";var b=a.i(405050);let c=(0,b.createServerReference)("40d1468c05ee3b0d35ae90530577cde053b3acdae2",b.callServer,void 0,b.findSourceMapURL,"createFinancialPeriod");a.s(["createFinancialPeriod",()=>c])},531628,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(823292),f=a.i(591119),g=a.i(699570),h=a.i(173390),i=a.i(866718),j=a.i(48468),k=a.i(580701),l=a.i(563658),m=a.i(786304),n=a.i(596221),o=a.i(816201),p=a.i(732860),q=a.i(400210),r=a.i(501027),s=a.i(170106);let t=(0,s.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var u=a.i(501199);let v=(0,s.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var w=a.i(405050);let x=(0,w.createServerReference)("606c7b8d6fe347a04230db1dbd860adb1641ccc214",w.callServer,void 0,w.findSourceMapURL,"applyTemplate"),y=(0,w.createServerReference)("4082a7cddd12f558a23615c11447210af09d5aa3e2",w.callServer,void 0,w.findSourceMapURL,"initializeGLConfiguration");var z=a.i(570108);let A=(0,w.createServerReference)("404030d5a8a87f718fbcdccd004ffa6e553769deb2",w.callServer,void 0,w.findSourceMapURL,"applyDefaultPostingRules");var B=a.i(156757);let C=B.z.enum(["INPUT","OUTPUT","WITHHOLDING","EXEMPT"]),D=B.z.enum(["MONTHLY","QUARTERLY","ANNUAL"]),E=B.z.object({code:B.z.string().min(1).max(10).regex(/^[A-Z0-9_-]+$/i,"Code must be alphanumeric"),name:B.z.string().min(1).max(100),description:B.z.string().max(500).optional(),rate:B.z.number().min(0).max(100),type:C,accountId:B.z.uuid(),reverseChargeAccountId:B.z.string().uuid().optional(),isDefault:B.z.boolean().default(!1),isActive:B.z.boolean().default(!0),effectiveFrom:B.z.coerce.date().optional(),effectiveTo:B.z.coerce.date().optional()});E.partial().extend({id:B.z.uuid()}),B.z.object({enabled:B.z.boolean().default(!1),inputVATAccountId:B.z.string().uuid().nullable().optional(),outputVATAccountId:B.z.string().uuid().nullable().optional(),withholdingTaxAccountId:B.z.string().uuid().nullable().optional(),taxClearingAccountId:B.z.string().uuid().nullable().optional(),taxPayableAccountId:B.z.string().uuid().nullable().optional(),taxReceivableAccountId:B.z.string().uuid().nullable().optional(),taxPeriod:D.default("MONTHLY"),taxCodes:B.z.array(E).default([]),autoApplyDefaultTax:B.z.boolean().default(!1),requireTaxOnInvoice:B.z.boolean().default(!1),calculateTaxInclusive:B.z.boolean().default(!1)}),B.z.object({periodId:B.z.uuid(),clearingDate:B.z.coerce.date(),description:B.z.string().max(200).optional(),clearInputVAT:B.z.boolean().default(!0),clearOutputVAT:B.z.boolean().default(!0),clearWithholding:B.z.boolean().default(!1),netToPayable:B.z.boolean().default(!0)}),B.z.object({amount:B.z.number(),taxCodeId:B.z.string(),isInclusive:B.z.boolean().default(!1)}),B.z.object({periodId:B.z.string().uuid().optional(),fromDate:B.z.coerce.date().optional(),toDate:B.z.coerce.date().optional(),taxType:C.optional(),taxCodes:B.z.array(B.z.string()).optional(),format:B.z.enum(["SCREEN","PDF","EXCEL","CSV"]).default("SCREEN")});let F=Object.entries({SIMPLE_VAT:{name:"Simple VAT",description:"Standard input/output VAT setup",codes:[{code:"VAT_IN",name:"Input VAT",type:"INPUT",rate:0},{code:"VAT_OUT",name:"Output VAT",type:"OUTPUT",rate:0}]},GST:{name:"GST",description:"Goods and Services Tax setup",codes:[{code:"GST_IN",name:"GST Input",type:"INPUT",rate:0},{code:"GST_OUT",name:"GST Output",type:"OUTPUT",rate:0},{code:"GST_EXEMPT",name:"GST Exempt",type:"EXEMPT",rate:0}]},SALES_TAX:{name:"Sales Tax",description:"US-style sales tax setup",codes:[{code:"SALES_TAX",name:"Sales Tax",type:"OUTPUT",rate:0},{code:"USE_TAX",name:"Use Tax",type:"INPUT",rate:0}]},WITHHOLDING:{name:"Withholding Tax",description:"Income withholding tax setup",codes:[{code:"WHT",name:"Withholding Tax",type:"WITHHOLDING",rate:0}]},NONE:{name:"No Tax",description:"No tax management",codes:[]}}).map(([a,b])=>({id:a,...b})),G=[{id:"company",title:"Company Info",description:"Configure basic settings"},{id:"coa",title:"Chart of Accounts",description:"Select a template"},{id:"periods",title:"Financial Periods",description:"Set up periods"},{id:"tax",title:"Tax Settings",description:"Configure tax accounts",optional:!0},{id:"posting",title:"Posting Rules",description:"Set default posting rules",optional:!0},{id:"review",title:"Review & Finish",description:"Confirm your settings"}],H=[{id:"standard",name:"General Business",coaTemplate:"standard"},{id:"service",name:"Professional Services",coaTemplate:"service-business"},{id:"agency",name:"Agency / Creative",coaTemplate:"agency"},{id:"retail",name:"Retail / Trading",coaTemplate:"standard"},{id:"manufacturing",name:"Manufacturing",coaTemplate:"standard"},{id:"minimal",name:"Simple / Minimal",coaTemplate:"minimal"}],I=({agencyId:a})=>{let i=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,s]=(0,c.useState)("company"),[u,v]=(0,c.useTransition)(),[w,B]=(0,c.useState)({baseCurrency:"USD",fiscalYearStart:"01-01",fiscalYearEnd:"12-31",requireApproval:!0,businessType:"standard",coaTemplate:"standard",startYear:new Date().getFullYear(),numberOfYears:2,enableTax:!1,taxPreset:null,applyDefaultPostingRules:!0}),C="express"===j?G.filter(a=>!a.optional):G,D=C.findIndex(a=>a.id===l),E=(D+1)/C.length*100;return j?(0,b.jsxs)(f.Card,{className:"max-w-2xl",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{children:"GL Setup Wizard"}),(0,b.jsx)(f.CardDescription,{children:"Complete these steps to set up your General Ledger"})]}),(0,b.jsxs)(m.Badge,{variant:"outline",className:"capitalize",children:[j," setup"]})]}),(0,b.jsx)(h.Progress,{value:E,className:"mt-4"}),(0,b.jsx)("div",{className:"flex justify-between mt-2 text-sm text-muted-foreground",children:C.map((a,c)=>(0,b.jsx)("span",{className:c<=D?"text-primary font-medium":"",children:a.title},a.id))})]}),(0,b.jsxs)(f.CardContent,{children:["company"===l&&(0,b.jsx)(J,{data:w,onUpdate:a=>B(b=>({...b,...a}))}),"coa"===l&&(0,b.jsx)(K,{data:w,onUpdate:a=>B(b=>({...b,...a}))}),"periods"===l&&(0,b.jsx)(L,{data:w,onUpdate:a=>B(b=>({...b,...a}))}),"tax"===l&&(0,b.jsx)(N,{data:w,onUpdate:a=>B(b=>({...b,...a}))}),"posting"===l&&(0,b.jsx)(O,{data:w,onUpdate:a=>B(b=>({...b,...a}))}),"review"===l&&(0,b.jsx)(M,{data:w,setupMode:j})]}),(0,b.jsxs)(f.CardFooter,{className:"flex justify-between",children:[(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>{s(C[Math.max(D-1,0)].id)},disabled:0===D||u,children:[(0,b.jsx)(q.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Previous"]}),"review"===l?(0,b.jsx)(g.Button,{onClick:()=>{v(async()=>{try{let b=await y({baseCurrency:w.baseCurrency,fiscalYearStart:w.fiscalYearStart,fiscalYearEnd:w.fiscalYearEnd,requireApproval:w.requireApproval,useControlAccounts:!0,autoPostingEnabled:!1,allowFuturePeriodPost:!1,allowClosedPeriodPost:!1,consolidationEnabled:!1,consolidationMethod:"FULL",eliminateIntercompany:!1,autoCreatePeriods:!1,periodLockDays:0,accountCodeFormat:"",accountCodeLength:0,accountCodeSeparator:"",erpIntegrationEnabled:!1,retainAuditDays:0});if(!b.success)return void e.toast.error(b.error);let c=await x(w.coaTemplate,{includeSystemAccounts:!0});if(!c.success)return void e.toast.error(c.error);for(let a=w.startYear;a<w.startYear+w.numberOfYears;a++)for(let b=1;b<=12;b++){let c=new Date(a,b-1,1),d=new Date(a,b,0),f=await (0,z.createFinancialPeriod)({name:`${a}-${String(b).padStart(2,"0")}`,periodType:"MONTH",fiscalYear:a,fiscalPeriod:b,startDate:c,endDate:d,isYearEnd:12===b});if(!f.success)return void e.toast.error(f.error)}w.applyDefaultPostingRules&&((await A()).success||e.toast.warning("Posting rules setup incomplete. You can configure them in Settings.")),e.toast.success("GL setup completed successfully!"),i.push(`/agency/${a}/fi/general-ledger`),i.refresh()}catch(a){e.toast.error("Failed to complete GL setup")}})},disabled:u,children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.CheckCircle,{className:"mr-2 h-4 w-4"}),"Complete Setup"]})}):(0,b.jsxs)(g.Button,{onClick:()=>{let a=Math.min(D+1,C.length-1);s(C[a].id)},disabled:u,children:["Next",(0,b.jsx)(p.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]}):(0,b.jsxs)(f.Card,{className:"max-w-2xl",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"GL Setup Wizard"}),(0,b.jsx)(f.CardDescription,{children:"Choose how you want to set up your General Ledger"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("button",{onClick:()=>{k("express"),B(a=>({...a,requireApproval:!0,coaTemplate:"standard",numberOfYears:2,enableTax:!1,applyDefaultPostingRules:!0}))},className:"w-full p-6 rounded-lg border-2 border-primary/20 hover:border-primary hover:bg-primary/5 transition-all text-left group",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:(0,b.jsx)(r.Zap,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Express Setup"}),(0,b.jsx)(m.Badge,{variant:"secondary",children:"Recommended"})]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Get started quickly with sensible defaults. Perfect for most businesses. You can customize everything later."}),(0,b.jsxs)("ul",{className:"mt-3 text-sm text-muted-foreground space-y-1",children:[(0,b.jsx)("li",{children:"• Standard chart of accounts"}),(0,b.jsx)("li",{children:"• Recommended posting rules applied"}),(0,b.jsx)("li",{children:"• 2 years of monthly periods"})]})]})]})}),(0,b.jsx)("button",{onClick:()=>k("custom"),className:"w-full p-6 rounded-lg border hover:border-primary/50 hover:bg-accent transition-all text-left",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-muted",children:(0,b.jsx)(t,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Custom Setup"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Full control over all settings including tax configuration and posting rules."})]})]})})]})]})};function J({data:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Base Currency"}),(0,b.jsxs)(k.Select,{value:a.baseCurrency,onValueChange:a=>c({baseCurrency:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"MYR",name:"Malaysian Ringgit"},{code:"SGD",name:"Singapore Dollar"}].map(a=>(0,b.jsxs)(k.SelectItem,{value:a.code,children:[a.code," - ",a.name]},a.code))})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will be your primary reporting currency"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Fiscal Year Start"}),(0,b.jsx)(i.Input,{value:a.fiscalYearStart,onChange:a=>c({fiscalYearStart:a.target.value}),placeholder:"01-01"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Format: MM-DD"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Fiscal Year End"}),(0,b.jsx)(i.Input,{value:a.fiscalYearEnd,onChange:a=>c({fiscalYearEnd:a.target.value}),placeholder:"12-31"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Format: MM-DD"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Require Approval"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Journal entries require approval before posting"})]}),(0,b.jsx)(l.Switch,{checked:a.requireApproval,onCheckedChange:a=>c({requireApproval:a})})]})]})}function K({data:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select your business type to get an industry-appropriate chart of accounts"}),(0,b.jsx)(j.RadioGroup,{value:a.businessType,onValueChange:a=>{let b=H.find(b=>b.id===a);c({businessType:a,coaTemplate:b?.coaTemplate??"standard"})},className:"grid gap-3",children:H.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.RadioGroupItem,{value:a.id,id:a.id}),(0,b.jsx)("label",{htmlFor:a.id,className:"flex flex-1 cursor-pointer items-center justify-between rounded-lg border p-4 hover:bg-accent",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Uses ",a.coaTemplate," template"]})]})})]},a.id))})]})}function L({data:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Starting Year"}),(0,b.jsx)(i.Input,{type:"number",value:a.startYear,onChange:a=>c({startYear:parseInt(a.target.value)}),min:2020,max:2030}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"The first year to create financial periods for"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Number of Years"}),(0,b.jsxs)(k.Select,{value:a.numberOfYears.toString(),onValueChange:a=>c({numberOfYears:parseInt(a)}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"1",children:"1 Year (12 periods)"}),(0,b.jsx)(k.SelectItem,{value:"2",children:"2 Years (24 periods)"}),(0,b.jsx)(k.SelectItem,{value:"3",children:"3 Years (36 periods)"}),(0,b.jsx)(k.SelectItem,{value:"5",children:"5 Years (60 periods)"})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Monthly periods will be created for each year"})]})]})}function M({data:a,setupMode:c}){let d=H.find(b=>b.id===a.businessType),e=a.taxPreset?F.find(b=>b.id===a.taxPreset):null;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please review your settings before completing the setup:"}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Setup Mode"}),(0,b.jsx)("span",{className:"font-medium capitalize",children:c})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Base Currency"}),(0,b.jsx)("span",{className:"font-medium",children:a.baseCurrency})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Fiscal Year"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.fiscalYearStart," to ",a.fiscalYearEnd]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Require Approval"}),(0,b.jsx)("span",{className:"font-medium",children:a.requireApproval?"Yes":"No"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Business Type"}),(0,b.jsx)("span",{className:"font-medium",children:d?.name??a.businessType})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"COA Template"}),(0,b.jsx)("span",{className:"font-medium capitalize",children:a.coaTemplate.replace("-"," ")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Periods"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.startYear," - ",a.startYear+a.numberOfYears-1," (",12*a.numberOfYears," ","periods)"]})]}),"custom"===c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Tax Setup"}),(0,b.jsx)("span",{className:"font-medium",children:a.enableTax?e?.name??"Custom":"Skipped"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Default Posting Rules"}),(0,b.jsx)("span",{className:"font-medium",children:a.applyDefaultPostingRules?"Applied":"Skipped"})]})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("strong",{children:"Note:"})," After setup, you can add more accounts and periods, but some settings like base currency cannot be changed after transactions are posted."]})})]})}function N({data:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(u.Receipt,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Enable Tax Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Set up tax accounts and posting configurations"})]})]}),(0,b.jsx)(l.Switch,{checked:a.enableTax,onCheckedChange:a=>c({enableTax:a,taxPreset:a?"simple":null})})]}),a.enableTax&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a tax preset to quickly configure tax accounts"}),(0,b.jsx)(j.RadioGroup,{value:a.taxPreset??"",onValueChange:a=>c({taxPreset:a}),className:"grid gap-3",children:F.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.RadioGroupItem,{value:a.id,id:`tax-${a.id}`}),(0,b.jsx)("label",{htmlFor:`tax-${a.id}`,className:"flex flex-1 cursor-pointer items-center justify-between rounded-lg border p-4 hover:bg-accent",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})})]},a.id))}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can customize tax codes and accounts after setup in Settings → Tax Configuration"})]})]})}function O({data:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(v,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Apply Default Posting Rules"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically configure rules for forex, rounding, and discrepancies"})]})]}),(0,b.jsx)(l.Switch,{checked:a.applyDefaultPostingRules,onCheckedChange:a=>c({applyDefaultPostingRules:a})})]}),a.applyDefaultPostingRules&&(0,b.jsxs)("div",{className:"rounded-lg border p-4 space-y-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Default rules that will be applied:"}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-2",children:[(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{children:"Forex Realized Gain/Loss posting"})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{children:"Forex Unrealized Gain/Loss posting"})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{children:"Payment discrepancy handling"})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{children:"Rounding difference allocation"})]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{children:"Cash clearing rules"})]})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"You can customize posting rules after setup in Settings → Posting Rules"})]})}I.displayName="GLSetupWizard",a.s(["GLSetupWizard",()=>I],531628)},325097,a=>{"use strict";var b=a.i(405050);let c=(0,b.createServerReference)("4035d595559932637460e183d4645d5fba4e4973dc",b.callServer,void 0,b.findSourceMapURL,"updateGLConfiguration");a.s(["updateGLConfiguration",()=>c])},755156,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(695245),e=a.i(159501),f=a.i(156757),g=a.i(823292),h=a.i(325097),i=a.i(405050);let j=(0,i.createServerReference)("402088cbcc19d7eb6cf62eb1644f3109edc1c66240",i.callServer,void 0,i.findSourceMapURL,"updateBaseCurrency"),k=(0,i.createServerReference)("60d1dd7f780ced21cf879e9d7aefa798ed9767b178",i.callServer,void 0,i.findSourceMapURL,"updateFiscalYear"),l=(0,i.createServerReference)("408627094323c3da03939125ab92077c6dbe885487",i.callServer,void 0,i.findSourceMapURL,"updateApprovalSettings"),m=(0,i.createServerReference)("40138128b985e606268f67c04881579b303ff20e91",i.callServer,void 0,i.findSourceMapURL,"updateConsolidationSettings"),n=(0,i.createServerReference)("40f1c4ce5b382577731ec1e8519ac2736f4dafef6a",i.callServer,void 0,i.findSourceMapURL,"updateAccountCodeFormat"),o=(0,i.createServerReference)("40340cc23f41fe43d7a127f9cd593f31162b0cd501",i.callServer,void 0,i.findSourceMapURL,"updateERPIntegration"),p=(0,i.createServerReference)("402d7c7d5f557914f2c438bc7dc7cfeece83a6332c",i.callServer,void 0,i.findSourceMapURL,"updateSubAccountConfiguration");var q=a.i(441921),r=a.i(866718),s=a.i(699570),t=a.i(563658),u=a.i(580701),v=a.i(596221);let w=f.z.object({accountCodeFormat:f.z.string().min(1,"Format is required"),accountCodeLength:f.z.number().min(4).max(16)}),x=f.z.object({useControlAccounts:f.z.boolean()}),y=f.z.object({retainAuditDays:f.z.number().min(90).max(3650)}),z=f.z.object({fiscalYearStart:f.z.string().regex(/^\d{2}-\d{2}$/,"Use MM-DD format"),fiscalYearEnd:f.z.string().regex(/^\d{2}-\d{2}$/,"Use MM-DD format"),autoCreatePeriods:f.z.boolean(),periodLockDays:f.z.number().min(0).max(30)}),A=f.z.object({baseCurrency:f.z.string().length(3,"Must be 3-letter currency code")}),B=f.z.object({consolidationMethod:f.z.enum(["FULL","PROPORTIONAL","EQUITY"]),eliminateIntercompany:f.z.boolean()}),C=f.z.object({requireApproval:f.z.boolean(),approvalThreshold:f.z.number().min(0).optional(),autoPostingEnabled:f.z.boolean(),allowFuturePeriodPost:f.z.boolean(),allowClosedPeriodPost:f.z.boolean()}),D=f.z.object({isIndependent:f.z.boolean(),baseCurrency:f.z.string().length(3).optional(),fiscalYearStart:f.z.string().regex(/^\d{2}-\d{2}$/).optional(),fiscalYearEnd:f.z.string().regex(/^\d{2}-\d{2}$/).optional(),requireApproval:f.z.boolean().optional(),approvalThreshold:f.z.number().min(0).optional(),autoPostingEnabled:f.z.boolean().optional(),accountCodeFormat:f.z.string().optional(),accountCodeLength:f.z.number().min(4).max(16).optional()}),E={accountCode:w,controlAccounts:x,audit:y,fiscalYear:z,currency:A,consolidation:B,posting:C,erp:f.z.object({erpIntegrationEnabled:f.z.boolean(),erpSystemType:f.z.string().optional(),erpApiUrl:f.z.string().url().optional().or(f.z.literal(""))}),subAccountConfig:D},F=({section:a,initialData:f,disabled:i})=>{let[r,t]=(0,c.useTransition)(),u=E[a],w=(0,d.useForm)({resolver:(0,e.zodResolver)(u),defaultValues:f});return(0,b.jsx)(q.Form,{...w,children:(0,b.jsxs)("form",{onSubmit:w.handleSubmit(b=>{t(async()=>{try{let c;switch(a){case"accountCode":c=await n(b);break;case"fiscalYear":(c=await k(b.fiscalYearStart,b.fiscalYearEnd)).success&&(c=await (0,h.updateGLConfiguration)({autoCreatePeriods:b.autoCreatePeriods,periodLockDays:b.periodLockDays}));break;case"currency":c=await j(b.baseCurrency);break;case"consolidation":c=await m(b);break;case"posting":c=await l(b);break;case"erp":c=await o(b);break;case"subAccountConfig":c=await p(b);break;default:c=await (0,h.updateGLConfiguration)(b)}c.success?g.toast.success("Settings updated successfully"):g.toast.error(c.error??"Failed to update settings")}catch(a){g.toast.error("An error occurred while updating settings")}})}),className:"space-y-4",children:["accountCode"===a&&(0,b.jsx)(G,{form:w,disabled:i}),"controlAccounts"===a&&(0,b.jsx)(H,{form:w,disabled:i}),"audit"===a&&(0,b.jsx)(I,{form:w,disabled:i}),"fiscalYear"===a&&(0,b.jsx)(J,{form:w,disabled:i}),"currency"===a&&(0,b.jsx)(K,{form:w,disabled:i}),"consolidation"===a&&(0,b.jsx)(L,{form:w,disabled:i}),"posting"===a&&(0,b.jsx)(M,{form:w,disabled:i}),"erp"===a&&(0,b.jsx)(N,{form:w,disabled:i}),"subAccountConfig"===a&&(0,b.jsx)(O,{form:w,disabled:i}),(0,b.jsxs)(s.Button,{type:"submit",disabled:i||r,children:[r&&(0,b.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})})};function G({form:a,disabled:c}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"accountCodeFormat",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Account Code Format"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"####-####",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Use # for digits, - or . as separators (e.g., ####-####)"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"accountCodeLength",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Account Code Length"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseInt(b.target.value)),disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Number of digits (4-16)"}),(0,b.jsx)(q.FormMessage,{})]})})]})}function H({form:a,disabled:c}){return(0,b.jsx)(q.FormField,{control:a.control,name:"useControlAccounts",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Use Control Accounts"}),(0,b.jsx)(q.FormDescription,{children:"Enable control accounts for AR, AP, and other subledgers"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})})}function I({form:a,disabled:c}){return(0,b.jsx)(q.FormField,{control:a.control,name:"retainAuditDays",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Audit Trail Retention (Days)"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseInt(b.target.value)),disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Number of days to retain audit trail records (90-3650)"}),(0,b.jsx)(q.FormMessage,{})]})})}function J({form:a,disabled:c}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(q.FormField,{control:a.control,name:"fiscalYearStart",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Fiscal Year Start"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"01-01",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Format: MM-DD"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"fiscalYearEnd",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Fiscal Year End"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"12-31",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Format: MM-DD"}),(0,b.jsx)(q.FormMessage,{})]})})]}),(0,b.jsx)(q.FormField,{control:a.control,name:"autoCreatePeriods",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Auto-Create Periods"}),(0,b.jsx)(q.FormDescription,{children:"Automatically create periods for new fiscal years"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"periodLockDays",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Period Lock (Days After Close)"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseInt(b.target.value)),disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Days after month-end before period is locked"}),(0,b.jsx)(q.FormMessage,{})]})})]})}function K({form:a,disabled:c}){let d=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"},{code:"CAD",name:"Canadian Dollar"},{code:"AUD",name:"Australian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SGD",name:"Singapore Dollar"},{code:"MYR",name:"Malaysian Ringgit"}];return(0,b.jsx)(q.FormField,{control:a.control,name:"baseCurrency",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Base Currency"}),(0,b.jsxs)(u.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:c,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Select currency"})})}),(0,b.jsx)(u.SelectContent,{children:d.map(a=>(0,b.jsxs)(u.SelectItem,{value:a.code,children:[a.code," - ",a.name]},a.code))})]}),(0,b.jsx)(q.FormDescription,{children:"This cannot be changed after transactions are posted"}),(0,b.jsx)(q.FormMessage,{})]})})}function L({form:a,disabled:c}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"consolidationMethod",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Consolidation Method"}),(0,b.jsxs)(u.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:c,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Select method"})})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"FULL",children:"Full Consolidation"}),(0,b.jsx)(u.SelectItem,{value:"PROPORTIONAL",children:"Proportional Consolidation"}),(0,b.jsx)(u.SelectItem,{value:"EQUITY",children:"Equity Method"})]})]}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"eliminateIntercompany",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Eliminate Intercompany"}),(0,b.jsx)(q.FormDescription,{children:"Automatically eliminate intercompany transactions during consolidation"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})})]})}function M({form:a,disabled:c}){let d=a.watch("requireApproval");return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"requireApproval",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Require Approval"}),(0,b.jsx)(q.FormDescription,{children:"Journal entries require approval before posting"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),d&&(0,b.jsx)(q.FormField,{control:a.control,name:"approvalThreshold",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Approval Threshold Amount"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseFloat(b.target.value)||0),disabled:c,placeholder:"0.00"})}),(0,b.jsx)(q.FormDescription,{children:"Entries above this amount require approval (0 = all entries)"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"autoPostingEnabled",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Auto-Posting"}),(0,b.jsx)(q.FormDescription,{children:"Automatically post approved entries"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"allowFuturePeriodPost",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Allow Future Period Posting"}),(0,b.jsx)(q.FormDescription,{children:"Allow posting to periods that haven't started"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"allowClosedPeriodPost",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Allow Closed Period Posting"}),(0,b.jsx)(q.FormDescription,{children:"Allow posting to closed periods (requires special permission)"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})})]})}function N({form:a,disabled:c}){let d=a.watch("erpIntegrationEnabled");return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"erpIntegrationEnabled",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Enable ERP Integration"}),(0,b.jsx)(q.FormDescription,{children:"Connect to external ERP systems for data sync"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"erpSystemType",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"ERP System"}),(0,b.jsxs)(u.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:c,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Select ERP system"})})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"SAP",children:"SAP"}),(0,b.jsx)(u.SelectItem,{value:"ORACLE",children:"Oracle"}),(0,b.jsx)(u.SelectItem,{value:"NETSUITE",children:"NetSuite"}),(0,b.jsx)(u.SelectItem,{value:"DYNAMICS",children:"Microsoft Dynamics"}),(0,b.jsx)(u.SelectItem,{value:"QUICKBOOKS",children:"QuickBooks"}),(0,b.jsx)(u.SelectItem,{value:"XERO",children:"Xero"}),(0,b.jsx)(u.SelectItem,{value:"OTHER",children:"Other"})]})]}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"erpApiUrl",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"API URL"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"https://api.erp-system.com",disabled:c})}),(0,b.jsx)(q.FormMessage,{})]})})]})]})}function O({form:a,disabled:c}){let d=a.watch("isIndependent"),e=a.watch("requireApproval"),f=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"},{code:"CAD",name:"Canadian Dollar"},{code:"AUD",name:"Australian Dollar"},{code:"CHF",name:"Swiss Franc"},{code:"CNY",name:"Chinese Yuan"},{code:"SGD",name:"Singapore Dollar"},{code:"MYR",name:"Malaysian Ringgit"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"isIndependent",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border border-primary/20 bg-primary/5 p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base font-semibold",children:"Independent Configuration"}),(0,b.jsx)(q.FormDescription,{children:"Enable to use separate GL settings for this SubAccount (like SAP SKA1/SKB1 pattern). When disabled, settings are inherited from Agency with optional overrides."})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),(0,b.jsxs)("div",{className:`space-y-4 ${!d?"opacity-75":""}`,children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:d?"✓ Full independent configuration (not inherited from Agency)":"↳ Override settings (empty fields inherit from Agency)"}),(0,b.jsx)(q.FormField,{control:a.control,name:"baseCurrency",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsxs)(q.FormLabel,{children:["Base Currency ",!d&&"(Override)"]}),(0,b.jsxs)(u.Select,{onValueChange:a.onChange,defaultValue:a.value,disabled:c,children:[(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:d?"Select currency":"Use Agency currency"})})}),(0,b.jsx)(u.SelectContent,{children:f.map(a=>(0,b.jsxs)(u.SelectItem,{value:a.code,children:[a.code," - ",a.name]},a.code))})]}),(0,b.jsx)(q.FormDescription,{children:d?"Base currency for this SubAccount":"Leave empty to use Agency base currency"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(q.FormField,{control:a.control,name:"fiscalYearStart",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Fiscal Year Start"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"01-01",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Format: MM-DD"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"fiscalYearEnd",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Fiscal Year End"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"12-31",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Format: MM-DD"}),(0,b.jsx)(q.FormMessage,{})]})})]}),(0,b.jsx)(q.FormField,{control:a.control,name:"requireApproval",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Require Approval"}),(0,b.jsx)(q.FormDescription,{children:"Journal entries require approval before posting"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),e&&(0,b.jsx)(q.FormField,{control:a.control,name:"approvalThreshold",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Approval Threshold Amount"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseFloat(b.target.value)||0),disabled:c,placeholder:"0.00"})}),(0,b.jsx)(q.FormDescription,{children:"Entries above this amount require approval (0 = all entries)"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"autoPostingEnabled",render:({field:a})=>(0,b.jsxs)(q.FormItem,{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(q.FormLabel,{className:"text-base",children:"Auto-Posting"}),(0,b.jsx)(q.FormDescription,{children:"Automatically post approved entries"})]}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(t.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:c})})]})}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.FormField,{control:a.control,name:"accountCodeFormat",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Account Code Format"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{...a,placeholder:"####-####",disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Use # for digits, - or . as separators"}),(0,b.jsx)(q.FormMessage,{})]})}),(0,b.jsx)(q.FormField,{control:a.control,name:"accountCodeLength",render:({field:a})=>(0,b.jsxs)(q.FormItem,{children:[(0,b.jsx)(q.FormLabel,{children:"Account Code Length"}),(0,b.jsx)(q.FormControl,{children:(0,b.jsx)(r.Input,{type:"number",...a,onChange:b=>a.onChange(parseInt(b.target.value)),disabled:c})}),(0,b.jsx)(q.FormDescription,{children:"Number of digits (4-16)"}),(0,b.jsx)(q.FormMessage,{})]})})]})]})]})}F.displayName="GLSettingsForm",a.s(["GLSettingsForm",()=>F],755156)},769991,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(206015),f=a.i(699570),g=a.i(786304),h=a.i(563658),i=a.i(335732),j=a.i(486192),k=a.i(823292),l=a.i(417755),m=a.i(699464),n=a.i(781560),o=a.i(705151),p=a.i(325015),q=a.i(170106);let r=(0,q.default)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),s=(0,q.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]);var t=a.i(669520);let u=(0,q.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var v=a.i(441660),w=a.i(501027);let x=(0,q.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var y=a.i(405050);let z=(0,y.createServerReference)("40ccf4ceb1932729c606fdbaa618b2f24c34d813b8",y.callServer,void 0,y.findSourceMapURL,"updatePostingRule"),A=(0,y.createServerReference)("407a09f403e9d8b83a61c2f9aadf2e6a9763960c8b",y.callServer,void 0,y.findSourceMapURL,"deletePostingRule"),B={FOREX:(0,b.jsx)(r,{className:"h-3.5 w-3.5"}),ROUNDING:(0,b.jsx)(s,{className:"h-3.5 w-3.5"}),DISCREPANCY:(0,b.jsx)(t.RefreshCw,{className:"h-3.5 w-3.5"}),TAX:(0,b.jsx)(u,{className:"h-3.5 w-3.5"}),CLEARING:(0,b.jsx)(v.PiggyBank,{className:"h-3.5 w-3.5"}),ALLOCATION:(0,b.jsx)(w.Zap,{className:"h-3.5 w-3.5"}),CUSTOM:(0,b.jsx)(x,{className:"h-3.5 w-3.5"})},C={FOREX:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",ROUNDING:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",DISCREPANCY:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",TAX:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",CLEARING:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",ALLOCATION:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300",CUSTOM:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},D=({rules:a,accounts:q,canEdit:r,agencyId:s})=>{let t=(0,d.useRouter)(),[u,v]=(0,c.useTransition)(),[w,x]=(0,c.useState)(null),y=async a=>{r&&v(async()=>{let b=await z({id:a.id,isActive:!a.isActive});b.success?(k.toast.success(`Rule ${a.isActive?"disabled":"enabled"}`),t.refresh()):k.toast.error(b.error||"Failed to update rule")})},D=async a=>{r&&v(async()=>{let b=await z({id:a.id,autoPost:!a.autoPost});b.success?(k.toast.success(`Auto-post ${a.autoPost?"disabled":"enabled"}`),t.refresh()):k.toast.error(b.error||"Failed to update rule")})},E=async()=>{w&&r&&v(async()=>{let a=await A(w);a.success?(k.toast.success("Rule deleted"),t.refresh()):k.toast.error(a.error||"Failed to delete rule"),x(null)})},F=(a,b)=>{if(b)return`${b.code} - ${b.name}`;let c=q.find(b=>b?.id===a);return c?`${c.code} - ${c.name}`:a};return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)("p",{children:"No posting rules configured yet."}),r&&(0,b.jsx)("p",{className:"text-sm mt-2",children:"Create a new rule or use a template to get started."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableHead,{className:"w-10",children:"#"}),(0,b.jsx)(e.TableHead,{children:"Rule"}),(0,b.jsx)(e.TableHead,{children:"Category"}),(0,b.jsx)(e.TableHead,{children:"Source"}),(0,b.jsx)(e.TableHead,{children:"Debit Account"}),(0,b.jsx)(e.TableHead,{children:"Credit Account"}),(0,b.jsx)(e.TableHead,{className:"text-center",children:"Active"}),(0,b.jsx)(e.TableHead,{className:"text-center",children:"Auto-Post"}),(0,b.jsx)(e.TableHead,{className:"w-10"})]})}),(0,b.jsx)(e.TableBody,{children:a.map((a,c)=>(0,b.jsxs)(e.TableRow,{className:u?"opacity-50":"",children:[(0,b.jsx)(e.TableCell,{className:"font-mono text-muted-foreground",children:a.priority}),(0,b.jsx)(e.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:a.code})]})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsxs)(g.Badge,{variant:"secondary",className:`flex items-center gap-1 w-fit ${C[a.category]}`,children:[B[a.category],a.category]})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("span",{className:"text-sm",children:a.sourceModule})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("span",{className:"text-sm font-mono",children:F(a.debitAccountId,a.DebitAccount)})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("span",{className:"text-sm font-mono",children:F(a.creditAccountId,a.CreditAccount)})}),(0,b.jsx)(e.TableCell,{className:"text-center",children:(0,b.jsx)(h.Switch,{checked:a.isActive,onCheckedChange:()=>y(a),disabled:!r||u})}),(0,b.jsx)(e.TableCell,{className:"text-center",children:(0,b.jsx)(h.Switch,{checked:a.autoPost,onCheckedChange:()=>D(a),disabled:!r||u})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",disabled:u,children:(0,b.jsx)(l.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>t.push(`/agency/${s}/fi/general-ledger/settings/posting-rules/${a.id}`),children:[(0,b.jsx)(m.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>t.push(`/agency/${s}/fi/general-ledger/settings/posting-rules/new?clone=${a.id}`),children:[(0,b.jsx)(o.Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,b.jsxs)(i.DropdownMenuItem,{children:[(0,b.jsx)(p.Play,{className:"mr-2 h-4 w-4"}),"Test Rule"]}),r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>x(a.id),children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},a.id))})]}),(0,b.jsx)(j.AlertDialog,{open:!!w,onOpenChange:()=>x(null),children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Delete Posting Rule"}),(0,b.jsx)(j.AlertDialogDescription,{children:"Are you sure you want to delete this posting rule? This action cannot be undone."})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:E,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};a.s(["PostingRulesSettings",()=>D],769991)},457196,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(695245),f=a.i(159501),g=a.i(156757),h=a.i(441921),i=a.i(580701),j=a.i(563658),k=a.i(699570),l=a.i(823292),m=a.i(596221),n=a.i(325097);let o=g.z.object({enabled:g.z.boolean(),taxPeriod:g.z.enum(["MONTHLY","QUARTERLY","ANNUAL"]),autoApplyDefaultTax:g.z.boolean(),requireTaxOnInvoice:g.z.boolean(),calculateTaxInclusive:g.z.boolean()}),p=g.z.object({inputVATAccountId:g.z.string().nullable(),outputVATAccountId:g.z.string().nullable()}),q=g.z.object({withholdingTaxAccountId:g.z.string().nullable()}),r=g.z.object({taxClearingAccountId:g.z.string().nullable(),taxPayableAccountId:g.z.string().nullable(),taxReceivableAccountId:g.z.string().nullable()});function s({section:a,initialData:g,accounts:s=[],disabled:t=!1}){let u=(0,d.useRouter)(),[v,w]=(0,c.useTransition)(),x=(0,e.useForm)({resolver:(0,f.zodResolver)({general:o,vatAccounts:p,withholdingAccounts:q,clearingAccounts:r}[a]),defaultValues:g}),y=a=>{w(async()=>{try{let b={...a},c=await (0,n.updateGLConfiguration)({taxSettings:b});c.success?(l.toast.success("Tax settings updated"),u.refresh()):l.toast.error(c.error||"Failed to update settings")}catch(a){l.toast.error("An error occurred")}})};return"general"===a?(0,b.jsx)(h.Form,{...x,children:(0,b.jsxs)("form",{onSubmit:x.handleSubmit(y),className:"space-y-4",children:[(0,b.jsx)(h.FormField,{control:x.control,name:"enabled",render:({field:a})=>(0,b.jsxs)(h.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.FormLabel,{children:"Enable Tax Management"}),(0,b.jsx)(h.FormDescription,{children:"Track tax accounts and codes"})]}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(j.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:t})})]})}),(0,b.jsx)(h.FormField,{control:x.control,name:"taxPeriod",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{children:"Tax Period"}),(0,b.jsxs)(i.Select,{value:a.value,onValueChange:a.onChange,disabled:t,children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"MONTHLY",children:"Monthly"}),(0,b.jsx)(i.SelectItem,{value:"QUARTERLY",children:"Quarterly"}),(0,b.jsx)(i.SelectItem,{value:"ANNUAL",children:"Annual"})]})]}),(0,b.jsx)(h.FormDescription,{children:"How often you file tax returns"})]})}),(0,b.jsx)(h.FormField,{control:x.control,name:"autoApplyDefaultTax",render:({field:a})=>(0,b.jsxs)(h.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.FormLabel,{children:"Auto-apply Default Tax"}),(0,b.jsx)(h.FormDescription,{children:"Automatically apply default tax code to new transactions"})]}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(j.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:t})})]})}),(0,b.jsx)(h.FormField,{control:x.control,name:"calculateTaxInclusive",render:({field:a})=>(0,b.jsxs)(h.FormItem,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.FormLabel,{children:"Tax-Inclusive Calculation"}),(0,b.jsx)(h.FormDescription,{children:"Calculate tax from tax-inclusive amounts"})]}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(j.Switch,{checked:a.value,onCheckedChange:a.onChange,disabled:t})})]})}),(0,b.jsxs)(k.Button,{type:"submit",disabled:t||v,children:[v&&(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})}):(0,b.jsx)(h.Form,{...x,children:(0,b.jsxs)("form",{onSubmit:x.handleSubmit(y),className:"space-y-4",children:[Object.keys(g).map(a=>(0,b.jsx)(h.FormField,{control:x.control,name:a,render:({field:c})=>{var d;return(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{children:{inputVATAccountId:"Input VAT Account",outputVATAccountId:"Output VAT Account",withholdingTaxAccountId:"Withholding Tax Account",taxClearingAccountId:"Tax Clearing Account",taxPayableAccountId:"Tax Payable Account",taxReceivableAccountId:"Tax Receivable Account"}[d=a]||d}),(0,b.jsxs)(i.Select,{value:c.value||"",onValueChange:a=>c.onChange(a||null),disabled:t,children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select account"})})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"",children:"None"}),s.map(a=>(0,b.jsxs)(i.SelectItem,{value:a.id,children:[a.code," - ",a.name]},a.id))]})]}),(0,b.jsx)(h.FormMessage,{})]})}},a)),(0,b.jsxs)(k.Button,{type:"submit",disabled:t||v,children:[v&&(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})})}a.s(["TaxSettingsForm",()=>s])},617950,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(206015),f=a.i(699570),g=a.i(786304),h=a.i(563658),i=a.i(335732),j=a.i(486192),k=a.i(823292),l=a.i(417755),m=a.i(699464),n=a.i(781560),o=a.i(821374);let p=(0,a.i(170106).default)("star-off",[["path",{d:"m10.344 4.688 1.181-2.393a.53.53 0 0 1 .95 0l2.31 4.679a2.12 2.12 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.237 3.152",key:"19ctli"}],["path",{d:"m17.945 17.945.43 2.505a.53.53 0 0 1-.771.56l-4.618-2.428a2.12 2.12 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a8 8 0 0 0 .4-.099",key:"ptqqvy"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),q={INPUT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",OUTPUT:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",WITHHOLDING:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",EXEMPT:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"};function r({taxCodes:a,accounts:r,canEdit:s,agencyId:t}){let u=(0,d.useRouter)(),[v,w]=(0,c.useTransition)(),[x,y]=(0,c.useState)(null),z=async a=>{s&&w(async()=>{k.toast.success(`${a} set as default`),u.refresh()})},A=async()=>{x&&s&&w(async()=>{k.toast.success("Tax code deleted"),y(null),u.refresh()})};return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)("p",{children:"No tax codes configured yet."}),s&&(0,b.jsx)("p",{className:"text-sm mt-2",children:"Add a tax code or apply a template to get started."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableHead,{children:"Code"}),(0,b.jsx)(e.TableHead,{children:"Name"}),(0,b.jsx)(e.TableHead,{children:"Type"}),(0,b.jsx)(e.TableHead,{className:"text-right",children:"Rate"}),(0,b.jsx)(e.TableHead,{children:"Account"}),(0,b.jsx)(e.TableHead,{className:"text-center",children:"Default"}),(0,b.jsx)(e.TableHead,{className:"text-center",children:"Active"}),(0,b.jsx)(e.TableHead,{className:"w-10"})]})}),(0,b.jsx)(e.TableBody,{children:a.map(a=>{var c;let d;return(0,b.jsxs)(e.TableRow,{className:v?"opacity-50":"",children:[(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("span",{className:"font-mono font-medium",children:a.code})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),a.description&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description})]})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)(g.Badge,{variant:"secondary",className:q[a.type],children:a.type})}),(0,b.jsxs)(e.TableCell,{className:"text-right font-mono",children:[a.rate.toFixed(2),"%"]}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("span",{className:"text-sm",children:(c=a.accountId,(d=r.find(a=>a.id===c))?`${d.code} - ${d.name}`:c)})}),(0,b.jsx)(e.TableCell,{className:"text-center",children:a.isDefault?(0,b.jsx)(o.Star,{className:"h-4 w-4 fill-yellow-400 text-yellow-400 mx-auto"}):(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground/30 mx-auto"})}),(0,b.jsx)(e.TableCell,{className:"text-center",children:(0,b.jsx)(h.Switch,{checked:!1!==a.isActive,disabled:!s||v})}),(0,b.jsx)(e.TableCell,{children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",disabled:v,children:(0,b.jsx)(l.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>u.push(`/agency/${t}/fi/general-ledger/settings/tax/codes/${a.code}`),children:[(0,b.jsx)(m.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),!a.isDefault&&(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>z(a.code),children:[(0,b.jsx)(o.Star,{className:"mr-2 h-4 w-4"}),"Set as Default"]}),s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>y(a.code),children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},a.code)})})]}),(0,b.jsx)(j.AlertDialog,{open:!!x,onOpenChange:()=>y(null),children:(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Delete Tax Code"}),(0,b.jsx)(j.AlertDialogDescription,{children:"Are you sure you want to delete this tax code? Existing transactions using this code will not be affected."})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}a.s(["TaxCodesTable",()=>r],617950)},38888,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(695245),e=a.i(159501),f=a.i(823292),g=a.i(50944),h=a.i(596221),i=a.i(941675),j=a.i(915618),k=a.i(699464),l=a.i(372228),m=a.i(699570),n=a.i(866718),o=a.i(429246),p=a.i(563658),q=a.i(320146),r=a.i(441921),s=a.i(580701),t=a.i(757061),u=a.i(599209),v=a.i(505084),w=a.i(368114),x=a.i(156757);x.z.object({name:x.z.string().min(1).max(100),shortName:x.z.string().max(20).optional(),periodType:x.z.enum(["MONTH","QUARTER","HALF_YEAR","YEAR","CUSTOM"]),fiscalYear:x.z.number().int().min(2e3).max(2100),fiscalPeriod:x.z.number().int().min(1).max(12),startDate:x.z.coerce.date(),endDate:x.z.coerce.date(),status:x.z.enum(["FUTURE","OPEN","CLOSED","LOCKED"]).default("FUTURE"),openedAt:x.z.date().optional(),openedBy:x.z.string().optional(),closedAt:x.z.date().optional(),closedBy:x.z.string().optional(),lockedAt:x.z.date().optional(),lockedBy:x.z.string().optional(),openingBalances:x.z.any().optional(),closingBalances:x.z.any().optional(),yearEndProcessedAt:x.z.date().optional(),yearEndProcessedBy:x.z.string().optional(),isYearEnd:x.z.boolean().default(!1),notes:x.z.string().max(1e3).optional()});let y=x.z.object({name:x.z.string().min(1).max(100),shortName:x.z.string().max(20).optional(),periodType:x.z.enum(["MONTH","QUARTER","HALF_YEAR","YEAR","CUSTOM"]),fiscalYear:x.z.number().int().min(2e3).max(2100),fiscalPeriod:x.z.number().int().min(1).max(12),startDate:x.z.coerce.date(),endDate:x.z.coerce.date(),isYearEnd:x.z.boolean().default(!1),notes:x.z.string().max(1e3).optional()}).refine(a=>a.endDate>a.startDate,{message:"End date must be after start date"});y.extend({id:x.z.uuid()}),x.z.object({id:x.z.uuid()}),x.z.object({id:x.z.uuid(),notes:x.z.string().max(500).optional()}),x.z.object({id:x.z.uuid(),notes:x.z.string().max(500).optional()}),x.z.object({periodId:x.z.uuid(),retainedEarningsAccountId:x.z.uuid(),createBroughtForward:x.z.boolean().default(!0),notes:x.z.string().max(1e3).optional()});var z=a.i(570108),A=a.i(405050);let B=(0,A.createServerReference)("40d53d68950c391dc500b44e5c7ca6c8e8598f3eb2",A.callServer,void 0,A.findSourceMapURL,"updateFinancialPeriod"),C=[{value:"MONTH",label:"Month"},{value:"QUARTER",label:"Quarter"},{value:"HALF_YEAR",label:"Half Year"},{value:"YEAR",label:"Year"},{value:"CUSTOM",label:"Custom"}],D=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],E=new Date().getFullYear(),F=Array.from({length:10},(a,b)=>E-2+b),G=({mode:a,period:j,onSuccess:k,onCancel:t})=>{let x=(0,g.useRouter)(),[A,G]=(0,c.useTransition)(),H=(0,d.useForm)({resolver:(0,e.zodResolver)(y),defaultValues:{name:j?.name??"",shortName:j?.shortName??void 0,periodType:j?.periodType??"MONTH",fiscalYear:j?.fiscalYear??E,fiscalPeriod:j?.fiscalPeriod??1,startDate:j?.startDate??new Date(E,0,1),endDate:j?.endDate??new Date(E,0,31),isYearEnd:j?.isYearEnd??!1,notes:j?.notes??void 0}}),I=H.watch("periodType"),J=H.watch("fiscalPeriod"),K=H.watch("fiscalYear");return c.useEffect(()=>{if("create"===a){let a="",b="";switch(I){case"MONTH":let c=D.find(a=>a.value===J);a=`${c?.label??"Month"} ${K}`,b=`${c?.label?.slice(0,3)??"Mon"}-${String(K).slice(-2)}`;break;case"QUARTER":a=`Q${J} FY${K}`,b=`Q${J}-${String(K).slice(-2)}`;break;case"HALF_YEAR":a=`H${J} FY${K}`,b=`H${J}-${String(K).slice(-2)}`;break;case"YEAR":a=`FY${K}`,b=`FY${String(K).slice(-2)}`;break;default:a=`Period ${J} FY${K}`,b=`P${J}-${String(K).slice(-2)}`}H.setValue("name",a),H.setValue("shortName",b)}},[I,J,K,a,H]),(0,b.jsx)(r.Form,{...H,children:(0,b.jsxs)("form",{onSubmit:H.handleSubmit(b=>{G(async()=>{try{let c={...b,startDate:b.startDate,endDate:b.endDate},d="create"===a?await (0,z.createFinancialPeriod)(c):await B({id:j.id,...c});d.success?(f.toast.success("create"===a?"Period created":"Period updated"),x.refresh(),k?.()):f.toast.error(d.error??"Failed to save period")}catch{f.toast.error("An error occurred")}})}),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Period Configuration"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(r.FormField,{control:H.control,name:"periodType",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Period Type *"}),(0,b.jsxs)(s.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"Select type"})})}),(0,b.jsx)(s.SelectContent,{children:C.map(a=>(0,b.jsx)(s.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)(r.FormMessage,{})]})}),(0,b.jsx)(r.FormField,{control:H.control,name:"fiscalYear",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Fiscal Year *"}),(0,b.jsxs)(s.Select,{onValueChange:b=>a.onChange(parseInt(b)),value:String(a.value),children:[(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"Select year"})})}),(0,b.jsx)(s.SelectContent,{children:F.map(a=>(0,b.jsx)(s.SelectItem,{value:String(a),children:a},a))})]}),(0,b.jsx)(r.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(r.FormField,{control:H.control,name:"fiscalPeriod",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Period Number *"}),(0,b.jsxs)(s.Select,{onValueChange:b=>a.onChange(parseInt(b)),value:String(a.value),children:[(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"Select period"})})}),(0,b.jsxs)(s.SelectContent,{children:["MONTH"===I&&D.map(a=>(0,b.jsx)(s.SelectItem,{value:String(a.value),children:a.label},a.value)),"QUARTER"===I&&[1,2,3,4].map(a=>(0,b.jsxs)(s.SelectItem,{value:String(a),children:["Quarter ",a]},a)),"HALF_YEAR"===I&&[1,2].map(a=>(0,b.jsxs)(s.SelectItem,{value:String(a),children:["Half ",a]},a)),"YEAR"===I&&(0,b.jsx)(s.SelectItem,{value:"1",children:"Full Year"}),"CUSTOM"===I&&Array.from({length:12},(a,b)=>b+1).map(a=>(0,b.jsxs)(s.SelectItem,{value:String(a),children:["Period ",a]},a))]})]}),(0,b.jsx)(r.FormMessage,{})]})}),(0,b.jsx)(r.FormField,{control:H.control,name:"isYearEnd",render:({field:a})=>(0,b.jsxs)(r.FormItem,{className:"flex items-center justify-between rounded-lg border p-3 mt-6",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(r.FormLabel,{children:"Year-End Period"}),(0,b.jsx)(r.FormDescription,{className:"text-xs",children:"Triggers year-end closing"})]}),(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(p.Switch,{checked:a.value,onCheckedChange:a.onChange})})]})})]})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Period Identity"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(r.FormField,{control:H.control,name:"name",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Period Name *"}),(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(n.Input,{placeholder:"January 2026",...a})}),(0,b.jsx)(r.FormMessage,{})]})}),(0,b.jsx)(r.FormField,{control:H.control,name:"shortName",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Short Name"}),(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(n.Input,{placeholder:"Jan-26",...a})}),(0,b.jsx)(r.FormMessage,{})]})})]})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Date Range"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(r.FormField,{control:H.control,name:"startDate",render:({field:a})=>(0,b.jsxs)(r.FormItem,{className:"flex flex-col",children:[(0,b.jsx)(r.FormLabel,{children:"Start Date *"}),(0,b.jsxs)(u.Popover,{children:[(0,b.jsx)(u.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(r.FormControl,{children:(0,b.jsxs)(m.Button,{variant:"outline",className:(0,w.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,l.format)(a.value,"PPP"):"Pick a date",(0,b.jsx)(i.Calendar,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,b.jsx)(u.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(q.Calendar,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,b.jsx)(r.FormMessage,{})]})}),(0,b.jsx)(r.FormField,{control:H.control,name:"endDate",render:({field:a})=>(0,b.jsxs)(r.FormItem,{className:"flex flex-col",children:[(0,b.jsx)(r.FormLabel,{children:"End Date *"}),(0,b.jsxs)(u.Popover,{children:[(0,b.jsx)(u.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(r.FormControl,{children:(0,b.jsxs)(m.Button,{variant:"outline",className:(0,w.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value?(0,l.format)(a.value,"PPP"):"Pick a date",(0,b.jsx)(i.Calendar,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,b.jsx)(u.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(q.Calendar,{mode:"single",selected:a.value,onSelect:a.onChange,initialFocus:!0})})]}),(0,b.jsx)(r.FormMessage,{})]})})]})]}),(0,b.jsx)(v.Separator,{}),(0,b.jsx)(r.FormField,{control:H.control,name:"notes",render:({field:a})=>(0,b.jsxs)(r.FormItem,{children:[(0,b.jsx)(r.FormLabel,{children:"Notes"}),(0,b.jsx)(r.FormControl,{children:(0,b.jsx)(o.Textarea,{placeholder:"Optional notes about this period...",className:"resize-none",...a})}),(0,b.jsx)(r.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[t&&(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,b.jsxs)(m.Button,{type:"submit",disabled:A,children:[A&&(0,b.jsx)(h.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"create"===a?"Create Period":"Save Changes"]})]})]})})},H=({mode:a,period:d,trigger:e,onSuccess:f})=>{let[g,h]=c.useState(!1);return(0,b.jsxs)(t.Sheet,{open:g,onOpenChange:h,children:[(0,b.jsx)(t.SheetTrigger,{asChild:!0,children:e??(0,b.jsx)(m.Button,{variant:"create"===a?"default":"ghost",size:"create"===a?"sm":"icon",children:"create"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"New Period"]}):(0,b.jsx)(k.Pencil,{className:"h-4 w-4"})})}),(0,b.jsxs)(t.SheetContent,{className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,b.jsxs)(t.SheetHeader,{children:[(0,b.jsx)(t.SheetTitle,{children:"create"===a?"Create Financial Period":`Edit Period: ${d?.name}`}),(0,b.jsx)(t.SheetDescription,{children:"create"===a?"Define a new financial period for accounting":"Modify period details"})]}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(G,{mode:a,period:d,onSuccess:()=>{h(!1),f?.()},onCancel:()=>h(!1)})})]})]})};a.s(["FiscalPeriodForm",()=>G,"FiscalPeriodFormTrigger",()=>H],38888)}];

//# sourceMappingURL=_bf05bde7._.js.map