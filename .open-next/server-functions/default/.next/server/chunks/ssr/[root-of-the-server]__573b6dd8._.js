module.exports=[738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},167453,a=>{"use strict";let b=(0,a.i(170106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],167453)},596221,a=>{"use strict";let b=(0,a.i(170106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],596221)},533095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(833354),g=a.r(494915),h=a.r(767161),i=f._(a.r(402305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},571987,(a,b,c)=>{b.exports=a.r(533095)},124348,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c}));h.displayName="AlertTitle";let i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));i.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>i,"AlertTitle",()=>h])},400210,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],400210)},984474,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(571987),f=a.i(238246),g=a.i(591119),h=a.i(699570),i=a.i(866718),j=a.i(870430),k=a.i(124348),l=a.i(596221),m=a.i(167453),n=a.i(400210),o=a.i(878125);function p(){let a=(0,d.useRouter)(),{toast:p}=(0,o.useToast)(),q=(0,d.useSearchParams)(),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)("reset-request");(0,c.useEffect)(()=>{let a=q.get("scope");"reset-request"===a||"reset-password"===a?C(a):C("reset-request")},[q]);let D=async b=>{b.preventDefault(),y(null),w(!0);try{let b=q.get("token")||"",c=await fetch("/api/auth/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,token:b})}),d=await c.json();if(!c.ok)throw Error(d.error||"Something went wrong");p({title:"Password Reset Successful",description:"You can now sign in with your new password."}),A(!0),setTimeout(()=>{a.push("/agency/sign-in")},5e3)}catch(a){y(a instanceof Error?a.message:"Failed to reset password")}finally{w(!1)}},E=async b=>{b.preventDefault(),y(null),w(!0);try{let b=await fetch("/api/auth/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),c=await b.json();if(!b.ok)throw Error(c.error||"Something went wrong");A(!0),a.push(`/agency/verify?scope=reset-request&email=${encodeURIComponent(r)}`)}catch(a){y(a instanceof Error?a.message:"Failed to send reset email")}finally{w(!1)}};if(z){if("reset-request"===B)return(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,b.jsxs)(g.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(g.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:(0,b.jsx)(m.CheckCircle2,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,b.jsx)(g.CardTitle,{children:"Check Your Email"}),(0,b.jsxs)(g.CardDescription,{children:["We've sent password reset instructions to ",(0,b.jsx)("strong",{children:r})]})]}),(0,b.jsx)(g.CardContent,{className:"text-center text-sm text-muted-foreground",children:(0,b.jsx)("p",{children:"If you don't see the email, check your spam folder. The link will expire in 1 hour."})}),(0,b.jsx)(g.CardFooter,{className:"flex justify-center",children:(0,b.jsx)(f.default,{href:"/agency/sign-in",children:(0,b.jsxs)(h.Button,{variant:"outline",children:[(0,b.jsx)(n.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Sign In"]})})})]})});if("reset-password"===B)return(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,b.jsxs)(g.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(g.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:(0,b.jsx)(m.CheckCircle2,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,b.jsx)(g.CardTitle,{children:"Password Reset Successful"}),(0,b.jsx)(g.CardDescription,{children:"Your password has been successfully reset."})]}),(0,b.jsx)(g.CardContent,{className:"text-center text-sm text-muted-foreground",children:(0,b.jsx)("p",{children:"You can now sign in with your new password."})}),(0,b.jsx)(g.CardFooter,{className:"flex justify-center",children:(0,b.jsx)(f.default,{href:"/agency/sign-in",children:(0,b.jsxs)(h.Button,{variant:"outline",children:[(0,b.jsx)(n.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Sign In"]})})})]})})}return(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,b.jsxs)(g.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(g.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4",children:(0,b.jsx)(e.default,{src:"/assets/autlify-logo.svg",alt:"Autlify",width:140,height:40,className:"dark:invert"})}),(0,b.jsx)(g.CardTitle,{children:"Forgot Password?"}),(0,b.jsx)(g.CardDescription,{children:"Enter your email address and we'll send you a link to reset your password."})]}),(0,b.jsxs)("form",{onSubmit:E,children:[(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[x&&(0,b.jsx)(k.Alert,{variant:"destructive",children:(0,b.jsx)(k.AlertDescription,{children:x})}),(0,b.jsxs)("div",{className:"space-y-2",hidden:"reset-request"!==B,children:[(0,b.jsx)(j.Label,{htmlFor:"email",children:"Email Address"}),(0,b.jsx)(i.Input,{id:"email",type:"email",placeholder:"you@example.com",value:r,onChange:a=>s(a.target.value),required:"reset-request"===B,disabled:v,autoComplete:"email",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",hidden:"reset-password"!==B,children:[(0,b.jsx)(j.Label,{htmlFor:"password",children:"New Password"}),(0,b.jsx)(i.Input,{id:"password",type:"password",placeholder:"Enter your new password",value:t,onChange:a=>u(a.target.value),required:"reset-password"===B,disabled:v,autoComplete:"new-password",autoFocus:!0})]})]}),(0,b.jsxs)(g.CardFooter,{className:"flex flex-col gap-4",children:[(0,b.jsx)(h.Button,{type:"submit",className:"w-full",disabled:v,onClick:"reset-request"===B?E:D,children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"reset-request"===B?"Send Reset Link":"Confirm Reset"}),(0,b.jsxs)(f.default,{href:"/agency/sign-in",className:"text-sm text-muted-foreground hover:text-primary",children:[(0,b.jsx)(n.ArrowLeft,{className:"mr-1 inline h-3 w-3"}),"Back to Sign In"]})]})]})]})})}a.s(["default",()=>p])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__573b6dd8._.js.map