module.exports=[792509,(e,t,i)=>{t.exports=e.x("url",()=>require("url"))},500874,(e,t,i)=>{t.exports=e.x("buffer",()=>require("buffer"))},522734,(e,t,i)=>{t.exports=e.x("fs",()=>require("fs"))},406461,(e,t,i)=>{t.exports=e.x("zlib",()=>require("zlib"))},688947,(e,t,i)=>{t.exports=e.x("stream",()=>require("stream"))},814747,(e,t,i)=>{t.exports=e.x("path",()=>require("path"))},224361,(e,t,i)=>{t.exports=e.x("util",()=>require("util"))},504446,(e,t,i)=>{t.exports=e.x("net",()=>require("net"))},679594,(e,t,i)=>{t.exports=e.x("dns",()=>require("dns"))},446786,(e,t,i)=>{t.exports=e.x("os",()=>require("os"))},755004,(e,t,i)=>{t.exports=e.x("tls",()=>require("tls"))},921517,(e,t,i)=>{t.exports=e.x("http",()=>require("http"))},524836,(e,t,i)=>{t.exports=e.x("https",()=>require("https"))},427699,(e,t,i)=>{t.exports=e.x("events",()=>require("events"))},233405,(e,t,i)=>{t.exports=e.x("child_process",()=>require("child_process"))},363818,e=>{e.v({name:"nodemailer",version:"7.0.13",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",format:'prettier --write "**/*.{js,json,md}"',"format:check":'prettier --check "**/*.{js,json,md}"',lint:"eslint .","lint:fix":"eslint . --fix",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-sesv2":"3.975.0",bunyan:"1.8.15",c8:"10.1.3",eslint:"9.39.2","eslint-config-prettier":"10.1.8",globals:"17.1.0",libbase64:"1.3.0",libmime:"5.3.7",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",prettier:"3.8.1",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.18.0"},engines:{node:">=6.0.0"}})},755381,e=>{e.v(JSON.parse('{"1und1":{"description":"1&1 Mail (German hosting provider)","host":"smtp.1und1.de","port":465,"secure":true,"authMethod":"LOGIN"},"126":{"description":"126 Mail (NetEase)","host":"smtp.126.com","port":465,"secure":true},"163":{"description":"163 Mail (NetEase)","host":"smtp.163.com","port":465,"secure":true},"Aliyun":{"description":"Alibaba Cloud Mail","domains":["aliyun.com"],"host":"smtp.aliyun.com","port":465,"secure":true},"AliyunQiye":{"description":"Alibaba Cloud Enterprise Mail","host":"smtp.qiye.aliyun.com","port":465,"secure":true},"AOL":{"description":"AOL Mail","domains":["aol.com"],"host":"smtp.aol.com","port":587},"Aruba":{"description":"Aruba PEC (Italian email provider)","domains":["aruba.it","pec.aruba.it"],"aliases":["Aruba PEC"],"host":"smtps.aruba.it","port":465,"secure":true,"authMethod":"LOGIN"},"Bluewin":{"description":"Bluewin (Swiss email provider)","host":"smtpauths.bluewin.ch","domains":["bluewin.ch"],"port":465},"BOL":{"description":"BOL Mail (Brazilian provider)","domains":["bol.com.br"],"host":"smtp.bol.com.br","port":587,"requireTLS":true},"DebugMail":{"description":"DebugMail (email testing service)","host":"debugmail.io","port":25},"Disroot":{"description":"Disroot (privacy-focused provider)","domains":["disroot.org"],"host":"disroot.org","port":587,"secure":false,"authMethod":"LOGIN"},"DynectEmail":{"description":"Dyn Email Delivery","aliases":["Dynect"],"host":"smtp.dynect.net","port":25},"ElasticEmail":{"description":"Elastic Email","aliases":["Elastic Email"],"host":"smtp.elasticemail.com","port":465,"secure":true},"Ethereal":{"description":"Ethereal Email (email testing service)","aliases":["ethereal.email"],"host":"smtp.ethereal.email","port":587},"FastMail":{"description":"FastMail","domains":["fastmail.fm"],"host":"smtp.fastmail.com","port":465,"secure":true},"Feishu Mail":{"description":"Feishu Mail (Lark)","aliases":["Feishu","FeishuMail"],"domains":["www.feishu.cn"],"host":"smtp.feishu.cn","port":465,"secure":true},"Forward Email":{"description":"Forward Email (email forwarding service)","aliases":["FE","ForwardEmail"],"domains":["forwardemail.net"],"host":"smtp.forwardemail.net","port":465,"secure":true},"GandiMail":{"description":"Gandi Mail","aliases":["Gandi","Gandi Mail"],"host":"mail.gandi.net","port":587},"Gmail":{"description":"Gmail","aliases":["Google Mail"],"domains":["gmail.com","googlemail.com"],"host":"smtp.gmail.com","port":465,"secure":true},"GMX":{"description":"GMX Mail","domains":["gmx.com","gmx.net","gmx.de"],"host":"mail.gmx.com","port":587},"Godaddy":{"description":"GoDaddy Email (US)","host":"smtpout.secureserver.net","port":25},"GodaddyAsia":{"description":"GoDaddy Email (Asia)","host":"smtp.asia.secureserver.net","port":25},"GodaddyEurope":{"description":"GoDaddy Email (Europe)","host":"smtp.europe.secureserver.net","port":25},"hot.ee":{"description":"Hot.ee (Estonian email provider)","host":"mail.hot.ee"},"Hotmail":{"description":"Outlook.com / Hotmail","aliases":["Outlook","Outlook.com","Hotmail.com"],"domains":["hotmail.com","outlook.com"],"host":"smtp-mail.outlook.com","port":587},"iCloud":{"description":"iCloud Mail","aliases":["Me","Mac"],"domains":["me.com","mac.com"],"host":"smtp.mail.me.com","port":587},"Infomaniak":{"description":"Infomaniak Mail (Swiss hosting provider)","host":"mail.infomaniak.com","domains":["ik.me","ikmail.com","etik.com"],"port":587},"KolabNow":{"description":"KolabNow (secure email service)","domains":["kolabnow.com"],"aliases":["Kolab"],"host":"smtp.kolabnow.com","port":465,"secure":true,"authMethod":"LOGIN"},"Loopia":{"description":"Loopia (Swedish hosting provider)","host":"mailcluster.loopia.se","port":465},"Loops":{"description":"Loops","host":"smtp.loops.so","port":587},"mail.ee":{"description":"Mail.ee (Estonian email provider)","host":"smtp.mail.ee"},"Mail.ru":{"description":"Mail.ru","host":"smtp.mail.ru","port":465,"secure":true},"Mailcatch.app":{"description":"Mailcatch (email testing service)","host":"sandbox-smtp.mailcatch.app","port":2525},"Maildev":{"description":"MailDev (local email testing)","port":1025,"ignoreTLS":true},"MailerSend":{"description":"MailerSend","host":"smtp.mailersend.net","port":587},"Mailgun":{"description":"Mailgun","host":"smtp.mailgun.org","port":465,"secure":true},"Mailjet":{"description":"Mailjet","host":"in.mailjet.com","port":587},"Mailosaur":{"description":"Mailosaur (email testing service)","host":"mailosaur.io","port":25},"Mailtrap":{"description":"Mailtrap","host":"live.smtp.mailtrap.io","port":587},"Mandrill":{"description":"Mandrill (by Mailchimp)","host":"smtp.mandrillapp.com","port":587},"Naver":{"description":"Naver Mail (Korean email provider)","host":"smtp.naver.com","port":587},"OhMySMTP":{"description":"OhMySMTP (email delivery service)","host":"smtp.ohmysmtp.com","port":587,"secure":false},"One":{"description":"One.com Email","host":"send.one.com","port":465,"secure":true},"OpenMailBox":{"description":"OpenMailBox","aliases":["OMB","openmailbox.org"],"host":"smtp.openmailbox.org","port":465,"secure":true},"Outlook365":{"description":"Microsoft 365 / Office 365","host":"smtp.office365.com","port":587,"secure":false},"Postmark":{"description":"Postmark","aliases":["PostmarkApp"],"host":"smtp.postmarkapp.com","port":2525},"Proton":{"description":"Proton Mail","aliases":["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],"domains":["proton.me","protonmail.com","pm.me","protonmail.ch"],"host":"smtp.protonmail.ch","port":587,"requireTLS":true},"qiye.aliyun":{"description":"Alibaba Mail Enterprise Edition","host":"smtp.mxhichina.com","port":"465","secure":true},"QQ":{"description":"QQ Mail","domains":["qq.com"],"host":"smtp.qq.com","port":465,"secure":true},"QQex":{"description":"QQ Enterprise Mail","aliases":["QQ Enterprise"],"domains":["exmail.qq.com"],"host":"smtp.exmail.qq.com","port":465,"secure":true},"Resend":{"description":"Resend","host":"smtp.resend.com","port":465,"secure":true},"Runbox":{"description":"Runbox (Norwegian email provider)","domains":["runbox.com"],"host":"smtp.runbox.com","port":465,"secure":true},"SendCloud":{"description":"SendCloud (Chinese email delivery)","host":"smtp.sendcloud.net","port":2525},"SendGrid":{"description":"SendGrid","host":"smtp.sendgrid.net","port":587},"SendinBlue":{"description":"Brevo (formerly Sendinblue)","aliases":["Brevo"],"host":"smtp-relay.brevo.com","port":587},"SendPulse":{"description":"SendPulse","host":"smtp-pulse.com","port":465,"secure":true},"SES":{"description":"AWS SES US East (N. Virginia)","host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-1":{"description":"AWS SES Asia Pacific (Tokyo)","host":"email-smtp.ap-northeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-2":{"description":"AWS SES Asia Pacific (Seoul)","host":"email-smtp.ap-northeast-2.amazonaws.com","port":465,"secure":true},"SES-AP-NORTHEAST-3":{"description":"AWS SES Asia Pacific (Osaka)","host":"email-smtp.ap-northeast-3.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTH-1":{"description":"AWS SES Asia Pacific (Mumbai)","host":"email-smtp.ap-south-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-1":{"description":"AWS SES Asia Pacific (Singapore)","host":"email-smtp.ap-southeast-1.amazonaws.com","port":465,"secure":true},"SES-AP-SOUTHEAST-2":{"description":"AWS SES Asia Pacific (Sydney)","host":"email-smtp.ap-southeast-2.amazonaws.com","port":465,"secure":true},"SES-CA-CENTRAL-1":{"description":"AWS SES Canada (Central)","host":"email-smtp.ca-central-1.amazonaws.com","port":465,"secure":true},"SES-EU-CENTRAL-1":{"description":"AWS SES Europe (Frankfurt)","host":"email-smtp.eu-central-1.amazonaws.com","port":465,"secure":true},"SES-EU-NORTH-1":{"description":"AWS SES Europe (Stockholm)","host":"email-smtp.eu-north-1.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-1":{"description":"AWS SES Europe (Ireland)","host":"email-smtp.eu-west-1.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-2":{"description":"AWS SES Europe (London)","host":"email-smtp.eu-west-2.amazonaws.com","port":465,"secure":true},"SES-EU-WEST-3":{"description":"AWS SES Europe (Paris)","host":"email-smtp.eu-west-3.amazonaws.com","port":465,"secure":true},"SES-SA-EAST-1":{"description":"AWS SES South America (SÃ£o Paulo)","host":"email-smtp.sa-east-1.amazonaws.com","port":465,"secure":true},"SES-US-EAST-1":{"description":"AWS SES US East (N. Virginia)","host":"email-smtp.us-east-1.amazonaws.com","port":465,"secure":true},"SES-US-EAST-2":{"description":"AWS SES US East (Ohio)","host":"email-smtp.us-east-2.amazonaws.com","port":465,"secure":true},"SES-US-GOV-EAST-1":{"description":"AWS SES GovCloud (US-East)","host":"email-smtp.us-gov-east-1.amazonaws.com","port":465,"secure":true},"SES-US-GOV-WEST-1":{"description":"AWS SES GovCloud (US-West)","host":"email-smtp.us-gov-west-1.amazonaws.com","port":465,"secure":true},"SES-US-WEST-1":{"description":"AWS SES US West (N. California)","host":"email-smtp.us-west-1.amazonaws.com","port":465,"secure":true},"SES-US-WEST-2":{"description":"AWS SES US West (Oregon)","host":"email-smtp.us-west-2.amazonaws.com","port":465,"secure":true},"Seznam":{"description":"Seznam Email (Czech email provider)","aliases":["Seznam Email"],"domains":["seznam.cz","email.cz","post.cz","spoluzaci.cz"],"host":"smtp.seznam.cz","port":465,"secure":true},"SMTP2GO":{"description":"SMTP2GO","host":"mail.smtp2go.com","port":2525},"Sparkpost":{"description":"SparkPost","aliases":["SparkPost","SparkPost Mail"],"domains":["sparkpost.com"],"host":"smtp.sparkpostmail.com","port":587,"secure":false},"Tipimail":{"description":"Tipimail (email delivery service)","host":"smtp.tipimail.com","port":587},"Tutanota":{"description":"Tutanota (Tuta Mail)","domains":["tutanota.com","tuta.com","tutanota.de","tuta.io"],"host":"smtp.tutanota.com","port":465,"secure":true},"Yahoo":{"description":"Yahoo Mail","domains":["yahoo.com"],"host":"smtp.mail.yahoo.com","port":465,"secure":true},"Yandex":{"description":"Yandex Mail","domains":["yandex.ru"],"host":"smtp.yandex.ru","port":465,"secure":true},"Zimbra":{"description":"Zimbra Mail Server","aliases":["Zimbra Collaboration"],"host":"smtp.zimbra.com","port":587,"requireTLS":true},"Zoho":{"description":"Zoho Mail","host":"smtp.zoho.com","port":465,"secure":true,"authMethod":"LOGIN"}}'))},907117,e=>{"use strict";e.i(423502);var t=e.i(698902),i=e.i(843793),r=e.i(307144),s=e.i(883406);let o=[{prefix:"core.agency.",requireAny:["core.agency.account"]},{prefix:"core.billing.",requireAll:["core.agency.account"]},{prefix:"iam.authZ.",requireAnyAll:[["core.agency.account"],["core.subaccount.account"]]},{prefix:"core.subaccount.",requireAny:["core.agency.subaccounts","core.subaccount.account"]},{prefix:"core.apps.",requireAny:["core.apps.api_keys","core.apps.app","core.apps.webhooks"]},{prefix:"core.billing.priority_support.",requireAny:["core.billing.priority_support"]},{prefix:"core.billing.rebilling.",requireAny:["crm.customers.billing"]},{prefix:"crm.customers.contact.",requireAny:["crm.customers.contact"]},{prefix:"crm.customers.billing.",requireAny:["crm.customers.billing"]},{prefix:"crm.funnels.content.",requireAny:["crm.funnels.content"]},{prefix:"crm.pipelines.lane.",requireAny:["crm.pipelines.lane"]},{prefix:"crm.pipelines.ticket.",requireAny:["crm.pipelines.lane"]},{prefix:"crm.pipelines.tag.",requireAny:["crm.pipelines.lane"]},{prefix:"crm.media.file.",requireAny:["crm.media.file"]},{prefix:"fi.configuration.",requireAny:["fi.general_ledger.settings","fi.accounts_receivable.subledgers","fi.accounts_payable.subledgers","fi.bank_ledger.bank_accounts","fi.controlling.cost_centers","fi.advanced_reporting.financial_statements"]},{prefix:"fi.general_ledger.",requireAny:["fi.general_ledger.settings"]},{prefix:"fi.accounts_receivable.",requireAny:["fi.accounts_receivable.subledgers"]},{prefix:"fi.accounts_payable.",requireAny:["fi.accounts_payable.subledgers"]},{prefix:"fi.bank_ledger.",requireAny:["fi.bank_ledger.bank_accounts"]},{prefix:"fi.controlling.",requireAny:["fi.controlling.cost_centers"]},{prefix:"fi.advanced_reporting.",requireAny:["fi.advanced_reporting.financial_statements"]},{prefix:"co.cost_centers.",requireAny:["co.cost_centers.master_data"]},{prefix:"co.profit_centers.",requireAny:["co.profit_centers.master_data"]},{prefix:"co.internal_orders.",requireAny:["co.internal_orders.master_data"]},{prefix:"co.profitability.",requireAny:["co.profitability.segments"]},{prefix:"co.budgets.",requireAny:["co.budgets.planning"]}];function a(e){if(!e)return!1;if("BOOLEAN"===e.valueType)return e.isEnabled;if(!e.isEnabled)return!1;if(e.isUnlimited||(e.maxInt??e.includedInt??0)>0)return!0;let t=parseFloat(e.maxDec??e.includedDec??"0");return Number.isFinite(t)&&t>0}let n=async()=>{let e=await (0,t.auth)(),r=e?.user?.id;return r?i.db.user.findUnique({where:{id:r},include:{AgencyMemberships:{where:{isActive:!0},include:{Agency:!0,Role:{include:{Permissions:{where:{granted:!0},include:{Permission:!0}}}}}},SubAccountMemberships:{where:{isActive:!0},include:{SubAccount:!0,Role:{include:{Permissions:{where:{granted:!0},include:{Permission:!0}}}}}}}}):null},c=async()=>{let e=await n();if(!e)return[];let t=e.AgencyMemberships.flatMap(e=>e.Role.Permissions.map(e=>e.Permission)),i=e.SubAccountMemberships.flatMap(e=>e.Role.Permissions.map(e=>e.Permission)),r={};for(let e of[...t,...i])r[e.key]=e;return Object.keys(r).map(e=>r[e])},p=async()=>(await c()).map(e=>e.key),l=async e=>{let t=e.trim();return(await p()).includes(t)},m=async e=>{let t=await n();if(!t)return[];let i=t.AgencyMemberships.find(t=>t.agencyId===e);return i?i.Role.Permissions.map(e=>e.Permission.key):[]},u=async e=>{let t=await n();if(!t)return[];let i=t.SubAccountMemberships.find(t=>t.subAccountId===e);return i?i.Role.Permissions.map(e=>e.Permission.key):[]},d=async(e,t)=>{let i=t.trim();return(await m(e)).includes(i)},h=async(e,t)=>{let i=t.trim();return(await u(e)).includes(i)},S=async(e,t)=>{let n,c=await (0,r.resolveEffectiveEntitlements)({scope:"SUBACCOUNT"===t?"SUBACCOUNT":"AGENCY",agencyId:e,subAccountId:null}),p="AGENCY"===t?["core.agency.","core.billing.","core.apps.","core.experimental.","crm.","fi."]:["core.subaccount.","crm.","fi."],l=(n=[],!function e(t,i){if(t&&"object"==typeof t)for(let r of Object.values(t))"string"==typeof r?i.push(r):r&&"object"==typeof r&&e(r,i)}(s.KEYS,n),Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)).map(e=>{var t;let i,r,s;return{key:e,name:(r=(i=(t=e).split("."))[i.length-1]??t,s=i[i.length-2]??"",`${s} ${r}`.trim().replace(/[-_]/g," ").replace(/\b\w/g,e=>e.toUpperCase())),description:null,category:e.split(".").slice(0,2).join("."),isSystem:!0}})).filter(e=>p.some(t=>e.key.startsWith(t))).filter(e=>(function(e,t){let i=function(e){let t=null;for(let i of o)e.startsWith(i.prefix)&&(!t||i.prefix.length>t.prefix.length)&&(t=i);return t}(e);if(!i)return!(e.startsWith("fi.")||e.startsWith("co."));if(i.requireAll?.length){for(let e of i.requireAll)if(!a(t[e]))return!1}return(!i.requireAnyAll?.length||!!i.requireAnyAll.some(e=>e.every(e=>a(t[e]))))&&(!i.requireAny?.length||i.requireAny.some(e=>a(t[e])))})(e.key,c));await i.db.permission.createMany({data:l.map(e=>({key:e.key,name:e.name,description:e.description,category:e.category,isSystem:e.isSystem})),skipDuplicates:!0});let m=await i.db.permission.findMany({where:{key:{in:l.map(e=>e.key)}},orderBy:[{category:"asc"},{key:"asc"}]}),u={};for(let e of m)u[e.category]||(u[e.category]=[]),u[e.category].push(e);return u},f=async(e,t)=>Object.values(await S(e,t)).flat().map(e=>e.key),y=async(e,t,i)=>{let r=new Set(await f(e,t)),s=i.filter(e=>!r.has(e));return{valid:0===s.length,invalidKeys:s}},g=async()=>{let e=await n();if(!e)return[];let t=[],i=new Map;for(let t of e.SubAccountMemberships){let e=t.SubAccount,r=e.agencyId,s={id:e.id,name:e.name,logo:e.subAccountLogo||void 0,type:"subaccount"};i.has(r)||i.set(r,[]),i.get(r).push(s)}for(let r of e.AgencyMemberships){let e=r.Agency,s=i.get(e.id)||[];t.push({id:e.id,name:e.name,logo:e.agencyLogo||void 0,type:"agency",subaccounts:s.length>0?s:void 0})}return t};e.s(["getAgencyPermissionKeys",0,m,"getAuthUserMemberships",0,n,"getEntitledPermissionKeys",0,f,"getEntitledPermissions",0,S,"getSubAccountPermissionKeys",0,u,"getUserAccessibleTeams",0,g,"getUserPermissionKeys",0,p,"getUserPermissions",0,c,"hasAgencyPermission",0,d,"hasPermission",0,l,"hasSubAccountPermission",0,h,"validatePermissionKeys",0,y],907117)},997953,(e,t,i)=>{"use strict";t.exports=e.r(442315).vendored["react-rsc"].ReactServerDOMTurbopackServer},745015,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"registerServerReference",{enumerable:!0,get:function(){return r.registerServerReference}});let r=e.r(997953)},195975,(e,t,i)=>{"use strict";function r(e){for(let t=0;t<e.length;t++){let i=e[t];if("function"!=typeof i)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof i}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ensureServerEntryExports",{enumerable:!0,get:function(){return r}})},183622,e=>{e.v(t=>Promise.all(["server/chunks/src_lib_features_iam_authz_permissions_ts_ca6b2f3e._.js","server/chunks/src_lib_62c344a8._.js"].map(t=>e.l(t))).then(()=>t(907117)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fd320d01._.js.map