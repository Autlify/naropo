module.exports=[73903,e=>{"use strict";e.i(423502);var a=e.i(698902),r=e.i(843793);let t=e=>{if(!e)return"MISSING";let a=new Date,r=(e.status||"").toUpperCase(),t=e.currentPeriodEndDate instanceof Date&&e.currentPeriodEndDate.getTime()>a.getTime();return("ACTIVE"===r||"TRIALING"===r)&&t||"TRIALING"===r&&e.trialEndedAt instanceof Date&&e.trialEndedAt.getTime()>a.getTime()?"ACTIVE":"INACTIVE"},n=async e=>{let a=await r.db.agencyMembership.findFirst({where:{userId:e.userId,agencyId:e.agencyId,isActive:!0},select:{userId:!0,agencyId:!0,Role:{select:{Permissions:{where:{granted:!0},select:{Permission:{select:{key:!0}}}}}},Agency:{select:{Subscription:{select:{status:!0,currentPeriodEndDate:!0,trialEndedAt:!0,active:!0,cancelAtPeriodEnd:!0}}}}}});if(!a)return null;let n=a.Role.Permissions.map(e=>e.Permission.key),i=t(a.Agency.Subscription);return{userId:a.userId,agencyId:a.agencyId,permissionKeys:n,subscriptionState:i}},i=async e=>{let n=await (0,a.auth)(),i=n?.user?.id;if(!i)return null;let s=await r.db.agencyMembership.findFirst({where:{userId:i,agencyId:e.agencyId,isActive:!0},select:{userId:!0,agencyId:!0,Role:{select:{Permissions:{where:{granted:!0},select:{Permission:{select:{key:!0}}}}}},Agency:{select:{Subscription:{select:{status:!0,currentPeriodEndDate:!0,trialEndedAt:!0,active:!0,cancelAtPeriodEnd:!0}}}}}});if(!s)return null;let c=s.Role.Permissions.map(e=>e.Permission.key),o=t(s.Agency.Subscription);return{userId:s.userId,agencyId:s.agencyId,permissionKeys:c,subscriptionState:o}},s=async e=>t(await r.db.subscription.findUnique({where:{agencyId:e},select:{status:!0,currentPeriodEndDate:!0,trialEndedAt:!0,active:!0,cancelAtPeriodEnd:!0}})),c=async e=>{let a=await r.db.subAccountMembership.findFirst({where:{userId:e.userId,subAccountId:e.subAccountId,isActive:!0},select:{userId:!0,subAccountId:!0,SubAccount:{select:{agencyId:!0}},Role:{select:{Permissions:{where:{granted:!0},select:{Permission:{select:{key:!0}}}}}}}});if(!a)return null;let t=a.Role.Permissions.map(e=>e.Permission.key);return{userId:a.userId,agencyId:a.SubAccount.agencyId,subAccountId:a.subAccountId,permissionKeys:t}},o=async e=>{let r=await (0,a.auth)(),t=r?.user?.id;return t?c({userId:t,subAccountId:e.subAccountId}):null};e.s(["CONTEXT_COOKIE",0,"autlify.context-token","getAgencySubscriptionState",0,s,"parseSavedContext",0,e=>{if(!e)return null;let[a,r]=e.split(":");return r?"agency"===a?{kind:"agency",agencyId:r}:"subaccount"===a?{kind:"subaccount",subAccountId:r}:null:null},"resolveAgencyContextForUser",0,n,"resolveCurrentAgencyContext",0,i,"resolveCurrentSubAccountContext",0,o,"resolveSubAccountContextForUser",0,c])},883406,e=>{"use strict";e.s(["KEYS",0,{core:{organization:{profile:{view:"core.organization.profile.view",manage:"core.organization.profile.manage"},security:{view:"core.organization.security.view",manage:"core.organization.security.manage"},integrations:{view:"core.organization.integrations.view",manage:"core.organization.integrations.manage"},automation:{view:"core.organization.automation.view",manage:"core.organization.automation.manage"}},agency:{account:{read:"core.agency.account.read",update:"core.agency.account.update",delete:"core.agency.account.delete"},subaccounts:{read:"core.agency.subaccounts.read",create:"core.agency.subaccounts.create",update:"core.agency.subaccounts.update",delete:"core.agency.subaccounts.delete"},team_member:{invite:"core.agency.team_member.invite",remove:"core.agency.team_member.remove",manage:"core.agency.team_member.manage"},settings:{view:"core.agency.settings.view",manage:"core.agency.settings.manage"},storage:{view:"core.agency.storage.view",manage:"core.agency.storage.manage"}},billing:{account:{view:"core.billing.account.view",manage:"core.billing.account.manage"},payment_methods:{read:"core.billing.payment_methods.read",create:"core.billing.payment_methods.create",delete:"core.billing.payment_methods.delete"},subscription:{view:"core.billing.subscription.view",manage:"core.billing.subscription.manage"},features:{manage:"core.billing.features.manage"},usage:{view:"core.billing.usage.view",consume:"core.billing.usage.consume"},entitlements:{view:"core.billing.entitlements.view"},credits:{view:"core.billing.credits.view"},rebilling:{manage:"core.billing.rebilling.manage"},priority_support:{view:"core.billing.priority_support.view"}},subaccount:{account:{read:"core.subaccount.account.read",update:"core.subaccount.account.update",delete:"core.subaccount.account.delete"},team_member:{invite:"core.subaccount.team_member.invite",remove:"core.subaccount.team_member.remove"}},experimental:{flag:{toggle:"core.experimental.flag.toggle"}},apps:{app:{view:"core.apps.app.view",install:"core.apps.app.install",manage:"core.apps.app.manage",uninstall:"core.apps.app.uninstall"},webhooks:{manage:"core.apps.webhooks.manage",view:"core.apps.webhooks.view"},api_keys:{read:"core.apps.api_keys.read",create:"core.apps.api_keys.create",delete:"core.apps.api_keys.delete"}},support:{tickets:{view:"core.support.tickets.view",create:"core.support.tickets.create",update:"core.support.tickets.update",close:"core.support.tickets.close"},diagnostics:{run:"core.support.diagnostics.run"}}},iam:{authZ:{roles:{read:"iam.authZ.roles.read",create:"iam.authZ.roles.create",update:"iam.authZ.roles.update",delete:"iam.authZ.roles.delete"},permissions:{view:"iam.authZ.permissions.view"},members:{assign:"iam.authZ.members.assign",revoke:"iam.authZ.members.revoke"}}},fi:{configuration:{fiscal_years:{view:"fi.configuration.fiscal_years.view",manage:"fi.configuration.fiscal_years.manage"},currencies:{view:"fi.configuration.currencies.view",manage:"fi.configuration.currencies.manage"},tax_settings:{view:"fi.configuration.tax_settings.view",manage:"fi.configuration.tax_settings.manage"},tolerances:{view:"fi.configuration.tolerances.view",manage:"fi.configuration.tolerances.manage"},number_ranges:{view:"fi.configuration.number_ranges.view",manage:"fi.configuration.number_ranges.manage"},posting_rules:{view:"fi.configuration.posting_rules.view",manage:"fi.configuration.posting_rules.manage",simulate:"fi.configuration.posting_rules.simulate"}},master_data:{accounts:{view:"fi.master_data.accounts.view",manage:"fi.master_data.accounts.manage"},customers:{view:"fi.master_data.customers.view",manage:"fi.master_data.customers.manage"},vendors:{view:"fi.master_data.vendors.view",manage:"fi.master_data.vendors.manage"},banks:{view:"fi.master_data.banks.view",manage:"fi.master_data.banks.manage"}},general_ledger:{accounts:{view:"fi.general_ledger.accounts.view",manage:"fi.general_ledger.accounts.manage"},subledgers:{view:"fi.general_ledger.subledgers.view",allocate:"fi.general_ledger.subledgers.allocate",manage:"fi.general_ledger.subledgers.manage"},balances:{view:"fi.general_ledger.balances.view",recalculate:"fi.general_ledger.balances.recalculate",rollforward:"fi.general_ledger.balances.rollforward"},settings:{view:"fi.general_ledger.settings.view",manage:"fi.general_ledger.settings.manage",setup:"fi.general_ledger.settings.setup"},journal_entries:{read:"fi.general_ledger.journal_entries.read",create:"fi.general_ledger.journal_entries.create",update:"fi.general_ledger.journal_entries.update",submit:"fi.general_ledger.journal_entries.submit",delete:"fi.general_ledger.journal_entries.delete",reverse:"fi.general_ledger.journal_entries.reverse",reject:"fi.general_ledger.journal_entries.reject",approve:"fi.general_ledger.journal_entries.approve"},reports:{view:"fi.general_ledger.reports.view",generate:"fi.general_ledger.reports.generate",approve:"fi.general_ledger.reports.approve",export:"fi.general_ledger.reports.export"},consolidation:{view:"fi.general_ledger.consolidation.view",manage:"fi.general_ledger.consolidation.manage"},year_end:{view:"fi.general_ledger.year_end.view",manage:"fi.general_ledger.year_end.manage",close:"fi.general_ledger.year_end.close"},reconciliation:{view:"fi.general_ledger.reconciliation.view",manage:"fi.general_ledger.reconciliation.manage",clear:"fi.general_ledger.reconciliation.clear",reset:"fi.general_ledger.reconciliation.reset"}},accounts_receivable:{subledgers:{view:"fi.accounts_receivable.subledgers.view",allocate:"fi.accounts_receivable.subledgers.allocate",manage:"fi.accounts_receivable.subledgers.manage"}},accounts_payable:{subledgers:{view:"fi.accounts_payable.subledgers.view",allocate:"fi.accounts_payable.subledgers.allocate",manage:"fi.accounts_payable.subledgers.manage"}},bank_ledger:{bank_accounts:{view:"fi.bank_ledger.bank_accounts.view",manage:"fi.bank_ledger.bank_accounts.manage"},subledgers:{view:"fi.bank_ledger.subledgers.view",allocate:"fi.bank_ledger.subledgers.allocate",manage:"fi.bank_ledger.subledgers.manage"}},controlling:{cost_centers:{view:"fi.controlling.cost_centers.view",manage:"fi.controlling.cost_centers.manage"}},advanced_reporting:{financial_statements:{view:"fi.advanced_reporting.financial_statements.view",generate:"fi.advanced_reporting.financial_statements.generate"},custom_reports:{view:"fi.advanced_reporting.custom_reports.view",create:"fi.advanced_reporting.custom_reports.create",update:"fi.advanced_reporting.custom_reports.update",delete:"fi.advanced_reporting.custom_reports.delete"}}},crm:{customers:{contact:{read:"crm.customers.contact.read",create:"crm.customers.contact.create",update:"crm.customers.contact.update",delete:"crm.customers.contact.delete"},billing:{read:"crm.customers.billing.read",create:"crm.customers.billing.create",update:"crm.customers.billing.update",delete:"crm.customers.billing.delete"}},media:{file:{read:"crm.media.file.read",create:"crm.media.file.create",delete:"crm.media.file.delete"}},funnels:{content:{read:"crm.funnels.content.read",create:"crm.funnels.content.create",update:"crm.funnels.content.update",delete:"crm.funnels.content.delete",publish:"crm.funnels.content.publish"}},pipelines:{lane:{read:"crm.pipelines.lane.read",create:"crm.pipelines.lane.create",update:"crm.pipelines.lane.update",delete:"crm.pipelines.lane.delete"},ticket:{read:"crm.pipelines.ticket.read",create:"crm.pipelines.ticket.create",update:"crm.pipelines.ticket.update",delete:"crm.pipelines.ticket.delete"},tag:{read:"crm.pipelines.tag.read",create:"crm.pipelines.tag.create",update:"crm.pipelines.tag.update",delete:"crm.pipelines.tag.delete"}}},co:{cost_centers:{master_data:{read:"co.cost_centers.master_data.read",create:"co.cost_centers.master_data.create",update:"co.cost_centers.master_data.update",delete:"co.cost_centers.master_data.delete"},hierarchy:{view:"co.cost_centers.hierarchy.view",manage:"co.cost_centers.hierarchy.manage"},allocations:{view:"co.cost_centers.allocations.view",execute:"co.cost_centers.allocations.execute"},reports:{view:"co.cost_centers.reports.view",generate:"co.cost_centers.reports.generate"}},profit_centers:{master_data:{read:"co.profit_centers.master_data.read",create:"co.profit_centers.master_data.create",update:"co.profit_centers.master_data.update",delete:"co.profit_centers.master_data.delete"},hierarchy:{view:"co.profit_centers.hierarchy.view",manage:"co.profit_centers.hierarchy.manage"},reports:{view:"co.profit_centers.reports.view",generate:"co.profit_centers.reports.generate"}},internal_orders:{master_data:{read:"co.internal_orders.master_data.read",create:"co.internal_orders.master_data.create",update:"co.internal_orders.master_data.update",close:"co.internal_orders.master_data.close"},settlement:{view:"co.internal_orders.settlement.view",execute:"co.internal_orders.settlement.execute"}},profitability:{segments:{view:"co.profitability.segments.view",manage:"co.profitability.segments.manage"},reports:{view:"co.profitability.reports.view",generate:"co.profitability.reports.generate"}},budgets:{planning:{view:"co.budgets.planning.view",create:"co.budgets.planning.create",update:"co.budgets.planning.update",approve:"co.budgets.planning.approve"},monitoring:{view:"co.budgets.monitoring.view",alerts:"co.budgets.monitoring.alerts"}}}}])},50377,e=>{"use strict";let a=process.env.LOG_LEVEL||"info",r=new class{level;prefix;levels={debug:0,info:1,warn:2,error:3};constructor(e){this.level=e.level,this.prefix=e.prefix||""}shouldLog(e){return this.levels[e]>=this.levels[this.level]}formatMessage(e){return this.prefix?`[${this.prefix}] ${e}`:e}formatData(e){if(e)return e instanceof Error?{...e,message:e.message,name:e.name,stack:e.stack}:e}debug(e,a){this.shouldLog("debug")&&console.debug(this.formatMessage(e),this.formatData(a))}info(e,a,r,t){this.shouldLog("info")&&console.info(this.formatMessage(e),this.formatData(a))}warn(e,a){this.shouldLog("warn")&&console.warn(this.formatMessage(e),this.formatData(a))}error(e,a){this.shouldLog("error")&&console.error(this.formatMessage(e),this.formatData(a))}}({level:a,prefix:"Autlify"});e.s(["logger",0,r])},997953,(e,a,r)=>{"use strict";a.exports=e.r(442315).vendored["react-rsc"].ReactServerDOMTurbopackServer},745015,(e,a,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"registerServerReference",{enumerable:!0,get:function(){return t.registerServerReference}});let t=e.r(997953)},195975,(e,a,r)=>{"use strict";function t(e){for(let a=0;a<e.length;a++){let r=e[a];if("function"!=typeof r)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ensureServerEntryExports",{enumerable:!0,get:function(){return t}})}];

//# sourceMappingURL=_ecfcc697._.js.map